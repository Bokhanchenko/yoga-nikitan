(window.webpackJsonp=window.webpackJsonp||[]).push([[61],Array(404).concat([function(e,t,i){"use strict";(function(e,t){var s=i(1)(i(17)),a=i(0),o=i(489),r=i(478),l=i(490),n=i(888),c=i(793),h=i(485),d=i(492),u=i(517),p=i(498),f=i(887),g=i(874),m=i(870),b=i(838),_=i(781),v=i(515),w=i(779),y=i(514),k=i(139),x=i(516),C=i(48),S=i(630),T=i(776),M=i(837),F=i(692),z=i(527),L=i(682),P=i(775),E=i(523),R=i(14),I=i(127),A=i(23),V=i(7)(e),D=i(141),N=i(11).defaultMeta,B=i(836)(),U=i(698),H=i(752);e.exports=o.extend({doPushState:!0,asyncApiQueries:!0,serverRenderingEnabled:!1,notFound:!1,firstTrackApplied:!1,initialize:function(){var e=this;this.app.store.link("CartIndicator",new y({},{app:this.app,fetch:!0})),this.searchRestrictions=new x(this.app.user.get("searchVisibility"),{app:this.app}),this.searchQuery=v.createInstance({app:this.app,searchRestrictions:this.searchRestrictions}),this.searchSettings=k.createInstance({app:this.app}),this.app.store.link("SearchQuery",this.searchQuery),this.app.store.link("SearchSettings",this.searchSettings),this.searchAuthor=new _({},{app:this.app}),this.searchInfo=new w({},{app:this.app}),this.bannersCollection=new F([],{app:this.app}),this.bannersCollection.fetch(),this.buildCollection(),this.buildSortingCollection(),this.mixedLatestCollections=new P([],{app:this.app}),this.mixedLatestCollections.fetch(),B.setEnv(this.app),this.app.user.isEnterprise()&&(this.enterpriseGroups=new z([],{app:this.app}),this.enterpriseGroups.queryParams={allStructure:!0},this.enterpriseGroups.fetch()),this.prepareInit(),this.pagerModel=new b({unlimited:!0},{app:this.app}),this.pagerModelApplyParams(),this.recentSearches=new M([],{app:this.app}),this.topKeywords=new S([],{app:this.app,type:this.searchQuery.defineItemsType()}),this.topKeywords.fetch(),this.listenTo(this.searchQuery,{change:function(t){e.doSearch(t),e.trackSearchQueryChange()},invalid:function(e,t){return V.error("searchQueryModel validation error",t)}}),this.listenTo(this.pagerModel,"change:page",this.onPageChange),this.listenTo(this.collection,{sync:function(){e.doAfterSearch.apply(e,arguments),a.delay(function(){return e.trackAfterSearch()})},"update reset":this.pagerModelApplyParams,exception:this.generate500,itemNotFound:this.generate404})},prepareInit:function(){this.initCache()},buildCollection:function(){this.collection=new L([],{app:this.app}),this.collection.url=this.searchQuery.exportUrl.bind(this.searchQuery),this.collection.getQueryParams=this.searchQuery.getQueryParams.bind(this.searchQuery),this.collection.fetch()},buildSortingCollection:function(){this.sortingCollection=new T([],{app:this.app,parse:!0,type:this.searchQuery.get("relatedTo")||"search"})},handlePagePopState:function(e){var t=this.findView("SearchFilesList");if(t&&t.onPopStateChange(),!e.queryParams.qview||parseInt(e.queryParams.offset,10)!==this.searchQuery.get("offset")){var i=this.searchQuery.parse(e.queryParams);!this.searchQuery.get("relatedTo")&&i.relatedTo||this.searchQuery.get("relatedTo")&&!i.relatedTo?e.router.redirect(e.originalUrl):(this.doPushState=!1,i=i.hash?a.pick(i,["hash","offset","relatedTo","relatedItemId"]):a.extend({},this.searchQuery.defaults,i,e.userSettings.get("SearchQuery")),this.searchQuery.secureSet(i))}},getMeta:function(){var e=this,t=function(t){var i=R.urlParse(t);return e.app.parsedUrl.protocol+"//"+e.app.parsedUrl.hostname+i.pathname};this.meta=this.meta||{},this.meta.canonical=this.getCanonical(),this.meta.hreflangDisabled=E.imitateLangLinksEnabled(this.app),this.meta.title=this.meta.title||this.tr(a.findWhere(N,{page:"default",type:"title"}).label),this.meta.description=this.meta.description||this.tr(a.findWhere(N,{page:"default",type:"description"}).label);var i=[{tagName:"meta",selfClosing:!0,attributes:{property:"og:url",content:this.app.originalUrl}},{tagName:"meta",selfClosing:!0,attributes:{property:"og:title",content:this.meta.title}},{tagName:"meta",selfClosing:!0,attributes:{property:"og:description",content:this.meta.description}},{tagName:"meta",selfClosing:!0,attributes:{property:"og:site_name",content:"Depositphotos"}},{tagName:"meta",selfClosing:!0,attributes:{property:"twitter:url",content:this.app.originalUrl}},{tagName:"meta",selfClosing:!0,attributes:{property:"twitter:title",content:this.meta.title}},{tagName:"meta",selfClosing:!0,attributes:{property:"twitter:description",content:this.meta.description}},{tagName:"meta",selfClosing:!0,attributes:{property:"twitter:site",content:"@depositphotos"}}];if(this.collection.length){var s=this.getMetaImage();if(i.push({tagName:"meta",selfClosing:!0,attributes:{property:"og:image",content:s}},{tagName:"meta",selfClosing:!0,attributes:{property:"twitter:image",content:s}}),this.pagerModel.get("pagesCount")>1){var o=this.pagerModel.getSchema(this.searchQuery,this.searchAuthor,this.searchInfo);o.prev&&i.push({tagName:"link",selfClosing:!0,attributes:{rel:"prev",href:t(o.prev)}}),o.next&&i.push({tagName:"link",selfClosing:!0,attributes:{rel:"next",href:t(o.next)}})}}else this.meta.robots="noindex,follow";return{tags:i,params:this.meta}},getMetaImage:function(){return this.collection.length?this.collection.first().get("thumbs").huge:""},updateClientMeta:function(){document.title=this.meta.title,this.updateClientMetaBase(),this.updateClientMetaNextPrev(),this.updateClientRobotsMeta()},updateClientMetaBase:function(){var e=this.getMetaImage(),t=[{property:"og:url",content:this.app.originalUrl},{property:"og:image",content:e},{property:"og:title",content:this.meta.title},{property:"og:description",content:this.meta.description},{property:"twitter:url",content:this.app.originalUrl},{property:"twitter:image",content:e},{property:"twitter:title",content:this.meta.title},{property:"twitter:description",content:this.meta.description}];a.each(t,function(e){return Backbone.$('meta[property="'+e.property+'"]').attr("content",e.content)})},updateClientMetaNextPrev:function(){var e=this,t=this.pagerModel.getSchema(this.searchQuery,this.searchAuthor,this.searchInfo),i=[{type:"prev",url:t.prev},{type:"next",url:t.next}];a.each(i,function(t){var i=Backbone.$('link[rel="'+t.type+'"]');t.url&&e.collection.length&&e.pagerModel.get("pagesCount")>1?(i.length||(i=Backbone.$('<link rel="'+t.type+'">'),Backbone.$("head").append(i)),i.attr("href",t.url)):i.remove()})},updateClientRobotsMeta:function(){var e=Backbone.$('meta[name="robots"]');this.metaRobotsDisabled()&&e.length?e.remove():e.length||(e=Backbone.$('<meta name="robots" content="'+this.meta.robots+'">'),Backbone.$("head").append(e))},metaRobotsDisabled:function(){return parseInt(this.pagerModel.get("page"),10)>1&&(this.app.store.get("SearchQuery").isPortfolio()&&!this.app.store.get("SearchQuery").get("query")||this.app.store.get("SearchQuery").isCategory()||~["photo","vector","video"].indexOf(this.app.store.get("SearchQuery").defineSearchType()))},getResponseHeaders:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var s=o.prototype.getResponseHeaders.apply(this,t);return this.meta&&this.meta.lastModified&&a.extend(s,{"Last-Modified":new Date(1e3*this.meta.lastModified).toUTCString()}),s},getCanonical:function(){var e="image",t=this.app.makeUrl(a.extend(this.getUrlParams(),{route:this.name,hash:""}));return E.isCanonicalWithPage(this.app)&&this.app.store.get("SearchQuery").isCategory()||(t=t.replace(/(?:-st\d+)?\.html/,".html")),this.searchQuery.get("query")&&-1!==t.search("/search/")?(!this.searchQuery.get("photo")&&!this.searchQuery.get("vector")^!this.searchQuery.get("video")&&(e=this.searchQuery.get("vector")?"vector":"video"),t=t.replace("/search/","/"+{image:"stock-photos",vector:"vector-images",video:"stock-footage"}[e]+"/")):-1!==t.search("/folder/")?t=this.app.makeUrl({route:"Search",pageType:"photo",keywordName:this.searchInfo.get("meta").folderNameClean}):~t.search("/search-new-photos/index")&&(t=this.app.makeUrl("search-new/index")),this.app.parsedUrl.protocol+"//"+this.app.parsedUrl.hostname+t},doSearch:function(){this.isSearchByFileId()?this.app.router.redirect(this.app.makeUrl({route:"FileView",fileId:this.searchQuery.get("query")})):(this.collection.fetch({pushState:this.doPushState,reset:!0}),this.doPushState=!0,!this.searchQuery.get("relatedTo")&&this.searchQuery.previous("relatedTo")?this.render():(this.tryToShowSignUpModal(),this.trackBeforeSearch()))},trackSearchQueryChange:function(){var e=this.searchQuery.changedToTracking(!1,!0);(0,s.default)(e).length&&this.app.observer.broadcast("Track:UE:SearchFilter:SubmitAll",{changed:e})},doAfterSearch:function(e,i,s){t.browser&&this.searchQuery.get("offset")>this.collection.availableCount?(this.pagerModel.set("page",this.pagerModel.get("pagesCount")),this.collection.renderingDisabled=!0):this.collection.renderingDisabled=!1,this.applySeo(e),this.buildMeta(i),i.hash&&this.searchQuery.secureSet("hash",i.hash,{silent:!0}),this.setSearchRequest(i),(i.item||(i.did_you_mean||i.folderName)&&i.seo_meta)&&this.searchInfo.secureSet(a.extend(a.clone(this.searchInfo.defaults),this.searchInfo.parse(i))),i.author?this.searchAuthor.secureSet(this.searchAuthor.parse(i.author)):i.search_request&&this.searchAuthor.resetToDefaults(),i.sortings&&this.sortingCollection.reset(i.sortings,{parse:!0,parser:"parseFromSearch"}),!0===s.pushState&&this.updateBrowserHistory(),t.browser&&this.updateClientMeta(),this.recentSearches.write({query:this.searchQuery.get("query"),sorting:this.searchQuery.get("sorting"),count:this.collection.count||0}),this.collection.length||this.onEmptySearchResult(),this.isNeedRender()&&this.render()},applySeo:function(e){var t=this;this.collection.filterByTypeEnabled()&&e.each(function(e,i){var s=E.getSeoFileAltTemplate(e,i);e.set("seoAltTemplate",t.tr(s),{silent:!0})})},setSearchRequest:function(e){e.search_request&&(this.searchQuery.secureSet(a.extend({},this.searchQuery.defaults,this.searchQuery.parse(a.clone(e.search_request))),{silent:!0}),this.searchQuery.trigger("paramsArrived"))},isNeedRender:function(){return this.collection.length&&this.findView("SearchNoResult")},onEmptySearchResult:function(){this.$("._content").addClass(this.getRootClassNames())},onRouteLoad:function(){this.routeLoaded=!0,this.tryFirstTrack()},tryFirstTrack:function(){this.firstTrackApplied||this.routeLoaded&&this.hasRendered&&(this.firstTrackApplied=!0,this.trackAfterSearch())},buildMeta:function(e){e.seo_meta&&e.seo_meta.meta?this.meta=e.seo_meta.meta:this.meta={},this.prepareRobotsMeta()},prepareRobotsMeta:function(){this.metaRobotsDisabled()&&(this.meta.robotsDisabled=!0,delete this.meta.robots)},defineOpenedFilter:function(){return this.withFilters()?this.findView("SearchFilterMobile")&&this.findView("SearchFilterMobile").shouldBeDisplayed()?"mobile":this.findView("SearchFilterFull")?"full":this.findView("SearchFilterCompact")?"compact":null:"absent"},trackBeforeSearch:function(){var e=this;if(t.browser){var i=this.searchQuery.changedToTracking();a.each(i,function(t,i){e.app.observer.broadcast("Track:UE:SearchFilter:Submit",{filter:e.defineOpenedFilter(),value:t,key:i})})}},trackAfterSearch:function(){if(t.browser&&this.routeLoaded&&this.hasRendered){var e="/ingoing/search/noresult?query=noresult";this.collection.length&&(e=1!==parseInt(this.pagerModel.get("page"),10)?"/ingoing/"+this.searchQuery.toTracking("type")+"/pager/"+this.pagerModel.get("page"):this.app.parsedUrl.pathname+"?query="+this.searchQuery.get("query").replace(/\s/g,"+")),this.app.observer.broadcast("Track:PV,RE:Route",{route:"Search",url:e}),this.app.observer.broadcast(this.collection.length?"Track:UE:Search:Result":"Track:UE:Search:NoResult"),this.searchInfo.isSearchCorrectionEnabled()&&this.app.observer.broadcast("Track:UE:SearchInfo:WithCorrection"),this.searchInfo.isSearchCorrectionIgnored()&&this.app.observer.broadcast("Track:UE:SearchInfo:IgnoreCorrection")}},prepareRender:function(){this.setView("",new r({tagName:"div",name:"wrapper",className:this.getWrapperClassNames(),views:{"":[new l({app:this.app,views:{"._search-bar":new u({app:this.app,features:this.app.features,enableNavigate:!1,searchRestrictions:this.searchRestrictions,onSearchQueryChange:this.onSearchQueryChange.bind(this)}),"._user-bar":new p({app:this.app,onAuthCallback:this.onAuthCallback.bind(this),onLogoutCallback:this.onLogoutCallback.bind(this)}),".__search-mobile":new g({app:this.app,model:this.searchQuery})},onLogoutCallback:this.onLogoutCallback.bind(this)}),new h({customClassNames:this.getRootClassNames(),bgColor:this.getBgColor(),views:{"._content":[new c({views:{".__search-result":new m({template:U,app:this.app,collection:this.collection,pagerModel:this.pagerModel,searchInfo:this.searchInfo,searchAuthor:this.searchAuthor,enterpriseGroups:this.enterpriseGroups,banners:this.bannersCollection.toJSON(),topKeywords:this.topKeywords,sortingCollection:this.sortingCollection,latestCollections:this.mixedLatestCollections,onPageChange:this.onPageChange.bind(this),onSearchQueryChange:this.onSearchQueryChange.bind(this),onSearchSettingsChange:this.onSearchSettingsChange.bind(this),isSubFiltersEnabled:this.isSubFiltersEnabled(),removeFilterIndicators:this.removeFilterIndicators.bind(this),resetFilterIndicators:this.resetFilterIndicators.bind(this),enabledFolderSearch:this.enabledFolderSearch.bind(this),onRenderCallback:this.onRenderCallback.bind(this)})}}),new n({app:this.app,template:H,lazyViews:{"._search-form":new f({app:this.app,getComponent:this.findView.bind(this),onSearchSettingsChange:this.onSearchSettingsChange.bind(this),hoveredFilter:this.hoveredFilter})}})]}}),new d({app:this.app,feedbacks:this.feedbacks})]}}))},withFilters:function(){return!this.searchQuery.get("relatedTo")},clientAfterRender:function(){this.enableFavoritesPanel(),this.enableToTopButton(),this.tryFirstTrack(),this.tryToShowSignUpModal()},onRenderCallback:a.noop,getWrapperClassNames:function(){return A.classNames({wrapper:!0})},getRootClassNames:function(){return A.classNames({"content_right-only":!this.withFilters(),"search-filters-compact-activated":this.withFilters()&&!this.searchSettings.get("filterFull")})},updateBrowserHistory:function(){this.app.router.appNavigate(this.getCorrectUrl(),!1),this.app.history.write()},getCorrectUrl:function(){var e={};if(this.searchQuery.get("offset")>this.collection.availableCount){this.pagerModelApplyParams();var i=this.getPagerModelSchema();if(i.buttons.next.length>0&&i.buttons.next[0].href)return i.buttons.next[0].href}if(!t.browser&&(this.notFound||!this.isCorrectUrlQueryParams()))return this.app.makeUrl("404");if(this.isSearchByFileId()&&1===this.collection.length)return this.collection.first().get("url");if(this.app.store.get("FileViewModal")&&this.app.queryParams.qview&&(e.qview=this.app.store.get("FileViewModal").model.get("id")),E.useClearSearchUrls(this.searchQuery))return E.generateClearSearchUrl(this.app,this.searchQuery,{},{query:e});var s=this.searchInfo.get("relatedItem")?this.searchInfo.get("relatedItem").makeRelatedUrl(this.getUrlParams()):this.app.makeUrl(a.extend({route:this.name},this.getUrlParams()));return R.urlFormat(s,{query:e})},getPagerModelSchema:function(){return this.pagerModel.getSchema(this.searchQuery,this.searchAuthor,this.searchInfo)},getUrlParams:function(){return a.extend(a.clone(this.searchQuery.attributes),{offset:this.searchQuery.getOffsetByCount(this.collection.availableCount),seller:this.searchAuthor.get("id")||""})},isCorrectUrlQueryParams:function(){return(!this.app.queryParams.seller||!a.isEqual(a.omit(this.app.queryParams,["seller","offset"]),{photo:"1",vector:"1",video:"1"})||null!==this.searchAuthor.get("id"))&&!a.isEqual(a.omit(this.app.queryParams,"offset"),{category:"0"})},isSearchByFileId:function(){var e=this.searchQuery.get("query").trim();return/^\d+$/.test(e)&&parseInt(e,10)>1e6},setShowSignUpModalValue:function(e){B.setMaxValue(e)},setShowSignUpModalDelay:function(e){B.setDelay(e)},tryToShowSignUpModal:function(){!this.collection.length||this.app.user.isLoggedIn()||I.mobilePhone()||B.increment()},isCuratedCollectionsEnabled:function(){return this.app.features.isFeatureOnValue("Show curated collection")&&this.app.user.isEnterprise()},isSearchInDownloadsEnabled:function(){return this.app.features.isFeatureOnValue("Show search in downloaded")&&this.app.user.isEnterprise()},isSubFiltersEnabled:function(){return this.withFilters()&&(this.isCuratedCollectionsEnabled()||this.isSearchInDownloadsEnabled())},enabledFolderSearch:function(){return!1},generate404:function(){this.notFound=!0},onPageChange:function(e){window.scrollTo(0,0),this.searchQuery.secureSet("offset",(e.get("page")-1)*this.searchQuery.get("limit")),"next"===e.getDirection()&&this.app.observer.broadcast("Track:UE:Search:NextPage",{query:this.searchQuery.get("query"),view:"SearchResult"})},onSearchSettingsChange:function(e){this.searchSettings.secureSet(e)},removeFilterIndicators:function(e){this.searchQuery.resetToDefaults(e)},resetFilterIndicators:function(e,t){this.searchQuery.resetToDefaults(e,t)},pagerModelApplyParams:function(){this.pagerModel.applyParams({availableCount:this.collection.availableCount,count:this.collection.count,offset:this.searchQuery.get("offset"),limit:this.searchQuery.get("limit")})},initCache:function(){var e=this;D.isEnabled("Search",this.app)&&D.manager.setEngine("Search",{root:this,collection:new C,listenElement:this.collection,listenEvent:"sync",getQueryParams:function(){return e.collection.getQueryParams()},exportUrl:function(){return e.collection.url()}})},getBgColor:a.noop,makeMetaYandex:a.noop})}).call(this,i(4)(e),i(6))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports=function(e){var t='<div class="tooltip__custom tooltip__custom_justify">';return e.extendedMessage&&(t+="<p>"+this.tr("Use of this image in advertising or for promotional purposes is prohibited.")+"</p>"),t+=this.tr('<p>Any file downloaded from Depositphotos can be used for "editorial" purposes; the Standard License Agreement permits many uses for downloaded files, including for editorial use. Files downloaded under the Editorial Use Only license can be used only for non-commercial purposes.</p><p>For example, a file licensed for Editorial Use Only can be used to illustrate a news article on a blog or website, for purely descriptive purposes, in a non-commercial setting.</p><p class="d_last_tips_p">An Editorial Use Only file cannot be used in advertising or promotional material, or in any published work that involves the payment or receipt of a fee.</p>')+"</div>"}},,function(e,t,i){"use strict";e.exports=function(e){e.each(function(e,t){var i=t.getAttribute("data-preload");if(i){var s=t.cloneNode(!0);s.src=i,s.removeAttribute("style"),s.removeAttribute("data-preload"),s.addEventListener("load",function e(){t.parentNode.replaceChild(s,t),s.removeEventListener("load",e),s=null,t=null})}})}},function(e,t,i){"use strict";var s=i(0),a=i(2),o=i(478),r=i(480),l=i(479),n=i(130).filePublishedFormat,c=i(481),h=i(569),d=i(491);e.exports=o.extend({name:"FileInfo",el:!1,template:h,viewMode:"page",events:{"mouseenter ._editorial-tooltip":"toggleEditorialTooltip","mouseleave ._editorial-tooltip":"toggleEditorialTooltip","click ._portfolio":"onPortfolioClick","contextmenu ._portfolio":"onPortfolioCustomClick","mouseup ._portfolio":"onPortfolioCustomClick"},serialize:function(){return{isEnterpriseUser:this.app.user.isEnterprise(),file:s.clone(this.model.attributes),published:a.unix(this.model.get("published")).format(n),products:"page"===this.viewMode?this.app.user.serializeUserPlans():[],viewMode:this.viewMode,subscribeLink:this.app.makeUrl("subscribe",{backURL:!0,query:{ref:this.model.get("id")}}),portfolioLink:this.getPortfolioLink(),avatar:this.model.get("avatar")||this.app.user.avatar.constructor.prototype.defaults.default}},clientAfterRender:function(){this.model.get("editorial")&&this.setNotExistView("editorialTooltip",r,{params:l.ViewInfoEditorial,content:new o({el:!1,template:d})})},getPortfolioLink:function(){var e={};if("page"===this.viewMode)e.absolute=!0;else if(this.app.user.isEnterprise()&&this.app.store.get("SearchQuery")){var t=this.app.store.get("SearchQuery").getNonDefaults(["dataSource"]);s.has(t,"dataSource")&&(e.query={data_source:t.dataSource})}return this.app.makeUrl({route:"Search",seller:this.model.get("sellerId")},e)},toggleEditorialTooltip:function(e){this.getView("editorialTooltip").toggle(e)},onPortfolioClick:function(e){e.ctrlKey||e.shiftKey||e.metaKey?this.trackPortfolioNewTabClick(e):(e.preventDefault(),this.app.observer.broadcast("Track:UE:Portfolio:Click",{sellerId:this.model.get("sellerId")}),this.app.router.redirect(e.currentTarget.href))},onPortfolioCustomClick:function(e){[c.rightMouse,c.middleMouse].includes(e.which)&&this.trackPortfolioNewTabClick(e)},trackPortfolioNewTabClick:function(){this.app.observer.broadcast("Track:UE:ContextMenu:Open",{source:"Portfolio",target:{target:"search"},params:{sellerId:this.model.get("sellerId")}})},enabledCuratedCollection:s.noop})},,,,,function(e,t,i){"use strict";var s=i(0),a=i(574),o=i(572).base,r=i(62);e.exports=function(e,t,l){i(654),e.draggable(s.extend(o,{helper:function(){return t.getView("fileDraggableHelper")||t.setViews({fileDraggableHelper:new a(l.helperOptions)}),Backbone.$("<div></div>")},start:function(e,i){t.getView("fileDraggableHelper").active=!0,t.getView("fileDraggableHelper").setData(s.extend({},{model:l.helperOptions.getModel(e)},t.getView("fileDraggableHelper").getDefaults())).done(function(){return i.helper.append(t.getView("fileDraggableHelper").$el)})},drag:function(e,t){t.position.top>window.innerHeight+window.scrollY-t.helper.height()&&r.fire("Favorites:OpenPanel")},stop:function(e,i){i.helper.remove(),t.getView("fileDraggableHelper").active=!1}}))}},function(e,t,i){"use strict";var s=i(0),a=i(16),o=i(9),r=i(14);e.exports=o.extend({url:"Download",LEGACY_DOWNLOAD:!0,defaults:{itemId:null,size:null,source:"item",license:null,method:null,subscription:0,fileType:"image",resolution:"standart",splitCount:0,sizeMask:0,link:null,purchased:!1,"g-recaptcha-response":""},idAttribute:"link",initialize:function(){this.LEGACY_DOWNLOAD=this.LEGACY_DOWNLOAD&&"Legacy"===this.app.features.get("Download mode").get("value"),this.LEGACY_DOWNLOAD&&(this.url=this.app.makeUrl("cart/purchase"),this.getQueryParams=null,this.toJSON=this.getLegacyQuery)},getQueryParams:function(){return s.extend({},this.attributes)},parse:function(e){if(this.set("g-recaptcha-response",""),e.errors)return this.validationError=e.errors,this.trigger("invalid",this,e.errors,{validationError:e.errors}),{};var t=this.LEGACY_DOWNLOAD?e.data.link:e.downloadLink;return{link:r.urlFormat(s.extend(r.urlParse(t),{protocol:null}))}},requestLink:function(){this.attributes.link=null,this[this.LEGACY_DOWNLOAD?"saveData":"save"]()},saveData:function(e,t){void 0===e&&(e={}),void 0===t&&(t={}),t.data=this.toJSON(),t.emulateJSON=!0,t.emulateHTTP=!0,a.Model.prototype.save.call(this,e,t)},getLegacyQuery:function(){return s.extend(s.omit(this.attributes,"link"),{source:"view_item",id:this.get("itemId"),product:this.get("fileType"),split_count:this.get("splitCount"),subproduct:this.get("resolution")})}})},function(e,t,i){"use strict";var s=i(1)(i(3)),a=i(0),o=i(16).$,r=i(578),l=i(539),n=i(487),c=i(11).fileViewButtons,h=i(481);e.exports=r.extend({name:"FilesList",el:!1,autoScrollToStart:!1,events:{"click ._to-cart":"onCartClick","click ._to-favorites":"onFavoritesClick","click ._to-similar":"onSimilarClick","click ._cover":"onCoverClick","contextmenu .file-box":"onCustomFileClick","mouseup .file-box":"onCustomFileClick"},trackImpression:function(){this.collection.length&&this.$el.is(":visible")&&this.app.observer.broadcast("Track:UE:File:UserSeeFileThumb",{files:this.collection.toJSON(),relatedMode:this.relatedMode,view:this.name})},setFileEventsListeners:function(){var e=this;this.on("clientAfterRender",this.markFavorites),this.listenTo(this.app.observer,{"Favorites:PanelCacheUpdate":this.onFavoritesPanelCacheUpdate,"Cart:added":function(t){return e.markCart(!0,t.fileId)},"Cart:removed":function(t){return e.markCart(!1,t.fileId)},"Folder:AddCover":function(t){return e.markCover(!0,t.fileId)},"Folder:RemoveCover":function(){return e.markCover(!1)}})},getFileThumbID:function(e){return+o(e).parents("[data-id]").data("id")},onCartClick:function(e){e.stopPropagation(),e.preventDefault();var t=this.getFileModel(e.currentTarget);this.app.observer.broadcast(t.get("inCart")?"Track:UE:File:RemoveFromCart":"Track:UE:File:AddToCart",{id:t.get("id"),file:t.toJSON(),position:this.collection.indexOf(t),view:this.name}),this.app.observer.fire(t.get("inCart")?"Cart:remove":"Cart:add",{fileId:t.get("id")}),t.get("inCart")||this.app.user.isLoggedIn()||new n({app:this.app,title:this.tr("Add to Cart?"),subTitle:"video"===t.get("type")?this.tr('<span class="%s">Create your Account</span> to add this video to your Cart',"sub-text"):this.tr('<span class="%s">Create your Account</span> to add this image to your Cart',"sub-text")}).show()},onFavoritesClick:function(e){e.stopPropagation(),e.preventDefault();var t=this.getFileModel(e.currentTarget);this.app.observer.broadcast(t.get("inFavorites")?"Track:UE:File:RemoveFromFavorites":"Track:UE:File:AddToFavorites",{id:t.get("id"),file:t.toJSON(),position:this.collection.indexOf(t),view:this.name}),t.get("inFavorites")||this.app.store.link("FileForFavorite",t),this.app.observer.fire("Favorites:ToggleFile",{id:t.get("id")})},onSimilarClick:function(e){e.stopPropagation(),e.preventDefault();var t=this.getFileModel(e.currentTarget);this.app.observer.broadcast("Track:UE:File:ToSimilar",{file:t,position:this.collection.indexOf(t)+1});var i=t.makeRelatedUrl({relatedTo:"similar"});this.app.router.redirect(i)},onCoverClick:function(e){if(e.stopPropagation(),e.preventDefault(),this.$(e.currentTarget).hasClass("active"))this.app.observer.fire("Folder:RemoveCover");else{var t=this.getFileModel(e.currentTarget);this.coverCrop(t)}},trackNewTabClick:function(e,t){var i=this.$(e).closest("[data-id]").data("id"),a=this.collection.get(i);this.app.observer.broadcast("Track:UE:ContextMenu:Open",{source:"FileThumb",target:{target:"fileView",targetId:i},params:(0,s.default)(a&&a.toTracking()||{},t,{view:this.name})})},onCustomFileClick:function(e){[h.rightMouse,h.middleMouse].includes(e.which)&&this.trackNewTabClick(e.currentTarget)},onFavoritesPanelCacheUpdate:function(e){var t=e.folderId,i=e.options,s=void 0===i?{}:i,a=this.app.store.get("FolderCache"),o=this.app.store.get("Folder");if(a){var r=s.changes,l=s.refetch;if(this.collection.syncWithPanelCache&&o.get("id")===t){var n=r?r.added.map(function(e){return e.id}):[],c=r?r.removed.map(function(e){return e.id}):[];if(n.length&&l)return void this.collection.fetch();if(c.length)return void this.collection.remove(c)}this.markFavorites()}},markFavorites:function(){var e=this,t=this.app.store.get("FolderCache");t&&this.collection.each(function(i){var s=!!t.get(i.get("id")),o=s?"removeFavorites":"addToFavorites",r=a.findWhere(c,{key:o}).label;i.set({inFavorites:s});var l=e.$('[data-id="'+i.get("id")+'"]');l.find("._label-in-favorites").toggleClass("hidden",!s),l.find("._to-favorites").toggleClass("active",s).attr({title:r})})},markCart:function(e,t){var i=this,s=this.collection.where(function(e){return a.contains(t,e.get("id"))});a.each(s,function(t){t.set("inCart",e);var s=i.$("[data-id="+t.get("id")+"]");s.find("._label-in-cart").toggleClass("hidden",!e),s.find("._to-cart").toggleClass("active",e).attr({title:a.findWhere(c,{key:e?"removeFromCart":"addToCart"}).label})})},markCover:function(e,t){this.app.store.get("Folder")&&(this.$("._cover.active").removeClass("active"),e&&this.$("[data-id="+t+"] ._cover").addClass("active"))},coverCrop:function(e){new l({app:this.app,file:e,destroyOnHide:!0}).show()},getFileModel:function(e){return this.collection.get(this.getFileThumbID(e))}})},function(e,t,i){"use strict";var s=i(0),a=i(9).extend({url:"itemViewedInternal",getQueryParams:function(){return s.clone(this.attributes)}},{write:function(e,t){return new a(e,t).save()}});e.exports=a},function(e,t,i){"use strict";var s=i(1)(i(3)),a=i(0),o=i(478),r=i(23).capitalize,l=i(127),n=i(481);e.exports=o.extend({name:"FileViewTitle",el:!1,viewMode:"page",globals:{"resize window":"onWindowResize"},events:{"click ._title-file":"onTitleClick","contextmenu ._title-file":"onCustomTitleClick","mouseup ._title-file":"onCustomTitleClick"},serialize:function(){return{file:a.clone(this.model.attributes),capitalize:r}},clientAfterRender:function(){this.setTitleWidth()},setTitleWidth:function(){var e=this.$el.width();if(l.mobileTablets())this.$el.find("._title-name").css("max-width",e);else if("page"===this.viewMode)this.$el.find("._title-name").css("max-width",this.$el.width()-this.$el.find("._title-type").width()-this.$el.find("._title-sep").width()-2);else if("modal"===this.viewMode){var t=l.mobilePhone()?2:1.4,i=Math.floor(e/t);this.$el.find("._title-name").css("max-width",i),this.$el.find("._title-seller").css("max-width",e-i-this.$el.find("._title-sep").width())}},onWindowResize:function(){this.setTitleWidth()},trackNewTabClick:function(){this.app.observer.broadcast("Track:UE:ContextMenu:Open",{source:this.name,target:{target:"fileView",targetId:this.model.get("id")},params:(0,s.default)(this.model.toTracking(),{view:this.name})})},onTitleClick:function(e){"modal"===this.viewMode&&(e.ctrlKey||e.metaKey?this.trackNewTabClick():this.app.observer.broadcast("Track:UE:File:OpenFileView",{file:this.model,view:this.name}))},onCustomTitleClick:function(e){[n.rightMouse,n.middleMouse].includes(e.which)&&"modal"===this.viewMode&&this.trackNewTabClick(e.currentTarget)}})},function(e,t,i){"use strict";(function(t){var s=i(0),a=i(478),o=i(497),r=i(522),l=i(480),n=i(566),c=i(487),h=i(128),d=i(479),u=i(11).fileViewButtons,p=i(493),f=i(499),g=i(131),m=i(127),b=i(519),_=i(565),v=i(491),w=i(23).classNames,y=a.extend({name:"FileViewThumb",el:!1,insert:!0,template:_,viewMode:"page",preloadFileSize:"huge",player:null,dimensions:{},isCartBtnEnabled:!0,isFavoriteBtnEnabled:!0,showDownloadButtonInZoomMode:!1,maxHeight:null,events:{"click .button-zoom":"zoomIn","click ._zoom-image":"zoomIn","click ._to-cart":"onAddToCart","click ._to-favorites":"onFavoritesClick","click ._share":"onShareClick","click ._share-close":"onShareCloseClick","click ._share-button":"onShareButtonClick","click ._download_comp":"onDownloadCompClick","click ._file-box-description":"onFileBoxDescriptionClick","mouseenter ._editorial-tooltip":"toggleEditorialTooltip","mouseleave ._editorial-tooltip":"toggleEditorialTooltip"},globals:{"resize window":"onWindowResize"},initialize:function(){var e=this;t.browser&&(this.maxHeight=this.getThumbMaxHeight()),this.preloadFileSize=this.getThumbSize(),this.listenTo(this.app.observer,{"Cart:added":function(t){return e.markCart(!0,t.fileId)},"Cart:removed":function(t){return e.markCart(!1,t.fileId)},"Favorites:PanelCacheUpdate":this.markFavorites})},prepareRender:function(){this.model.generateSeoTitle();var e="huge";this.useBroadSize()&&!this.useHugeSize()?e="broad":"modal"===this.viewMode&&this.app.features.isFeatureOnValue("File View Modal Image Max Thumb")&&"video"!==this.model.get("type")&&(this.compactMode=m.desktopMedium(),e=this.compactMode?"huge":"modal"),this.dimensions.huge=g.getThumbSizes(this.model.serialize(),e)},serialize:function(){var e=this.getThumbSize();return{fileViewBoxClassNames:this.getFileViewBoxClassNames(),isEnterpriseUser:this.app.user.isEnterprise(),file:s.clone(this.model.attributes),dimensions:this.dimensions,thumb:{hasLabel:g.hasLabel(this.model.serialize(),e),src:this.model.get("thumbs")[e],preload:this.model.get("thumbs")[this.preloadFileSize],preloadMax:this.model.get("hasHugeImageThumb")||this.model.get("hasHugeVectorThumb")?this.model.get("thumbs").max:"",seo:this.model.get("thumbs").max,download:"video"===this.model.get("type")?this.getVideoThumb():this.model.get("thumbs").max},viewMode:this.viewMode,canDownloadComp:this.app.user.isLoggedIn(),actionsSmallMode:this.checkActionsSmallMode(),isCartBtnEnabled:!this.app.user.isEnterprise()&&this.isCartBtnEnabled,isFavoriteBtnEnabled:this.isFavoriteBtnEnabled,showVKSocial:"ru"===this.app.lang,hideDescription:!1,pushProportion:this.getPushProportion()}},getPushProportion:function(){return this.dimensions.huge.h/this.dimensions.huge.w*100+"%"},getFileViewBoxClassNames:function(){return w({"view-file-box_video":"video"===this.model.get("type"),"view-file-box_image":"video"!==this.model.get("type")})},clientAfterRender:function(){var e=this;"video"===this.model.get("type")&&this.enableVideoPlayer(),"modal"===this.viewMode&&this.model.get("editorial")&&this.initEditorialToolTip(),"video"!==this.model.get("type")&&p(this.$("._image")),f(this.$el,this,{helperOptions:{mode:"filePage",defaults:this.serialize.bind(this),getModel:function(){return s.clone(e.model.attributes)}}}),this.initSocial(),this.markFavorites()},cleanup:function(){this.getView("FilePreviewVideo")&&this.getView("FilePreviewVideo").remove()},getThumbSize:function(){var e="huge";return this.app.store.get("SearchSettings")&&(e=this.app.store.get("SearchSettings").get("layout")),(this.useMaxModalSize()||this.useBroadSize()&&!this.useHugeSize())&&(e="large"),this.useMaxSize()&&(e="max"),e},checkActionsSmallMode:function(){return this.dimensions.huge.h<=100},checkIfHugeVideo:function(){return this.model.get("hasHugeVideoThumb")},enableVideoPlayer:function(){this.setView("FilePreviewVideo",new o({app:this.app,$mount:this.$("._video-placeholder"),$poster:this.$("._video-poster"),file:this.model,blackBackground:"modal"===this.viewMode,viewMode:this.viewMode})).render()},getVideoThumb:function(){var e=this.model.getVideoThumbs("huge");return e.mp4||this.app.features.isFeatureOnValue("Is webm video thumb allowed")&&e.webm||e.ogg||this.model.get("thumbs").huge},getThumbMaxHeight:function(){return g.getThumbMaxHeight({width:this.model.get("width"),height:this.model.get("height"),viewMode:this.viewMode})},useBroadSize:function(){return"page"===this.viewMode&&this.app.features.isFeatureOnValue("File View Classic")&&this.app.features.isFeatureOnValue("Broad size file view")},useHugeSize:function(){return"page"===this.viewMode&&"video"===this.model.get("type")&&(this.app.features.isFeatureOnValue("Broad size file view")&&this.model.get("hasHugeVideoThumb"))},useMaxModalSize:function(){return"video"!==this.model.get("type")&&"modal"===this.viewMode&&this.app.features.isFeatureOnValue("File View Modal Image Max Thumb")},useMaxSize:function(){return"video"!==this.model.get("type")&&"page"===this.viewMode&&this.app.features.isFeatureOnValue("File View Classic")&&this.app.features.isFeatureOnValue("Max size file view")},zoomIn:function(e){e.stopPropagation(),e.preventDefault(),this.setView("ZoomModal",r.createInstance({placeholderSRC:this.model.get("hasHugeImageThumb")||this.model.get("hasHugeVectorThumb")?this.$("._zoom-image").attr("data-preload-max"):this.$("._zoom-image").attr("src"),file:this.model,app:this.app,showDownloadButton:this.showDownloadButtonInZoomMode,zoomCallback:this.zoomCallback,zoomShowCallback:this.zoomShowCallback,zoomHideCallback:this.zoomHideCallback,zoomNavCallback:this.zoomNavCallback,zoomLeftCallback:this.zoomLeftCallback,zoomRightCallback:this.zoomRightCallback})),this.getView("ZoomModal").show(),this.$("._zoom-image").removeAttr("data-preload-max")},onWindowResize:s.throttle(function(){var e=t.browser?m.desktopMedium():this.compactMode;e!==this.compactMode&&(this.compactMode=e)},10),onFavoritesClick:function(e){e.stopPropagation(),e.preventDefault(),this.app.observer.broadcast(this.model.get("inFavorites")?"Track:UE:File:RemoveFromFavorites":"Track:UE:File:AddToFavorites",{id:this.model.get("id"),file:this.model.toJSON(),position:0,view:this.name}),this.model.get("inFavorites")||this.app.store.link("FileForFavorite",this.model),this.app.observer.fire("Favorites:ToggleFile",{id:this.model.get("id")})},onAddToCart:function(e){e.stopPropagation(),e.preventDefault(),this.app.observer.broadcast(this.model.get("inCart")?"Track:UE:File:RemoveFromCart":"Track:UE:File:AddToCart",{id:this.model.get("id"),file:this.model.toJSON(),position:0,view:this.name}),this.app.observer.fire(this.model.get("inCart")?"Cart:remove":"Cart:add",{fileId:this.model.get("id")}),this.model.get("inCart")||this.app.user.isLoggedIn()||new c({app:this.app,title:this.tr("Add to Cart?"),subTitle:"video"===this.model.get("type")?this.tr('<span class="%s">Create your Account</span> to add this video to your Cart',"sub-text"):this.tr('<span class="%s">Create your Account</span> to add this image to your Cart',"sub-text")}).show()},onShareClick:function(){this.$("._file-box").addClass("view-file-box_share"),this.$("._share-box").addClass("view-file-box__share_active")},onShareCloseClick:function(){this.$("._file-box").removeClass("view-file-box_share"),this.$("._share-box").removeClass("view-file-box__share_active")},onDownloadCompClick:function(e){if(!this.app.user.isLoggedIn())return e.stopPropagation(),e.preventDefault(),void new n({app:this.app,message:"video"===this.model.get("type")?this.tr(h.NeedAuthToDownloadVideoMessage):this.tr(h.NeedAuthToDownloadImageMessage)}).show();this.app.observer.broadcast("Track:UE:File:CompDownload",{file:this.model,option:"comp"})},onFileBoxDescriptionClick:function(e){var t=this.$("._file-box-description");m.mobileMode()&&t.hasClass("view-file-box__description_short")&&(e.preventDefault(),e.stopPropagation(),t.removeClass("view-file-box__description_short"))},toggleEditorialTooltip:function(e){this.getView("editorialTooltip").toggle(e)},initEditorialToolTip:function(){this.setNotExistView("editorialTooltip",l,{params:d.ViewInfoEditorial,content:new a({el:!1,template:v,serialize:function(){return{extendedMessage:!0}}})})},initSocial:function(){var e={facebook:1,twitter:2,google:3,pinterest:4},t={facebook:!0,twitter:!0,google:!1,pinterest:!1};"ru"===this.app.lang&&(e.vk=5,t.vk=!1),this.initSocialButtons({shortenMap:t,socialNameMap:e,shareData:{title:this.model.get("title"),description:this.model.get("description"),image:this.model.get("thumbs").huge}})},markCart:function(e,t){s.contains(t,this.model.get("id"))&&(this.model.set({inCart:e}),this.$("._label-in-cart").toggleClass("hidden",!e),this.$("._to-cart").toggleClass("active",e).attr({title:s.findWhere(u,{key:e?"removeFromCart":"addToCart"}).label}))},markFavorites:function(){var e=this.app.store.get("FolderCache");if(e){var t=!!e.get(this.model.get("id")),i=t?"removeFavorites":"addToFavorites",a=s.findWhere(u,{key:i}).label;this.model.set({inFavorites:t}),this.$("._label-in-favorites").toggleClass("hidden",!t),this.$("._to-favorites").toggleClass("active",t).attr({title:a})}},zoomCallback:s.noop,zoomShowCallback:s.noop,zoomHideCallback:s.noop,zoomNavCallback:s.noop,zoomLeftCallback:s.noop,zoomRightCallback:s.noop});s.extend(y.prototype,b),e.exports=y}).call(this,i(6))},,,function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})});return'<h1 class="file-view__title"><a class="file-view__title-link file-view__title-file _title-file" href="'+e.file.url+'">'+s(e.capitalize(e.file.calculatedTitle))+"</a></h1>"}},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="file-view__info-wrapper hidden _related" data-tab="info"><div class="file-view__container"><div class="file-view__info"><div class="file-view__info-line"><span class="file-view__info-name">';return"video"===e.file.type?a+=""+this.tr("Clip ID"):"vector"===e.file.type?a+=""+this.tr("Vector ID"):e.file.editorial?a+=""+this.tr("Photography ID"):a+=""+this.tr("Image ID"),a+=':</span><span class="file-view__info-value"><a class="link-white" href="'+e.file.url+'">'+s(e.file.id)+'</a></span></div><div class="file-view__info-line"><span class="file-view__info-name">'+this.tr("Copyright")+':</span><span class="file-view__info-value"><a class="link-white _portfolio" href="'+e.portfolioLink+'"><span>'+s(e.file.sellerName)+"</span></a></span></div>","video"===e.file.type&&(a+='<div class="file-view__info-line"><span class="file-view__info-name">'+this.tr("Length")+':</span><span class="file-view__info-value">'+s(e.file.mp)+' s</span></div><div class="file-view__info-line"><span class="file-view__info-name">'+this.tr("Aspect Ratio")+':</span><span class="file-view__info-value">'+s(e.file.ar)+"</span></div>"),e.file.editorial&&(a+='<div class="file-view__info-line"><span class="file-view__info-name">'+this.tr("Release Information")+':</span><span class="file-view__info-value"><span class="file-view__info-editorial-title">'+this.tr("Editorial Use Only.")+'</span><span class="file-view__info-editorial">'+this.tr("Use of this image in advertising or for promotional purposes is prohibited.")+'<i class="file-view__info-help icon icon-help _editorial-tooltip"></i></span></span></div>'),e.file.limitedDistribution&&(a+='<div class="file-view__info-line"><span class="file-view__info-name">'+this.tr("Note")+':</span><span class="file-view__info-value">'+this.tr("Images by this contributor can be purchased for print media with a maximum circulation of 250,000 copies per publication.")+"</span></div>"),a+="</div></div></div>"}},function(e,t){e.exports=function(e){var t='<ul class="file-view__tabs view-tabs view-tabs_light">',i=e.scheme;if(i)for(var s,a=-1,o=i.length-1;a<o;)(s=i[a+=1]).enabled&&(t+='<li class="view-tabs__item _tab ',s.active&&(t+=" view-tabs__item_active"),t+='">'+this.tr(s.label)+"</li>");return t+="</ul>"}},function(e,t){e.exports=function(e){var t,i;return'<div class="file-view__bottom" style="opacity: '+("undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}))(e.opacity)+'"></div>'}},function(e,t,i){"use strict";var s=i(48);e.exports=s.extend({getEnabled:function(){return this.where({enabled:!0})},getActiveTab:function(){return this.findWhere({active:!0})},resetToFirstTab:function(){this.changeActiveTab(0)},changeActiveTab:function(e){this.getActiveTab()&&this.getActiveTab().set({active:!1},{silent:!0}),this.getEnabled()[e].set({active:!0})}})},function(e,t,i){"use strict";var s=i(0),a=i(16),o=i(478);e.exports=o.extend({name:"FileViewModalTabs",el:!1,events:{"click ._tab":function(e){e.stopPropagation(),this.changeActiveTab(Math.max(a.$(e.currentTarget).index(),0))}},initialize:function(){s.findWhere(this.scheme,{active:!0})||s.first(this.scheme.getEnabled()).set({active:!0}),this.listenTo(this.scheme,"change",this.render)},serialize:function(){return{scheme:this.scheme.toJSON()}},toTracking:function(){return this.scheme.filter(function(e){return e.get("enabled")})},changeActiveTab:function(e){this.scheme.changeActiveTab(e),this.changeTabCallback()},changeTabCallback:s.noop})},function(e,t,i){"use strict";var s=i(1)(i(3)),a=i(0),o=i(483),r=i(540),l=i(14),n=i(127),c=i(23),h=i(665).modal;e.exports=o.extend({name:"FileViewModal",single:!0,noBorder:!0,toCenter:!1,draggable:!1,destroyOnHide:!0,classes:{},canHideModal:!0,zoomModalEnabled:!0,fullScreenSizeReserve:h.fullScreenSizeReserve.fileView,displayNavigation:{left:!1,right:!1},events:(0,s.default)({},o.prototype.events,{"click .button-nav-left":"leftNavigation","click .button-nav-right":"rightNavigation","click ._overlay-close":"onOverlayCloseClick"}),prepareRender:function(){},serialize:function(){return this.classes={"file-view-modal_image-max-thumb":"video"!==this.model.get("type")&&this.app.features.isFeatureOnValue("File View Modal Image Max Thumb"),"file-view-modal_huge-video":this.model.get("hasHugeVideoThumb"),"file-view-modal_hidden":this.zoomModalEnabled},{file:this.model.serialize(),displayLeftNavigation:this.displayNavigation.left,displayRightNavigation:this.displayNavigation.right,classNames:c.classNames(this.classes)}},clientAfterRender:function(){this.trackModalShow(),this.zoomModalEnabled&&this.findView("FileViewThumb").$el.find("._zoom-image").trigger("click");for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];o.prototype.clientAfterRender.apply(this,t),this.isFullScreenMode()||this.tuneScroll(this.model.get("id"))},show:function(e){o.prototype.show.call(this,e),e.needToUpdateHistoryState&&this.updateHistoryState(e.model.get("id"),e.replaceState),this.app.history.write({route:"FileViewModal"})},hide:function(e){return this.updateHistoryState(null,!1),this.app.history.write({route:this.app.router.routeName}),o.prototype.hide.call(this,e)},leftNavigation:function(e){e.stopPropagation(),this.onLeftNavigation()},rightNavigation:function(e){e.stopPropagation(),this.onRightNavigation()},onOverlayCloseClick:function(e){e.target===e.currentTarget&&this.gradualHide(e)},toggleNavigation:function(e,t){this.displayNavigation[e]=t},updateHistoryState:function(e,t){if(history&&history.pushState&&parseInt(this.app.queryParams.qview,10)!==e){var i=l.urlFormat(l.urlParse(this.app.url).path,{query:{qview:e||null}});this.app.router.appNavigate(i,t)}},getMobileMode:function(){return n.mobileMode()||n.searchModalInMobileMode()},fullScreenMode:function(){},setCenterPosition:function(){},updateSizes:function(){},centering:function(){},getContainerHeight:function(e){return this.$(a.isUndefined(e)?"._file-view-container":e).outerHeight()},setModalHeight:function(e){this.$el.height(this.getContainerHeight(e))},zoomShowCallback:function(){this.zoomModalEnabled=!0},zoomHideCallback:function(){this.zoomModalEnabled=!1,this.$el.find("._modal").removeClass("file-view-modal_hidden");var e=r.getModal(this.cid);e&&e.config.className.indexOf("hidden")>-1&&(e.config.className=e.config.className.replace("hidden","")),this.canHideModal?this.hide():this.app.observer.broadcast("Track:UE:FileViewModal:Ready",{file:this.model,view:this.name,source:{source:"closeZoom",action:"click",pagetype:"zoom"}})},zoomNavCallback:function(){return{left:this.displayNavigation.left,right:this.displayNavigation.right}},zoomLeftCallback:function(){this.onLeftNavigation()},zoomRightCallback:function(){this.onRightNavigation()},onTouchStart:function(e){this.$el.removeClass("file-view-modal_animate"),this.touch={startPositionX:e.originalEvent.touches[0].pageX,startPositionY:e.originalEvent.touches[0].pageY,endPositionX:e.originalEvent.touches[0].pageX,endPositionY:e.originalEvent.touches[0].pageY,startLeft:0,curLeft:0,startTime:Date.now(),isChecked:!1,lock:!1}},onTouchMove:function(e){this.touch.endPositionX=e.originalEvent.touches[0].pageX,this.touch.endPositionY=e.originalEvent.touches[0].pageY;var t=Math.abs(this.touch.startPositionX-this.touch.endPositionX),i=Math.abs(this.touch.startPositionY-this.touch.endPositionY);!this.touch.isChecked&&i>t&&(this.touch.lock=!0),this.touch.isChecked=!0,this.touch.lock||(this.touch.curLeft=this.touch.startLeft+(this.touch.endPositionX-this.touch.startPositionX),this.setLeftPosition(this.touch.curLeft,!1))},onTouchEnd:function(e){if(this.touch.lock)return!1;var t=this.$el.width();return Math.round(this.touch.curLeft/t)||Date.now()-this.touch.startTime<=250?this.displayNavigation.left&&this.touch.startPositionX<this.touch.endPositionX?(this.onLeftNavigation(),this.setLeftPosition(t)):this.displayNavigation.right&&this.touch.startPositionX>this.touch.endPositionX?(this.onRightNavigation(),this.setLeftPosition(-t)):this.setLeftPosition(0):this.setLeftPosition(0),!0},setLeftPosition:function(e,t){void 0===t&&(t=!0),t&&this.$el.addClass("file-view-modal_animate"),this.$el.css("transform","translateX("+e+"px)")},onAfterHideCallback:function(){this.cleanup()},tuneScroll:function(){},trackModalShow:function(){},onLeftNavigation:function(){},onRightNavigation:function(){}})},,,,,,function(e,t,i){"use strict";var s=i(14),a=i(40);e.exports={initSocialButtons:function(e){var t=this,i=this.app.user.isLoggedIn()?"-"+this.convertBaseNumber(this.app.user.get("id")):"";this.$("._share-button").each(function(s,a){var o=a.getAttribute("data-social"),r=t.getCustomSocialRedirectUrl({socialSuffix:e.socialNameMap[o],isShortenUrl:e.shortenMap[o],refId:i});switch(o){case"facebook":a.href=t.app.makeUrl("facebookSharer",{query:{u:r,title:e.shareData.title,caption:t.app.host,picture:e.shareData.image,description:e.shareData.description}});break;case"twitter":a.href=t.app.makeUrl("twitterSharer",{query:{url:r,via:"depositphotos",text:e.shareData.title+" #stock #photo"}});break;case"google":a.href=t.app.makeUrl("googleSharer",{query:{url:r}});break;case"pinterest":a.href=t.app.makeUrl("pinterestSharer",{query:{url:r,media:e.shareData.image,description:e.shareData.title}});break;case"vk":a.href=t.app.makeUrl("vkSharer",{query:{url:r,image:e.shareData.image,title:e.shareData.title,description:e.shareData.description}});break;default:a.href=""}})},convertBaseNumber:function(e){return parseInt(e,10).toString(36)},getCustomSocialRedirectUrl:function(e){return this.getSocialRedirectUrl?this.getSocialRedirectUrl(e):this.getDefaultSocialRedirectUrl(e)},getDefaultSocialRedirectUrl:function(e){var t=this.convertBaseNumber(""+e.socialSuffix+this.model.get("id"));return s.urlFormat({protocol:e.isShortenUrl?"http:":this.app.parsedUrl.protocol,host:e.isShortenUrl?a.hostnameShorthand:this.app.host,pathname:"/v/"+t+e.refId})},onShareButtonClick:function(e){e.preventDefault(),e.stopPropagation();var t=e.currentTarget,i=e.currentTarget.getAttribute("data-width"),s=e.currentTarget.getAttribute("data-height"),a="\n\t\t\ttop="+(screen.height/2-s/2).toFixed(0)+",left="+(screen.width/2-i/2).toFixed(0)+",width="+i+",height="+s+",resizable=yes,\n\t\t\tscrollbars=no,status=yes,location=no";window.open("about:blank",t.getAttribute("data-title"),a).location.href=t.href}}},function(e,t,i){"use strict";var s=i(543),a=i(560),o=i(521);e.exports={sendFiles:function(e,t,i,a){void 0===t&&(t=[]),void 0===i&&(i="transaction"),void 0===a&&(a={}),a.showModal&&this.showModal(e);var o=new s({transactions:t,type:i},{app:e});a.errorCallback&&o.on("error",function(e,t){return a.errorCallback(t.errors)}),a.onSuccess&&o.on("sync",function(e,t){return a.onSuccess(t)}),o.save()},singleDownload:function(e,t){o.downloadByUrl({app:e,link:t})},showModal:function(e){new a({app:e}).show()}}},,function(e,t,i){"use strict";var s=i(1)(i(3)),a=i(0),o=i(483),r=i(497),l=i(540),n=i(131),c=i(127),h=i(493),d=i(567),u=o.extend({name:"ZoomModal",template:d,file:null,noBorder:!0,draggable:!1,fullScreen:!1,overlayConfig:{className:"overlay_bg-dark",closeButton:!0},reserve:{mobile:{width:24,height:18},desktop:{width:50,height:90}},modalClasses:"",dimensions:{},placeholderSRC:null,showDownloadButton:!1,events:(0,s.default)({},o.prototype.events,{click:"onCloseClick","click ._opacity-switcher":"onOpacitySwitcherClick","click ._download":"onDownloadClick","click ._zoom-prev":"onZoomPrev","click ._zoom-next":"onZoomNext"}),getDimensionsSize:function(){return"video"!==this.file.get("type")?"max":"huge"},getSeoAlt:function(){var e="image"===this.file.get("type")?this.tr("Stock Photo"):this.tr("Stock Illustration");return this.file.get("title")+" — "+e},prepareRender:function(){this.id=this.file.get("id"),this.seoAlt=this.getSeoAlt(),this.seoTitle=this.file.get("seoTitle"),this.dimensions=n.getThumbSizes(this.file.serialize(),this.getDimensionsSize()),this.file&&"video"===this.file.get("type")?this.setView("._body",new r({app:this.app,controls:!1,file:this.file,width:this.dimensions.w,height:this.dimensions.h,blackBackground:!0})):this.views["._body"]&&this.views["._body"].remove()},serialize:function(){return{file:{seoAlt:this.seoAlt,seoTitle:this.seoTitle,src:this.makePlaceholderSRC(),preload:this.makeZoomSRC()},navigation:this.zoomNavCallback()||{},modalClasses:this.modalClasses,dimensions:this.dimensions,showDownloadButton:this.showDownloadButton,opacity:[]}},makePlaceholderSRC:function(){return this.placeholderSRC?this.placeholderSRC:this.file.get("thumbs")[this.isHugeImageVectorThumb()?"max":"huge"]},makeZoomSRC:function(){return"video"!==this.file.get("type")?this.file.get("thumbs").max:this.file.get("thumbs").huge},show:function(){if(c.canShowZoomModal()){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];o.prototype.show.apply(this,t)}},hide:function(){l.isLocked=!1,this.zoomHideCallback();for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];o.prototype.hide.apply(this,t),this.remove()},clientAfterRender:function(){h(this.$("img.modal__zoom-image")),this.zoomShowCallback(),l.isLocked=!0;for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];o.prototype.clientAfterRender.apply(this,t),this.setModalSize(),a.isArray(this.overlayConfig.opacity)&&l.changeOpacity(a.findWhere(this.overlayConfig.opacity,{active:!0}).value/100),this.app.user.isLoggedIn()||this.app.observer.broadcast("Track:UE:ZoomModal:DownloadShow",{id:this.id}),this.app.observer.broadcast("Track:UE:Zoom:Show",{file:this.file})},observeHideAll:function(){this.$el.remove()},onOpacitySwitcherClick:function(e){if(e.stopPropagation(),a.isArray(this.overlayConfig.opacity)){var t=this.overlayConfig.opacity[Backbone.$(e.currentTarget).index()].value;this.app.userSettings.set({zoomModalOverlay:t}),l.changeOpacity(t/100),this.$("._opacity-switcher").removeClass("bg-selector__handler_active"),Backbone.$(e.currentTarget).addClass("bg-selector__handler_active")}},onWindowResize:function(){c.canShowZoomModal()?this.setModalSize():this.hide()},onDownloadClick:function(e){e.stopPropagation(),this.app.observer.broadcast("Track:UE:ZoomModal:DownloadClick",{id:this.id}),this.app.observer.broadcast("Track:UE:Zoom:Click",{type:"Download"}),this.zoomCallback(e)},onZoomPrev:function(e){e.stopPropagation(),this.app.observer.broadcast("Track:UE:Zoom:Click",{type:"Prev",file:this.file}),this.zoomLeftCallback()},onZoomNext:function(e){e.stopPropagation(),this.app.observer.broadcast("Track:UE:Zoom:Click",{type:"Next",file:this.file}),this.zoomRightCallback()},getReserve:function(e){return c.mobileMode()?this.reserve.mobile[e]:this.reserve.desktop[e]},setModalSize:function(){var e=this.dimensions.w+this.getReserve("width"),t=this.dimensions.h+this.getReserve("height"),i=this.dimensions.w,s=this.dimensions.h;if(e>window.innerWidth||t>window.innerHeight){var a=window.innerWidth-this.getReserve("width"),o=Math.floor(a*this.dimensions.h/this.dimensions.w),r=window.innerHeight-this.getReserve("height"),l=Math.floor(r*this.dimensions.w/this.dimensions.h);a+this.getReserve("width")<=window.innerWidth&&o+this.getReserve("height")<=window.innerHeight?(i=a,s=o):(i=l,s=r)}if(!(i<=this.getReserve("width")||s<=this.getReserve("height"))){if(this.isHugeImageVectorThumb()){var n=Math.ceil(100/(this.dimensions.h/s));this.$("._body").width(i).height(s-n)}else this.$("._body").width(i).height(s);this.$("._wrap").width(i).height(s),this.$el.toggleClass("modal-zoom-compact",window.innerWidth-i<=200),this.$("._caption").width(i),this.centering()}},isHugeImageVectorThumb:function(){return this.file.get("hasHugeImageThumb")||this.file.get("hasHugeVectorThumb")},fullScreenMode:function(){},zoomCallback:function(){},zoomShowCallback:function(){},zoomHideCallback:function(){},zoomNavCallback:function(){},zoomLeftCallback:function(){},zoomRightCallback:function(){}},{createInstance:function(e){return new u((0,s.default)({modalClasses:e.file.get("hasHugeImageThumb")||e.file.get("hasHugeVectorThumb")?"modal_zoom-huge":""},e))}});e.exports=u},,function(e,t,i){"use strict";var s=i(1)(i(3)),a=i(0),o=i(486),r=i(482),l=i(478),n=i(564),c=i(562),h=i(561),d=i(488),u=i(484),p=i(23).classNames,f=i(496),g=i(520),m=i(481),b=i(128),_=i(11).licensingFileTypes,v=i(556),w=l.extend({name:"LicenseWizard",el:!1,template:v,errorTitlesMap:{17001:b.InsufficientFundsTitle},errorMessagesMap:{17001:b.InsufficientFundsMessage},events:{"input  ._field":"onFormFieldChange","change ._license":"onLicenseAndSizeChange","change ._size":"onLicenseAndSizeChange","keypress input":"onInputKeyPress","keyup ._field":"onFieldKeyUp","submit form":"onFormSubmit","click ._submit":"onSubmitClick","click ._submit-download":"onSubmitAndDownloadClick","click ._option-checkbox":"onOptionCheck"},files:[],splitData:{},splitTypes:["image","vector","video"],splitTypesLables:[],typedConfigFileSizes:{},availableLicenses:{},downloadAfterLicensing:!1,initialize:function(){this.collection=new h(this.files,{parse:!0,app:this.app}),this.model=new c,this.listenTo(this.model,"error",this.onModelError),this.purgeSplitData(),this.fillSplitData(),this.applyDefaultLicenses(),this.applyDefaultSizes()},beforeRender:function(){this.setTotalView(),this.applyIncludedOptions()},setTotalView:function(){var e=this;this.showTotal()&&this.setView("._total",new l({getTotalPrice:function(){return e.getTotalPrice()},template:function(){return'<h2 class="license-wizard__title-price">'+this.tr("Total")+this.tr(":")+" "+this.getTotalPrice()+"</h2>"}}))},showTotal:function(){return this.collection.length>1||this.isOptionsVisible()},serialize:function(){var e=this.collection.slice(0,5).reverse().map(function(e){return e.toJSON()}),t={};_.forEach(function(e){return t[e.key]=e.label});var i={"images-fan_has-more":e.length>5};return i["images-fan_counts-"+e.length]=e.length<=5,{files:e,licensingFileTypes:t,splitTypes:this.splitTypes,classNames:p(i),maxFilesListCount:5,licensingParams:this.model.serialize(),availableLicenses:this.availableLicenses,availableSizes:this.getAllAvailableSizesForLicensing(),fields:a.map(this.app.user.serializeUserLicenseFields({enabled:!0}),function(e){return a.extend({},e,{placeholder:e.placeholder})}),showTotal:this.showTotal(),ableToLicense:this.isAbleToLicense(),vatRate:+this.app.user.get("enterprise").vatRate,vatEnabled:this.app.user.get("enterprise").vatEnabled,downloadBtnText:this.files.length>1?this.tr("Confirm & Bulk Download"):this.tr("Confirm & Download"),isOptionsVisible:this.isOptionsVisible(),options:this.getOptionsSchema()}},getTotalPrice:function(){return this.app.currencies.get(this.app.user.get("enterprise").currencyId).format(this.calculateTotal())},isOptionsVisible:function(){return a.some(this.getOptionsSchema(),function(e){return e.length>0})},applyIncludedOptions:function(){var e=this;a.each(this.model.get("licensing").models,function(t){t.set({optionsBitMask:null});var i=e.getOptionsSchema()[t.get("type")];if(i){var s=e.model.get("licensing").findWhere({type:t.get("type")});a.each(i,function(e){0!==e.total&&!0!==e.selected||s.set({optionsBitMask:s.get("optionsBitMask")|e.bit})})}})},getOptionsSchema:function(){var e=this,t={};return a.each(this.model.get("licensing").models,function(i){var s=e.app.config.prices.sizes[i.get("size")],o=a.findWhere(e.app.user.get("enterprise").licenses,{id:i.get("licenseId")});if(o){var r=a.find(o.prices,function(e){return e.fileSizes&s}).options,l=e.processOptions(r,i.get("type"));t[i.get("type")]=e.formatOptions(l)}}),t},processOptions:function(e,t){var i=this,s=this.collection.where({type:t}),o=this.model.get("licensing").findWhere({type:t}).get("size"),r=this.app.config.prices.sizes[o],l=a.map(e,function(e){return a.extend({},e,{total:0})});return a.each(s,function(t){var s=a.find(t.get("exclusivePrice"),function(e){return e.fileSizes&r});if(s){var o=i.mergeOptions(e,s.options);a.each(l,function(e){var t=a.findWhere(o,{bit:e.bit});e.total+=t.price,t.price<0&&(e.disabled=!0)})}else a.each(l,function(t){t.total+=a.findWhere(e,{bit:t.bit}).price})}),a.reject(l,function(e){return e.disabled})},mergeOptions:function(e,t){return a.map(e,function(e){return a.extend({},e,a.findWhere(t,{bit:e.bit}))})},formatOptions:function(e){var t=this;return a.map(e,function(e){return a.extend({},e,{name:t.tr(e.name),totalFormatted:t.app.currencies.get(t.app.user.get("enterprise").currencyId).format(parseFloat(e.total))})})},clientAfterRender:function(){u(this.$el,Backbone.$),d(this.$("._buttons"),{color:"#fff"}),o.initialize(this.$("._scroll").get(0),{suppressScrollX:!0,wheelSpeed:.6})},onOptionCheck:function(e){var t,i=e.currentTarget.checked,s=e.currentTarget.getAttribute("data-type"),a=+e.currentTarget.getAttribute("data-bit"),o=this.model.get("licensing").findWhere({type:s});t=i?o.get("optionsBitMask")|a:o.get("optionsBitMask")^a,o.set({optionsBitMask:t}),this.getView("._total").render()},onFormFieldChange:function(e){this.model.set(e.currentTarget.name,e.currentTarget.value)},onLicenseAndSizeChange:function(e){var t=e.currentTarget.name,i="licenseId"===t?+e.currentTarget.value:e.currentTarget.value;this.model.get("licensing").findWhere({type:e.currentTarget.getAttribute("data-type")}).set(t,i),"licenseId"===t&&this.applyDefaultSizes(e.currentTarget.dataset.type),this.render()},onInputKeyPress:function(e){(e.which||e.keyCode)===m.enter&&(e.preventDefault(),e.stopPropagation(),this.onSubmitAndDownloadClick())},onFieldKeyUp:function(e){e.stopPropagation()},onFormSubmit:function(e){e.preventDefault()},onSubmitClick:function(){this.$("._buttons").trigger("loading"),this.purchase()},onSubmitAndDownloadClick:function(){this.downloadAfterLicensing=!0,this.onSubmitClick()},purgeSplitData:function(){this.splitData={},this.splitTypesLables=[],this.typedConfigFileSizes={},this.availableLicenses={}},fillSplitData:function(){var e=this;this.splitTypes.forEach(function(t){var i=e.collection.where({type:t});i.length&&(e.splitData[t]=i.map(function(e){return e.id}),e.model.get("licensing").add({fileIds:e.splitData[t],type:t}),e.availableLicenses[t]=e.getAvailableLicensesForType(t),e.typedConfigFileSizes[t]=e.getSizesIntersection(t))})},getAvailableLicensesForType:function(e){var t=this.getLicensesIntersection(e);return this.filterLicensesByUser(t)},getLicensesIntersection:function(e){var t=this,i={};return this.collection.each(function(s){s.get("type")===e&&t.getAvailableLicensesForFile(s).forEach(function(e){var t=e.name+" "+e.model;i[t]=i[t]||{data:e,count:0},i[t].count++})}),a.chain(i).where({count:this.collection.where({type:e}).length}).map(function(e){return e.data}).value()},filterLicensesByUser:function(e){var t=this.app.user.getUserType();if("enterprise"===t)return a.filter(e,function(e){return"enterprise"===e.model});if("premiumEnterprise"===t){var i=a.filter(e,function(e){return"enterprise"===e.model});return i.length?i:a.filter(e,function(e){return"premium"===e.model})}return"premium"===t?a.filter(e,function(e){return"premium"===e.model}):e},getSizesIntersection:function(e){var t=this,i={};return this.collection.each(function(s){s&&s.get("type")===e&&s.getSizes().forEach(function(e){i[e.name]=i[e.name]||{data:e,count:0},i[e.name].count++,t.collection.length>1&&-1!==i[e.name].data.label.search("&times;")&&(i[e.name].data.label="")})}),a.where(i,{count:this.collection.where({type:e}).length}).map(function(e){return e.data})},applyDefaultLicenses:function(){var e=this;this.splitTypes.forEach(function(t){({}).hasOwnProperty.call(e.availableLicenses,t)&&e.availableLicenses[t].length&&e.model.get("licensing").findWhere({type:t}).set({licenseId:a.first(e.availableLicenses[t]).id})})},applyDefaultSizes:function(e){e?this.updateDefaultSizes(e):this.splitTypes.forEach(this.updateDefaultSizes.bind(this))},updateDefaultSizes:function(e){var t=this.getAvailableSizesForLicensing(e);t&&this.model.get("licensing").findWhere({type:e}).set({size:a.first(t).size})},getAvailableLicensesForFile:function(e){var t=this;return a.chain(this.getLicensesByFilePermissions(e)).filter(function(i){return t.getFullLicenseSizeMask(i)&e.get("sizeMask")}).value()},getLicensesByFilePermissions:function(e){return this.isFileExclusivelyRegular(e)?a.filter(this.app.user.serializeUserLicenses(),function(e){return"enterprise"===e.model}):a.filter(this.app.user.serializeUserLicenses(),function(t){return e.get("permissions")[t.model]})},isFileExclusivelyRegular:function(e){return!0===e.get("permissions").regular&&1===a.compact(e.get("permissions")).length},getFullLicenseSizeMask:function(e){return e?a.chain(e.prices).pluck("fileSizes").reduce(function(e,t){return e|t}).value():0},getAllAvailableSizesForLicensing:function(){var e=this,t={};return this.splitTypes.forEach(function(i){return t[i]=e.getAvailableSizesForLicensing(i)}),t},isAbleToLicense:function(){var e=this;return this.splitTypes.some(function(t){return e.availableLicenses[t]&&e.availableLicenses[t].length&&e.getAllAvailableSizesForLicensing()[t].length})},getAvailableSizesForLicensing:function(e){var t,i=this,s=this.model.get("licensing").findWhere({type:e});return s&&(t=a.findWhere(this.availableLicenses[e],{id:s.get("licenseId")})),t?a.filter(this.typedConfigFileSizes[e],function(s){var o=!1;return a.each(t.prices,function(t){i.app.config.prices.sizes[s.size]&t.fileSizes&&(s.cost=i.getCustomPrice(e,s)||t.cost,s.costWithCurrency=i.showCurrencyForCost(e)?i.app.currencies.get(i.app.user.get("enterprise").currencyId).format(s.cost):null,o=i.isSizeEnabled(e,s))},i),o}):null},isSizeEnabled:function(e,t){var i=this.collection.where({type:e}),s=this.app.config.prices.sizes[t.size],o=!0;return a.each(i,function(e){if(e.get("exclusivePrice").length){var t=a.find(e.get("exclusivePrice"),function(e){return e.fileSizes&s});t&&t.cost<0&&(o=!1)}}),o},showCurrencyForCost:function(e){var t=this.collection.where({type:e});return t.length<2||!this.isCollectionHasExclusivePrices(t)},isCollectionHasExclusivePrices:function(e){return a.some(e,function(e){return e.get("exclusivePrice").length})},getCustomPrice:function(e,t){var i=this.collection.where({type:e}),s=this.app.config.prices.sizes[t.size];if(i.length>1)return!1;var o=a.find(i[0].get("exclusivePrice"),function(e){return e.fileSizes&s});return!!(o&&o.cost&&this.isCustomPriceAllowed(e))&&o.cost},isCustomPriceAllowed:function(e){var t=this.model.get("licensing").findWhere({type:e}).get("licenseId");return"premium"===a.findWhere(this.app.user.get("enterprise").licenses,{id:t}).model},onGeneralError:function(e){var t=e[0];17001===t.error_code?this.app.router.redirect(this.app.makeUrl("subscribe/billing",{backURL:!0,query:{product:"account"}})):63002===t.error_code?this.app.router.redirect(this.app.makeUrl("login",{protocol:"https",backURL:!0})):this.showError(t.error_code,t.error_message)},showError:function(e,t){var i=this,s=this.errorTitlesMap[e]?this.errorTitlesMap[t]:b.ServiceModalTitle,a=this.errorMessagesMap[e]?this.errorMessagesMap[t]:t;this.insertView("ServiceModal",new r({app:this.app,title:s,message:a,onHideCallback:function(){i.getView("ServiceModal")&&i.getView("ServiceModal").remove()}})).show()},showSummary:function(e,t){var i=this;void 0===e&&(e=[]),void 0===t&&(t=[]);var s=this.app.user.get("firstName")&&this.app.user.get("lastName")?this.app.user.get("firstName")+" "+this.app.user.get("lastName"):this.app.user.get("username");this.insertView("ServiceModal",new r({app:this.app,title:b.ServiceModalTitle,body:function(){return new n({data:{username:s,filesOk:e.length?e.map(function(e){return"#"+e.id}).join(", "):null,filesFail:t.length?t.map(function(e){return"#"+e.id}).join(", "):null,filesOkAmount:e.length,filesFailAmount:t.length}})},onHideCallback:function(){i.getView("ServiceModal")&&i.getView("ServiceModal").remove()}})).show()},purchase:function(){this.model.save({},{success:this.onLicenseSuccess.bind(this)})},onModelError:function(e,t){t.errors.length&&this.onGeneralError(t.errors)},parseLicensingResult:function(e){var t=[],i=[];return a.each(e,function(e){"success"===e.result?t.push({id:e.fileId,link:e.downloadLink,transaction:e.transaction[0]}):i.push({id:e.fileId})}),[t,i]},handleLicensingResult:function(e,t){e.length&&!t.length?this.app.observer.fire("Notification",{type:"success",description:b.SuccessfullyLicensed}):this.showSummary(e,t)},handleLicensingResultAndDownload:function(e,t){1===this.files.length?e.length?g.singleDownload(this.app,a.first(e).link):this.app.observer.fire("Notification",{type:"error"}):g.sendFiles(this.app,e.map(function(e){return e.transaction.transactionId}),"transaction",{showModal:!0,errorCallback:this.onGeneralError.bind(this)})},onLicenseSuccess:function(e,t){if(this.$("._buttons").trigger("loaded"),"success"===t.status){this.app.user.fetch();var i=this.parseLicensingResult(t.result),s=i[0],a=i[1];this.downloadAfterLicensing?this.handleLicensingResultAndDownload(s,a):this.handleLicensingResult(s,a),this.trackSuccessLicense(e,s),this.onLicenseSuccessCallback(s,this.collection.serialize(),e.serialize(),this.downloadAfterLicensing)}},calculateTotal:function(){var e=this,t=0;return this.model.get("licensing").each(function(i){var s=a.findWhere(e.typedConfigFileSizes[i.get("type")],{size:i.get("size")});if(s){var o=e.collection.where({type:i.get("type")});a.each(o,function(i){var a=e.getFileExclusiveOptions(i,s);a&&a.cost?t+=+a.cost:t+=+s.cost});var r=a.filter(e.getOptionsSchema()[i.get("type")],function(e){return e.bit&i.get("optionsBitMask")});a.each(r,function(e){t+=e.total})}}),t},getFileExclusiveOptions:function(e,t){var i=this.getAvailableLicensesForType(e.get("type"))[0].model,s=this.app.config.prices.sizes[t.size];return"premium"===i?a.find(e.get("exclusivePrice"),function(e){return e.fileSizes&s}):null},trackSuccessLicense:function(e,t){var i=this;void 0===t&&(t=[]);var a={id:"",size:"",route:this.app.router.routeName,cost_type:"enterprise",view:this.name},o=e.get("licensing");t.forEach(function(e){var t=o.findWhere({licenseId:e.transaction.license});i.app.observer.broadcast("Track:UE:File:License",(0,s.default)(a,{id:e.id,size:t.get("size"),file:i.collection.get(e.id)}))})},onLicenseSuccessCallback:a.noop});a.extend(w.prototype,f),e.exports=w},function(e,t,i){"use strict";var s=i(0),a=i(480),o=i(479).PreviewFiles,r=i(577),l=i(497),n=i(127);e.exports=a.extend({name:"FilePreviewTooltip",insert:!0,initialize:function(){return a.prototype.initialize.apply(this,[{params:o}])},cleanup:function(){this.content&&this.content.remove()},show:function(e,t){if(n.canShowPreviewTooltips())return"video"===t.contentData.file.get("type")?this.makeVideoPreview(t):this.makeImagePreview(t),a.prototype.show.apply(this,arguments)},makeImagePreview:function(e){this.content=new r(s.extend(s.pick(e.contentData,"file","layout"),{app:this.app}))},makeVideoPreview:function(e){this.content=new l({template:i(575),file:e.contentData.file,controls:!1,muted:!0,viewMode:"tooltip",app:this.app})}})},function(e,t,i){"use strict";var s=i(1)(i(3)),a=i(16).$,o=i(501),r=i(487),l=i(598),n=i(63),c=i(127),h=["Search","Folder","CustomFolder"],d=o.extend({name:"fileList",events:(0,s.default)({},o.prototype.events,{"click .file-box":"onFileClick"}),globals:{keyup:"onKeyUpModal"},onFileClick:function(e){if(e.preventDefault(),e.stopPropagation(),!this.tryShowSignUpModal()){var t=a(e.currentTarget).closest("[data-id]"),i=t.data("id"),s=this.collection.get(i),o=a(e.target).hasClass("_zoom");s&&this.app.observer.broadcast("Track:UE:File:ThumbClick",{id:i,file:s,index:t.index(),query:this.app.store.get("SearchQuery").get("query"),sorting:this.app.store.get("SearchQuery").toTracking("sorting"),view:this.name}),o&&this.app.observer.broadcast("Track:UE:Zoom:Click",{type:"FastZoom",file:s,view:this.name}),this.canHideModal=o,this.zoomModalEnabled=o,this.showDownloadButtonInZoomMode=o,this.showFileViewModal(i)}},getTrackingInfo:function(){return{callingView:this.name}},tryShowSignUpModal:function(){var e=1===parseInt(n.get("signUpFileShown"),10);return!(!h.includes(this.app.router.routeName)||!this.app.features.isFeatureOnValue("Sign Up Modal instead of File View Modal")||e||this.app.user.isLoggedIn()||c.mobilePhone())&&(new r({app:this.app}).show(),n.set("signUpFileShown",1,{expires:365}),this.app.observer.broadcast("Track:UE:SignUp:ModalShow",{label:1}),!0)}});(0,s.default)(d.prototype,l),e.exports=d},function(e,t,i){"use strict";var s=i(9),a=i(48);e.exports=a.extend({url:"EnterpriseGroups",model:s.extend({defaults:{id:null,name:"",status:"",showTransferLicenses:!1,selected:!1,overdraft:null},getPaymentMode:function(){if(null===this.get("overdraft"))throw new Error("Group payment mode is not defined");return this.get("overdraft")>0?"postPayment":"prePayment"}}),queryParams:{},getQueryParams:function(){return this.queryParams},parse:function(e){return e&&e.data||[]},isTransferLicensesAvailable:function(){var e=this.getSelected();return e?e.get("showTransferLicenses"):!!this.findWhere({showTransferLicenses:!0})},getSelected:function(){return this.findWhere({selected:!0})}})},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="price-table-classic price-table-classic_mode-'+s(e.viewMode)+'"><form autocomplete="off" method="GET" class="price-table-classic__form" action="/cart/purchase.html"><input type="hidden" name="id" value="'+s(e.download.itemId)+'" /><input type="hidden" name="source" value="'+s("view_item")+'" /><input type="hidden" name="license" value="'+s(e.download.license)+'" /><input type="hidden" name="size" value="'+s(e.download.size)+'" /><input type="hidden" name="method" value="'+s(e.download.method)+'" /><input type="hidden" name="purchased" value="'+s(e.download.purchased)+'" /><input type="hidden" name="product" value="'+s(e.download.fileType)+'" /><input type="hidden" name="subproduct" value="'+s(e.download.resolution)+'" /><input type="hidden" name="split_count" value="'+s(e.download.splitCount)+'" /><input type="hidden" name="subscription" value="'+s(e.download.subscription)+'" />';e.searchQuery&&(a+='<input type="hidden" name="sq" value="'+s(e.searchQuery.hash)+'" /><input type="hidden" name="sst" value="'+s(e.searchQuery.offset)+'" />'),a+='<div class="price-table-classic__content"><div class="price-table-classic__head ',e.table.availableMethods.length&&!e.isEnterpriseUser&&(a+=" price-table-classic__head_methods"),a+='">';var o=e.table.head;if(o)for(var r=-1,l=o.length-1;r<l;){if(a+='<div class="price-table-classic__th',"Resolution"===(m=o[r+=1]).label&&(a+=" price-table-classic__th_resolution"),"Price"===m.label&&(a+=" price-table-classic__th_price"),a+='">',"Resolution"===m.label?a+='<div class="price-table-classic__col-name price-table-classic__col-name_alt">'+this.tr("Size")+'</div><div class="price-table-classic__col-name price-table-classic__col-name_simple">'+this.tr(m.label)+"</div>":"Size"===m.label?a+='<div class="price-table-classic__col-name price-table-classic__col-name_alt">'+this.tr("Resolution")+'</div><div class="price-table-classic__col-name price-table-classic__col-name_simple">'+this.tr(m.label)+":</div>":a+='<div class="price-table-classic__col-name">'+this.tr(m.label)+"</div>",m.switcher){a+='<div class="price-table-classic__col-switch col-switch">';var n=m.switcher;if(n)for(var c,h=-1,d=n.length-1;h<d;)a+='<div class="col-switch__item _tab ',(c=n[h+=1]).active&&(a+=" col-switch__item_active"),a+='" data-key="'+s(c.key)+'">'+this.tr(c.label)+"</div>";a+="</div>"}a+="</div>"}a+='</div><div class="price-table-classic__space"><div class="price-table-classic__space-item"></div></div>';var u=e.table.body;if(u)for(var p=-1,f=u.length-1;p<f;)a+='<div class="price-table-classic__row _row ',(m=u[p+=1]).active&&(a+=" price-table-classic__row_active"),a+='"><div class="price-table-classic__cell price-table-classic__cell_resolution"><label class="price-table-classic__radio field-box radio-box radio-only radio-box-m"><input class="radio" type="radio" name="size" value="'+s(m.key)+'"',m.active&&(a+=' checked="checked"'),a+=' /><i class="icon icon-radio icon-radio-m"></i></label><span class="price-table-classic__size">',"vect"===m.key?(a+='<i class="icon icon-size',"modal"===e.viewMode&&(a+=" icon-size-air"),a+=" icon-size-vector ",m.active&&(a+=" active"),a+='"></i>'):"el0"===m.key?(a+='<i class="icon icon-size',"modal"===e.viewMode&&(a+=" icon-size-air"),a+=" icon-size-extended ",m.active&&(a+=" active"),a+='"></i>'):(a+='<i class="icon icon-size ',"modal"===e.viewMode&&(a+=" icon-size-air"),"video"!==e.file.type?a+=" icon-size-photo":a+=" icon-size-video",a+=" icon-size-"+s(m.indicator),m.active&&(a+=" active"),a+='"></i>'),a+='</span><div class="price-table-classic__size-info"><span class="price-table-classic__text-size">'+this.tr(m.label)+", </span>",m.extension.tooltip?a+='<span class="price-table-classic__text-type" title="'+s(m.extension.tooltip)+'">'+this.tr(m.extension.label)+"</span>":a+='<span class="price-table-classic__text-type">'+this.tr(m.extension.label)+"</span>",e.isEnterpriseUser||(a+='<div class="price-table-classic__text-license">'+this.tr(m.license)+"</div>"),a+='</div></div><div class="price-table-classic__cell price-table-classic__cell_frame-rate">',m.size.tooltip?(a+='<span class="price-table-classic__text">'+this.tr(m.size.value)+'<i class="price-table-classic__help icon icon-help icon-help-',"modal"===e.viewMode?a+="light":a+="dark",a+=' _tooltip-vector"></i></span>'):a+='<div class="price-table-classic__text price-table-classic__text-alt">'+this.tr(m.label)+'</div><div class="price-table-classic__text price-table-classic__text-size-details">'+s(m.size.value)+"</div>",a+='</div><div class="price-table-classic__cell price-table-classic__cell_price">',m.purchase.size?(a+='<span class="price-table-classic__redownload">',m.purchase.data.error||(a+='<span class="price-table-classic__text price-table-classic__text_middle">'+this.tr("Re-Download")+"</span>"),a+='<a class="price-table-classic__redownload-item price-table-classic__redownload-item_ok icon icon-round-ok',m.purchase.size&&!m.purchase.data.error||(a+=" hidden"),a+='" href="'+this.app.makeUrl("purchased",{query:{"filter[query]":m.fileID}})+'" target="_blank"></a><i class="price-table-classic__redownload-item icon icon-round-fail ',m.purchase.data.error||(a+=" hidden"),a+='" ',m.purchase.data.error&&(a+='title="'+s(m.purchase.data.error)+'"'),a+='></i><i class="price-table-classic__redownload-item icon icon-loading icon-loading-gray hidden"></i></span>'):(a+='<span class="price-table-classic__label">',m.price.free?a+='<span class="price-table-classic__text price-table-classic__text_red">'+this.tr("Free")+"</span>":m.price.discounted&&m.price.discounted!==m.price.value?a+='<span class="price-table-classic__discount"><s class="price-table-classic__price-old">'+m.price.value+'</s><span class="price-table-classic__price-new price-table-classic__text_red">'+m.price.discounted+"</span></span>":m.price.value&&(a+='<span class="price-table-classic__text">'+m.price.value,"-"!==m.price.value&&(a+="&nbsp;"),a+="</span>"),""!==m.price.label&&(a+='<span class="price-table-classic__label-description price-table-classic__text">'+this.tr(m.price.label,"")+'</span><span class="price-table-classic__label-item price-table-classic__label-item_ok icon icon-round-ok',m.price.isLicensed||(a+=" hidden"),a+='"></span>'),a+="</span>"),a+="</div></div>";e.isEnterpriseUser&&e.userHasPermissionsToLicense&&(a+='<div class="price-table-classic__row price-table-classic__license-btn-row"><div class="price-table-classic__cell price-table-classic__cell_resolution"></div><div class="price-table-classic__cell"></div><div class="price-table-classic__cell price-table-classic__cell_price"><div class="price-table-classic__license-btn-container"><button type="button" class="price-table-classic__license-btn button button-xxl',"modal"===e.viewMode?a+=" button-black-blue":a+=" button-white-blue",a+=' _license">'+this.tr("License")+"</button></div></div></div>"),a+='</div><div class="price-table-classic__footer"><div class="price-table-classic__captcha g-recaptcha" data-sitekey="'+s(e.captcha.siteKey)+'"></div><div class="price-table-classic__download',e.isEnterpriseUser&&(a+=" price-table-classic__download_enterprise"),a+='">',e.userHasPermissionsToDownload&&(a+='<button class="price-table-classic__download-btn button button-xxxl button-red _download-button" type="submit">'+s(e.downloadButtonText)+"</button>"),e.isEnterpriseUser&&e.userHasPermissionsToLicense&&(a+='<button type="button" class="price-table-classic__license-btn_mobile button button-xxl',"modal"===e.viewMode?a+=" button-black-blue":a+=" button-white-blue",a+=' _license">'+this.tr("License")+"</button>"),a+="</div>","video"===e.file.type||e.canBeDownload||e.isEnterpriseUser||(a+='<span class="price-table-classic__note _note">'+this.tr("Files under the Extended license can be<br /> downloaded using On Demand Downloads<br /> for Extended License only.")+"</span>");var g=e.table.body;if(g)for(var m,b=-1,_=g.length-1;b<_;)(m=g[b+=1]).active&&(a+='<div class="price-table-classic__footer-info"><div class="price-table-classic__footer-info-row"><div class="price-table-classic__footer-info-cell">'+this.tr("License")+':</div><div class="price-table-classic__footer-info-cell">'+this.tr(m.license)+'</div></div><div class="price-table-classic__footer-info-row"><div class="price-table-classic__footer-info-cell">'+this.tr("File Type")+':</div><div class="price-table-classic__footer-info-cell">'+this.tr(m.extension.label)+"</div></div></div>");return a+='<span class="price-table-classic__download-error _download-error"></span></div></form></div>'}},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="price-table price-table_mode-'+s(e.viewMode)+'"><form autocomplete="off" method="GET" class="price-table__form" action="/cart/purchase.html"><input type="hidden" name="id" value="'+s(e.download.itemId)+'" /><input type="hidden" name="source" value="'+s("view_item")+'" /><input type="hidden" name="license" value="'+s(e.download.license)+'" /><input type="hidden" name="size" value="'+s(e.download.size)+'" /><input type="hidden" name="method" value="'+s(e.download.method)+'" /><input type="hidden" name="purchased" value="'+s(e.download.purchased)+'" /><input type="hidden" name="product" value="'+s(e.download.fileType)+'" /><input type="hidden" name="subproduct" value="'+s(e.download.resolution)+'" /><input type="hidden" name="split_count" value="'+s(e.download.splitCount)+'" /><input type="hidden" name="subscription" value="'+s(e.download.subscription)+'" />';e.searchQuery&&(a+='<input type="hidden" name="sq" value="'+s(e.searchQuery.hash)+'" /><input type="hidden" name="sst" value="'+s(e.searchQuery.offset)+'" />'),a+='<div itemscope itemtype="depositphotos.com"><meta itemprop="infinite" content="1" /><meta itemprop="subscription" content="1" /><meta itemprop="licenses" content="'+s(e.table.licenseMeta)+'" /></div><div class="price-table__content"><div class="price-table__sizes">';var o=e.table.body;if(o)for(var r=-1,l=o.length-1;r<l;)a+='<div class="price-table__size-box',(c=o[r+=1]).active&&(a+=" price-table__size-box_active"),a+=' _size-box">',(c.purchase.size||c.price.isLicensed)&&(a+='<div class="price-table__redownload"><i class="price-table__redownload-cover"></i>',c.purchase.size?(a+='<a class="price-table__redownload-item icon icon-round-ok-large',c.purchase.size&&!c.purchase.data.error||(a+=" hidden"),a+='"href="'+this.app.makeUrl("purchased",{query:{"filter[query]":c.fileID}})+'" target="_blank" title="'+this.tr("Already Downloaded")+'"></a><i class="price-table__redownload-item icon icon-round-fail-large ',c.purchase.data.error||(a+=" hidden"),a+='"',c.purchase.data.error&&(a+=' title="'+s(c.purchase.data.error)+'"'),a+="></i>"):c.price.isLicensed&&(a+='<i class="price-table__redownload-item icon icon-round-ok-large"></i>'),a+="</div>"),a+='<label class="price-table__size-btn',"video"===e.file.type&&"4k"!==c.key&&(a+=" price-table__size-btn_lower"),a+=' _row"><input class="price-table__size-radio" type="radio" name="size" value="'+s(c.key)+'"',c.active&&(a+=' checked="checked"'),a+=" />","vect"===c.key?"modal"===e.viewMode?(a+='<i class="price-table__size-icon icon',c.active?a+=" icon-vector-black":a+=" icon-vector-white",a+='"></i>'):(a+='<i class="price-table__size-icon icon',c.active?a+=" icon-vector-white":a+=" icon-vector-black",a+='"></i>'):"el0"===c.key?a+="EL":(a+=""+s(c.indicator),"video"===e.file.type&&"4k"!==c.key&&(a+="p")),a+='</label><div class="price-table__info-box',e.isEnterpriseUser&&(a+=" price-table__info-box_es"),a+='">',e.isEnterpriseUser?""!==c.price.label&&(a+='<span class="price-table__info-text">'+this.tr(c.price.label,"")+'</span><span class="price-table__info-sep price-table__info-sep_first"> | </span>'):(a+='<span class="price-table__info-text',"extended"===c.licenseName&&(a+=" price-table__info-text_bold"),a+='">',"modal"===e.viewMode?a+='<a class="price-table__info-link" href="'+this.app.makeUrl("license-comparison")+'" target="_blank">'+this.tr(c.licenseShort)+"</a>":a+=""+this.tr(c.licenseShort),a+='</span><span class="price-table__info-sep price-table__info-sep_first"> | </span>'),a+='<span class="price-table__info-text">'+this.tr(c.label)+", "+this.tr(c.extension.label)+'</span><span class="price-table__info-sep"> | </span>',"video"===e.file.type||"vector"===e.file.type&&("vect"===c.key||"el0"===c.key)?(a+='<span class="price-table__info-text">'+s(c.size.value),"vector"!==e.file.type||"vect"!==c.key&&"el0"!==c.key||(a+='<i class="price-table__info-help icon icon-help icon-help-',"modal"===e.viewMode?a+="light":a+="dark",a+=' _tooltip-vector"></i>'),a+="</span>"):a+='<span class="price-table__info-text price-table__info-text_switch _tab" data-key="'+s(c.switchNextSize)+'">'+s(c.size.value)+"</span>",a+="</div>",e.priceNearButton&&e.canBeDownload&&!e.isEnterpriseUser&&!c.purchase.size&&(a+='<div class="price-table__price-box _price-box">',c.price.free?a+='<span class="price-table__price-title">'+this.tr("Price")+":"+this.seo.space+'</span><span class="price-table__text price-table__text_red">'+this.tr("Free")+"</span>":c.price.discounted&&c.price.discounted!==c.price.value?a+='<span class="price-table__price-title">'+this.tr("Price")+":"+this.seo.space+'</span><span class="price-table__discount"><s class="price-table__text price-table__text_push">'+c.price.value+'</s><span class="price-table__text price-table__text_red">'+c.price.discounted+"</span></span>":"-"!==c.price.value&&(a+='<span class="price-table__price-title">'+this.tr("Price")+":"+this.seo.space+'</span><span class="price-table__text">'+c.price.value+"&nbsp;</span>"),""!==c.price.label&&(a+='<span class="price-table__text">'+this.tr(c.price.label,"")+"</span>"),a+="</div>"),a+="</div>";if(a+='</div></div><div class="price-table__footer',e.isEnterpriseUser&&(a+=" price-table__footer_es"),e.canBeDownload||e.isEnterpriseUser||(a+=" price-table__footer_has-note"),a+='"><div class="price-table__captcha g-recaptcha" data-sitekey="'+s(e.captcha.siteKey)+'"></div><div class="price-table__download',e.isEnterpriseUser&&(a+=" price-table__download_enterprise"),a+='">',e.userHasPermissionsToDownload){a+='<button class="price-table__download-btn button button-5xl button-red _download-button" type="submit"><span class="price-table__download-btn-wrap price-table__download-btn-wrap_with-price">';var n=e.table.body;if(n)for(var c,h=-1,d=n.length-1;h<d;)(c=n[h+=1]).active&&(!e.priceInButton&&!c.price.free||!e.canBeDownload||e.isEnterpriseUser||c.purchase.size||""===c.priceLabel||!c.price.free&&"credits"!==e.download.method&&1===c.price.value?a+=""+s(e.downloadButtonText):a+='<span class="price-table__download-btn-title">'+s(e.downloadButtonText)+'</span><span class="price-table__download-btn-price">'+this.tr("Price")+":"+this.seo.space+c.priceLabel+"</span>");a+='</span><span class="price-table__download-btn-wrap price-table__download-btn-wrap_classic">'+s(e.downloadButtonText)+"</span></button>"}return e.isEnterpriseUser&&e.userHasPermissionsToLicense&&(a+='<button type="button" class="price-table__license-btn button button-5xl',"modal"===e.viewMode?a+=" button-black-blue":a+=" button-white-blue",a+=' _license">'+this.tr("License")+"</button>"),a+='</div><span class="price-table__download-error _download-error"></span>',"video"===e.file.type||e.canBeDownload||e.isEnterpriseUser||(a+='<span class="price-table__note',e.file.editorial&&"page"===e.viewMode&&(a+=" price-table__note_push"),a+=' _note">'+this.tr("Files under the Extended license can be<br /> downloaded using On Demand Downloads<br /> for Extended License only.")+"</span>"),e.file.editorial&&"page"===e.viewMode&&(a+='<div class="price-table__editorial"><p class="price-table__editorial-title">'+this.tr("Editorial Use Only.")+'</p><span class="price-table__editorial-desc">'+this.tr("Use of this image in advertising or for promotional purposes is prohibited.")+'<i class="price-table__editorial-help icon icon-help-new _editorial-tooltip"></i></span></div>'),a+="</div></form></div>"}},function(e,t,i){"use strict";var s=i(500);e.exports=s.extend({url:"ComplimentaryDownload",LEGACY_DOWNLOAD:!1})},function(e,t,i){"use strict";var s=i(0),a=i(9),o=i(23),r=i(135),l=i(11),n=i(128),c=["US","GB","LR","MM"],h=["smallweb","bigweb","hd720","hd1080","4k"],d=["xl-2015","vect","cl","cs"].concat(h),u=["s-2015","m-2015","l-2015","xl-2015","vect"].concat(h),p=["el0"].concat(u);e.exports=a.extend({defaults:{file:void 0,product:void 0,available:[],defaultUnits:!0,units:"inch",chosen:""},initialize:function(){this.config=o.deepClone(this.app.config.prices)},getActiveSize:function(e){var t=this;return this.getUserSizes(e.getTypedConfig(),e).some(function(e){return e.size===t.get("chosen")})?this.get("chosen"):this.getDefaultSize(e)},buildTable:function(e){var t=this.getActiveSize(e);return this.set({chosen:t}),{preferredMethod:this.get("product"),availableMethods:this.get("available"),head:this.buildHead(e),body:this.buildBody(e,this.get("product"),t),licenseMeta:this.getLicenseMeta(e)}},getLicenseMeta:function(e){var t=s.chain(e.getTypedConfig()).sortBy("order").value(),i=t[t.length-1].shortName;return"EL"===i&&(i=t[t.length-2].shortName+" | "+t[t.length-1].shortName),t[0].shortName+"-"+i},buildHead:function(e){return[{label:n.Resolution,switcher:null},{label:"video"===e.get("type")?n.FrameRate:n.Size,switcher:"video"===e.get("type")?null:[{key:"inch",label:n.Inches,active:"inch"===this.getUnits()},{key:"cm",label:n.Cm,active:"cm"===this.getUnits()}]},{label:this.app.user.isEnterprise()?n.License:n.Price,switcher:null}]},getSizeMaskByType:function(e){switch(e){case"enterprise":return this.getEnterpriseSizeMask();case"premium":return this.getPremiumSizeMask();default:return this.getDefaultSizeMask()}},getSizeMask:function(e){var t=this.app.config.prices.sizes;return o.generateSizeMask(t,e)},getPremiumSizeMask:function(){return this.getSizeMask(d)},getEnterpriseSizeMask:function(){return this.getSizeMask(u)},getDefaultSizeMask:function(){return this.getSizeMask(p)},getUserSizes:function(e,t){var i=this,a=this.app.user.getUserType(),o=t.getPermissionType(),r=this.getSizeMaskByType(a),l=this.getSizeMaskByType(o),n=this.app.features.get("Premium collection for ES").get("value"),c=t.isPremiumOnlyAvailable(),h=!t.get("permissions").premium&&"premium"===a;return s.filter(e,function(e){var t=e.size,s=i.app.config.prices.sizes[t];return n?c?s&i.getPremiumSizeMask():h?s&l:s&r:s&i.getDefaultSizeMask()})},buildBody:function(e,t,i){var a=this;return s.chain(this.getUserSizes(e.getTypedConfig(),e)).sortBy("order").map(function(s){return e.get("exclusivePrice")&&e.get("exclusivePrice")[s.size]&&(s.price=a.applyExclusivePrice(s.price,e.get("exclusivePrice")[s.size])),a.row(e,s,t,i)}).value()},row:function(e,t,i,a){var o=this.getLicenseName(t),l=this.app.user.isEnterprise()?this.makeLicense(e,t):this.makePrice(e,t,i);return{fileID:e.get("id"),key:t.size,active:t.size===a,purchase:!this.app.user.isEnterprise()&&e.getPurchase(t.size)||{},indicator:this.makeIndicator(t),label:e.makeSizeLabel(t),extension:r.makeExtension(e.get("type"),t),license:r.makeLicenseFullInfo(o).label,licenseShort:r.makeLicenseShortInfo(o).label,licenseName:o,size:r.makeSize(e,t,this.getUnits()),switchNextSize:this.getNextSize(),price:l,priceLabel:this.getPriceLabel(l),prices:this.app.user.isEnterprise()?this.makeLicenses(e,t):this.makePrices(e,t,s.size(this.get("available"))&&this.get("available")||[i])}},getLicenseName:function(e){return this.get("product")&&"ondemand"===this.get("product").type&&"el"===this.get("product").subproduct?"extended":e.license},getPriceLabel:function(e){var t="";return e.free?t=this.app.translator.tr("Free"):e.discounted&&e.discounted!==e.value?t="<s>"+e.value+"</s> "+e.discounted:"-"!==e.value&&(t=e.value+" "),""!==e.label&&(t+=this.app.translator.tr(e.label,"")),t},makeIndicator:function(e){return l.renameSizes[e.size]||e.size.replace("hd","").replace("-2015","")},makePrices:function(e,t,i){var s=this,a=[];return i.map(function(i){return s.makePrice(e,t,i)}).filter(function(e){return-1===a.indexOf(e.bit_price)&&(a.push(e.bit_price),!0)})},makePrice:function(e,t,i){var a=s.find(t.price,function(e){return e.bits&i.bit_price}),r="credits"===i.type?this.getPriceKoef(e,this.app.user,t):1,l=e.get("free")&&"extended"!==t.license,c=a?o.formatPrice(a.cost):"-",h=1!==c?n.Downloads:n.Download;return{bit_price:i.bit_price,free:l,value:c,discounted:r<1?o.formatPrice(a.cost*r):null,label:this.makePriceLabel(i,a,l,h)}},makePriceLabel:function(e,t,i,s){return this.app.features.isFeatureOnValue("File View Classic")||"credits"!==e.type?i||!t||"credits"===e.type?"":s:this.app.translator.tr("%s Credits")},makeLicense:function(e,t){var i=e.isLicensed(t.size);return{free:!1,isLicensed:i,label:i?n.Licensed:n.NotLicensed}},makeLicenses:function(e,t){return[this.makeLicense(e,t)]},getUnits:function(){var e=c.indexOf(this.app.config.country)>=0?"inch":"cm";return this.changed.units&&this.secureSet({defaultUnits:!1}),this.get("defaultUnits")&&this.get("units")!==e&&this.secureSet({units:e}),this.get("units")},getNextSize:function(){return"inch"===this.getUnits()?"cm":"inch"},applyExclusivePrice:function(e,t,i){var a,o=i||"bits";return s.each(t,function(t){(a=s.find(e,function(e){return t[o]===e[o]}))?a=s.extend(a,t):e.push(t)}),e},getPriceKoef:function(e,t,i){var s="vector"===e.get("type")?"image":e.get("type"),a=e.get("discount")||0,o=this.app.user.get("id")?t.get("discounts").items&&t.get("discounts").items[s]&&t.get("discounts").items[s][i.size]:0;return o*=100,"extended"===i.license&&"100"===e.get("discount")?1:1-Math.max(a,o)/100},getDefaultSize:function(e){return s.chain(this.getUserSizes(e.getTypedConfig(),e)).where({license:"standard"}).last().value().size}})},function(e,t,i){"use strict";(function(e){var t=i(1)(i(132)),s=i(0),a=i(16),o=i(478),r=i(480),l=i(482),n=i(634),c=i(487),h=i(531),d=i(500),u=i(530),p=i(7)(e),f=i(484),g=i(488),m=i(521),b=i(127),_=i(616),v=i(100).apiErrors,w=i(100).captchaErrors,y=i(40),k=i(479),x=i(128),C=i(529),S=i(528),T=i(491);e.exports=o.extend({name:"PriceTable",el:!1,template:C,viewMode:"page",mobileTablets:!1,sideBarAllowed:!1,signUpModalAllowed:!1,quickSwitch:!1,downloadModels:{},downloading:0,refPrefix:"",isDesktopSmall:!1,events:{"click ._row":"onTableRowClick","click ._tab":"onSwitcherTabClick","click ._license":"onLicenseClick","click ._download-button":"onDownloadClick","mouseenter ._tooltip-vector":"showVectorTooltip","mouseleave ._tooltip-vector":"hideVectorTooltip","mouseenter ._editorial-tooltip":"toggleEditorialTooltip","mouseleave ._editorial-tooltip":"toggleEditorialTooltip"},globals:{"resize window":"onWindowResize"},initialize:function(){var e=this;this.setTemplate(),this.userPlansManager=this.userPlansManager||this.app.store.get("UserPlansManager"),this.priceTable=new h({file:this.file,product:this.userPlansManager.get("preferred"),available:this.userPlansManager.get("available")},{app:this.app}),this.listenTo(this.file,"change:purchase_info change:sizeMask change:licensed",this.render),this.on("item.downloaded",this.render),this.listenTo(this.priceTable,{change:this.render}),this.quickSwitch?this.listenTo(this.app.observer,"PriceTable:SetAttributes",function(t){e.priceTable.set({product:t},{silent:!0}),e.priceTable.trigger("manualSync"),e.toggleProductLabel(t.bit_price)}):(this.listenTo(this.userPlansManager,{change:function(){return e.priceTable.set({product:e.userPlansManager.get("preferred")})}}),this.listenTo(this.app.observer,"Sidebar:PurchaseComplete",function(){e.render().promise().done(function(){return e.proceedDownloadForAuthUser()})}))},prepareRender:function(){var e=this;return this.table=this.priceTable.buildTable(this.file),0===this.downloading&&(s.each(this.downloadModels,function(t,i){i!==e.file.get("id")&&delete e.downloadModels[i]}),!0)},serialize:function(){var e=this.priceTable.getActiveSize(this.file);return{searchQuery:this.app.store.get("SearchQuery")?s.pick(this.app.store.get("SearchQuery").attributes,"offset","hash"):void 0,userHasPermissionsToLicense:this.app.user.hasPermissionsTo("enterprise","license"),userHasPermissionsToDownload:this.app.user.hasPermissionsToDownload()||this.file.isLicensed(e),isEnterpriseUser:this.app.user.isEnterprise(),file:this.file.serialize(),table:this.table,canBeDownload:this.checkSizeCanBeDownload(e),download:this.getDownloadModel(e).toJSON(),viewMode:this.viewMode,priceInButton:this.app.user.isLoggedIn(),priceNearButton:!1,captcha:{siteKey:y.recaptcha.publicKey},downloadButtonText:this.getDownloadButtonText()}},clientAfterRender:function(){var e=this;"vector"===this.file.get("type")&&this.setNotExistView("vectorTooltip",r,{name:"VectorTooltip",params:k.PriceTableVector,content:new o({el:!1,template:function(){return this.tr(x.AIFilesHelpMessage)}})}),this.file.get("editorial")&&this.setNotExistView("editorialTooltip",r,{params:k.ViewInfoEditorial,content:new o({el:!1,template:T})}),f(this.$el,a.$),this.$("._download-button").each(function(t,i){return g(e.$(i),{color:"modal"===e.viewMode?"#fff":void 0})}),this.setPricePosition(),this.sizeChangedCallback()},checkSizeCanBeDownload:function(e){if(this.file.isPurchased(e)||this.file.isLicensed(e))return!0;var t=this.priceTable.get("product").bit_price;return(this.userPlansManager.getPlansMaskForFileSize(this.file.get("type"),e)&t)>0},setTemplate:function(){this.app.features.isFeatureOnValue("File View Classic")&&(this.template=S)},getDownloadButtonText:function(){var e=this.priceTable.get("chosen"),t=this.getFileTypeOverride(this.file.get("type"),e),i=[{type:"image",label:this.tr("Download Image")},{type:"vector",label:this.tr("Download Vector")},{type:"video",label:this.tr("Download Video")}];return this.file.isPurchased(e)||this.file.isLicensed(e)?this.tr("Re-Download_full"):this.app.user.isEnterprise()?this.tr("Download Comp"):i.find(function(e){return e.type===t}).label},getFileTypeOverride:function(e,t){return"vector"!==this.file.get("type")||["vect","el0"].includes(t)?this.file.get("type"):"image"},setPricePosition:function(){var e=this.$("._size-box"),t=parseInt(e.css("marginLeft"),10)+parseInt(e.css("marginRight"),10),i=e.outerWidth()*e.length+t*(e.length-1),s=this.$("._price-box"),a=this.$("._download-button"),o=a.length?a.outerWidth():0,r=0;r=o+s.outerWidth()<=i?i-s.outerWidth():o,s.css({left:r})},onTableRowClick:function(e){this.setChosenSize(a.$(e.currentTarget).find('input[name="size"]').val())},onSwitcherTabClick:function(e){this.priceTable.set({units:e.currentTarget.getAttribute("data-key")})},onLicenseClick:function(e){e.preventDefault(),e.stopPropagation(),this.onLicenseBtnClick()},onDownloadClick:function(e){e.preventDefault(),this.resetError(),this.app.observer.broadcast("Track:UE:File:DownloadClick",{id:this.file.get("id"),file:this.file,product:this.file.get("free")?0:this.userPlansManager.get("preferred").bit_price,size:this.priceTable.getActiveSize(this.file),route:this.app.router.routeName,view:this.name}),this.app.user.isLoggedIn()?this.proceedDownloadForAuthUser():this.proceedDownloadForGuest()},proceedDownloadForGuest:function(){"Cart"!==this.app.router.routeName?(this.listenToOnce(this.app.observer,"Cart:added",this.doPurchaseAndDownloadForGuest),this.app.observer.fire("Cart:add",{fileId:this.file.get("id")})):this.doPurchaseAndDownloadForGuest()},proceedDownloadForAuthUser:function(){var e=this.$("._note");e.is(":visible")&&!e.hasClass("animation-el-note")&&this.app.user.checkExtendedProduct()?(e.addClass("animation-el-note"),this.getDownloadButton(this.priceTable.getActiveSize(this.file)).trigger("loaded")):this.doPurchaseAndDownload()},doPurchaseAndDownloadForGuest:function(){var e=this;if(this.isNeedToShowSignUp()){var t=function(){e.app.chain.initChain("download",{fileType:e.file.get("type"),fileId:e.file.get("id")}).then(function(){return e.app.chain.execute("Signup",!0)})};return new c({app:this.app,onAuthCallback:function(){e.app.observer.broadcast("Track:UE:SignUp:SuccessFromFileViewModal",{label:"Form"}),t()},onUserLoggedInCallback:function(){e.app.observer.broadcast("Track:UE:SignUp:SuccessFromFileViewModal",{label:"Social"}),t()}}).show(),void this.app.observer.broadcast("Track:UE:SignUp:ModalShow",{label:this.app.history.first().get("route")})}this.doPurchaseAndDownload()},getDownloadButton:function(e){var t=this.$('._download-button[value="'+e+'"]');return t.length>0?t:this.$("._download-button")},toggleProductLabel:function(e){this.$("[data-bit]").addClass("hidden").filter('[data-bit="'+e+'"]').removeClass("hidden")},injectPurchased:function(e,t){this.file.setPurchase(e,!t||!t.message&&!t.error_message||{error:t.message||t.error_message})},createDownloadModel:function(){return this.app.user.isEnterprise()?new u({},{app:this.app}):new d({},{app:this.app})},getDownloadModel:function(e){var t=this,i=this.file.get("id"),a=this.priceTable.get("product"),o=this.file.getTypedConfig().find(function(t){return t.size===e})||{};this.downloadModels[i]=this.downloadModels[i]||{};var r=this.downloadModels[i][e];return r||((r=this.downloadModels[i][e]=this.createDownloadModel()).listenTo(this.priceTable,"change manualSync",function(){s.each(t.downloadModels[i],function(s){s.secureSet({source:"item",itemId:i,size:e,license:o.license,purchased:t.file.isPurchased(e),fileType:"video"===t.file.get("type")?"video":"image",method:"imagepack"===a.type?"bonus":a.type,subscription:"subscription"===a.type?a.id:0,resolution:a.subproduct||"standart",splitCount:a.split_count||0})})}),this.priceTable.trigger("manualSync"),this.listenTo(r,{"change:link":this.onGetDownloadLink,invalid:this.onInvalidDownload,error:this.onDownloadError})),r.set("g-recaptcha-response",this.$(".g-recaptcha-response").val()||""),r},doPurchaseAndDownload:function(){var e=this.priceTable.getActiveSize(this.file),t=this.file.isPurchased(e),i=this.file.get("free");t||i||!this.isNeedToShowSidebar()?t||i||!this.isNeedToRefillPlan()?(this.downloading++,this.getDownloadButton(e).trigger("loading"),this.getDownloadModel(e).requestLink()):this.showRefillMembershipModal():this.app.observer.fire("Sidebar:PurchaseEnable",{file:this.file})},isNeedToShowSignUp:function(){return this.signUpModalAllowed&&this.app.features.isFeatureOnValue("Sign Up Modal after File View Modal download")},isNeedToShowSidebar:function(){return this.sideBarAllowed&&!this.app.user.isEnterprise()&&!b.mobileMode()&&this.app.features.isFeatureOnValue("Purchase Sidebar on File View")&&!this.app.user.hasPlans()},isNeedToRefillPlan:function(){var e=this.priceTable.get("product").type;if("membership"!==e)return!1;var t=s.chain(this.app.user.serializeUserPlans({type:e})).sortBy("order").first().value();return!(t&&this.app.user.products.findWhere({type:e,id:t.id}).canBePurchased())},onGetDownloadLink:function(e,t){var i=this,s=e.get("size");m.downloadByUrl({app:this.app,link:t,callback:function(){i.getDownloadButton(s).trigger("loaded"),0==--i.downloading&&i.trigger("item.downloaded"),i.app.user.fetch()}});var a=this.file.isLicensed(this.priceTable.getActiveSize(this.file)),o=["EnterpriseLicensedDownloads","EnterpriseCompDownloads"].indexOf(this.app.router.routeName)>-1;if(!this.app.user.isEnterprise()||a||o){if(!this.app.user.isEnterprise()){var r=this.userPlansManager.get("preferred").bit_price;this.file.get("free")&&(r=this.file.isFreeCurated()?"FreeCurated":"Free"),this.app.observer.broadcast("Track:UE:File:Download",{route:this.app.router.routeName,id:this.file.get("id"),file:this.file,size:e.get("size"),reDownload:this.file.isPurchased(e.get("size")),plan:this.app.tracking.rewriteProduct(this.userPlansManager.get("preferred").type),cost_type:r,view:this.name})}}else this.app.observer.broadcast("Track:UE:File:AddToCart",{id:this.file.get("id"),file:this.file.serialize(),view:this.name});this.injectPurchased(e.get("size")),this.onDownloadBegins()},onInvalidDownload:function(e,i){var a=this;if(this.downloading--,i.length&&s.some(i,function(e){return e.error_code===v.haveNoPermissionToSection}))return this.getDownloadButton(e.get("size")).trigger("loaded"),new l({app:this.app,title:this.tr("Service Message"),message:s.map(i,function(e){return e.error_message}).join(" ")}).show(),void p.warn("DOWNLOAD ERROR: Cannot get download link. Something wrong with arrived data",i);var o=s.find(i,function(e){return!!s.contains((0,t.default)(w),+e.error_code)&&e});if(o)return this.getDownloadButton(e.get("size")).trigger("loaded"),this.showError(o.error_code,o.error_message),void _.injectScript(this.$(".g-recaptcha")[0],this.sizeChangedCallback.bind(this));(i.key||i.length)&&("Cart"!==this.app.router.routeName&&this.app.observer.broadcast("Track:UE:File:AddToCart",{id:this.file.get("id"),file:this.file.serialize(),view:this.name}),this.injectPurchased(e.get("size"),e.LEGACY_DOWNLOAD?i:s.first(i)),this.app.chain.initChain("download",{refPrefix:this.refPrefix,fileId:e.get("itemId"),fileType:e.get("fileType")}).then(function(){e.LEGACY_DOWNLOAD?a.app.chain.startLegacy(i):a.app.chain.start(s.first(i))}))},onDownloadError:function(e,t){_.reset(this.$(".g-recaptcha-response")),t.responseJSON&&t.responseJSON.errors?this.onInvalidDownload(e,t.responseJSON.errors):p.warn("DOWNLOAD ERROR: Cannot get download link. Server returns error: ",t)},setChosenSize:function(e,t){this.priceTable.set({chosen:e},t||{})},showRefillMembershipModal:function(){new n({app:this.app,type:"notAvailable"}).show()},resetError:function(e,t){this.$("._download-error").text("")},showError:function(e,t){this.$("._download-error").text(e+"::"+t),this.sizeChangedCallback()},getActiveTableRowData:function(){return this.table&&this.table.body&&s.findWhere(this.table.body,{active:!0})||null},showVectorTooltip:function(e){e.preventDefault(),this.getView("vectorTooltip").show(e)},hideVectorTooltip:function(e){e.preventDefault(),this.getView("vectorTooltip").hide(e)},toggleEditorialTooltip:function(e){this.getView("editorialTooltip").toggle(e)},onWindowResize:s.throttle(function(){b.desktopSmall()!==this.isDesktopSmall&&(this.isDesktopSmall=b.desktopSmall(),this.setPricePosition())},100),onLicenseBtnClick:function(){},onDownloadBegins:function(){},sizeChangedCallback:function(){}})}).call(this,i(4)(e))},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="download-method download-method_file-view-'+s(e.viewMode)+'"><div class="download-method__method _methods"><i class="download-method__icon icon';return"modal"===e.viewMode&&(a+=" color-white"),a+=" icon-plans-"+s(e.type)+'"></i><span class="download-method__title">'+this.tr("Download Using")+':</span><span class="download-method__description">'+this.tr(e.label)+" "+s(e.serialIndex||"")+'<input class="download-method__radio" type="radio" name="method" value="'+s(e.type)+'" /></span><i class="download-method__arrow arrow ',"modal"===e.viewMode?a+=" arrow-gray":a+=" array-black",a+=' arrow-bottom arrow-block-1 _arrow"></i></div><div class="download-method__products-box _mobile-products"></div></div>'}},function(e,t){e.exports=function(e){return'<div class="user-plans-list user-plans-list_mobile _list"></div>'}},function(e,t,i){"use strict";var s=i(0),a=i(16),o=i(478),r=i(534),l={credits:{},subscription:{},ondemand:{},membership:{},imagepack:{}};l.credits.view=i(615),l.credits.template=i(652),l.subscription.view=i(590),l.subscription.template=i(651),l.ondemand.view=i(599),l.ondemand.template=i(650),l.imagepack.view=i(614),l.imagepack.template=i(649),l.membership.view=i(544),l.membership.template=i(648),e.exports=o.extend({name:"UserProductsListMobile",el:!1,template:r,viewMode:"modal",linksEnabled:!1,plans:void 0,events:{"click ._product":"onUserProductClick"},initialize:function(){this.listenTo(this.app.user,"sync",this.render)},prepareRender:function(){s.each(this.plans.serializeUserPlans(),function(e){this.insertView("._list",this.getProductView(e))},this)},serialize:function(){return{products:this.plans.serializeUserPlans()}},getProductView:function(e){var t=this.linksEnabled?this.app.makeUrl("subscribe",{backURL:!0}):"",i=l[e.type];return i?new i.view({app:this.app,template:i.template,product:e,serializeParams:{href:t}}):null},onUserProductClick:function(e){this.linksEnabled||(e.stopPropagation(),e.preventDefault()),this.chooseProductCallback(this.plans.serializeUserPlans()[a.$(e.currentTarget).index()])},toggle:function(){this.$el.toggle(),"modal"===this.viewMode&&this.app.observer.fire("Modal:CheckSize")},hide:function(){this.$el.hide(),"modal"===this.viewMode&&this.app.observer.fire("Modal:CheckSize")},chooseProductCallback:s.noop})},function(e,t,i){"use strict";var s=i(1)(i(3)),a=i(16),o=i(478),r=i(480),l=i(653),n=i(535),c=i(127),h=i(479),d=i(533);e.exports=o.extend({name:"DownloadMethodSelector",el:!1,template:d,viewMode:"page",onlyDesktopView:!1,mobileTablets:!1,events:{"click ._methods":"togglePlansToolTip"},globals:{click:"onGlobalClick","resize window":"onWindowResize"},initialize:function(){this.userPlansManager=this.userPlansManager||this.app.store.get("UserPlansManager"),this.listenTo(this.userPlansManager,"change",this.render),this.collection&&this.listenTo(this.collection,"reset",this.render)},prepareRender:function(){return!(!this.isNeedToBeShown()||this.collection&&0===this.collection.length)||(this.$el&&this.$el.hide&&this.$el.hide(),!1)},serialize:function(){return(0,s.default)({viewMode:this.viewMode},this.userPlansManager.get("preferred"))},clientAfterRender:function(){this.getView("PlansTooltip")&&this.getView("PlansTooltip").isOpen()&&this.getView("PlansTooltip").repin(this.$("._methods")),!this.onlyDesktopView&&c.mobileTablets()?this.makePlansListMobile():this.makePlansList()},makePlansList:function(){this.setNotExistView("PlansTooltip",r,{name:"PlansTooltip",keep:!0,params:h.Products,content:new l({app:this.app,plans:this.userPlansManager,handleProductClick:!1,chooseProductCallback:this.onChoosePlan.bind(this)})})},makePlansListMobile:function(){var e=new n({viewMode:this.viewMode,app:this.app,plans:this.userPlansManager,chooseProductCallback:this.onChoosePlan.bind(this)});this.setView("._mobile-products",e),e.render().promise().done(function(e){return a.$("._mobile-products").append(e.$el)})},isNeedToBeShown:function(){return this.userPlansManager.get("available").length>0},onGlobalClick:function(e){e.stopPropagation(),this.hidePlansToolTip()},onWindowResize:function(){if(!this.onlyDesktopView){var e=c.mobileTablets();e!==this.mobileTablets&&(this.mobileTablets=e,this.mobileTablets?(this.getView("PlansTooltip")&&this.getView("PlansTooltip").remove(),this.makePlansListMobile()):(this.getView("._mobile-products")&&this.getView("._mobile-products").remove(),this.makePlansList()))}},onChoosePlan:function(e){this.hidePlansToolTip(),this.userPlansManager.set({preferred:e}),this.chooseProductCallback(e)},togglePlansToolTip:function(e){e.preventDefault(),e.stopPropagation(),this.getView("._mobile-products")&&this.getView("._mobile-products").toggle(e),this.getView("PlansTooltip")&&this.getView("PlansTooltip").toggle(e),this.$("._arrow").toggleClass("arrow-top").toggleClass("arrow-bottom")},hidePlansToolTip:function(){this.getView("._mobile-products")&&this.getView("._mobile-products").hide(),this.getView("PlansTooltip")&&this.getView("PlansTooltip").hide(),this.$("._arrow").removeClass("arrow-top").addClass("arrow-bottom")},chooseProductCallback:function(){}})},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})});return'<div class="cover-crop" style="width: '+s(e.sizes.width)+'px;"><div class="cover-crop__wrap"><img class="cover-crop__img _img" src="'+e.url+'" style="width: '+s(e.sizes.width)+"px; height: "+s(e.sizes.height)+'px;" /></div></div>'}},function(e,t,i){"use strict";var s=i(1)(i(3)),a=i(639),o=i(478),r=i(131),l=i(537);e.exports=o.extend({name:"CoverCropBody",el:!1,template:l,prepareRender:function(){this.sizes=this.getThumbSizes()},serialize:function(){return{sizes:this.sizes,url:r.getThumbUrl({file:this.file.serialize(),size:"wideSmall",protocol:this.app.parsedUrl.protocol})}},clientAfterRender:function(){this.cropper=new a(this.$("._img").get(0),{aspectRatio:5,minCropBoxWidth:this.sizes.width,minContainerHeight:this.sizes.height,zoomable:!1})},getThumbSizes:function(){var e=this.file.get("width"),t=this.file.get("height");return e>t?{width:450,height:Math.floor(450*t/e)}:{width:Math.floor(450*e/t),height:450}},crop:function(){var e=this.app.store.get("Folder"),t=this.cropper.getCropBoxData(),i=this.sizes.width/this.sizes.height>5,a=1600/this.sizes.width,o=(0,s.default)({fileId:this.file.get("id"),folderId:e.get("id")},{boxWidth:1600,boxHeight:Math.floor(1600*this.sizes.height/this.sizes.width),width:i?Math.floor(t.width*a):1600,height:Math.floor(t.height*a),top:Math.floor(t.top*a),left:Math.floor(t.left*a)});e.save({coverCropData:o})}})},function(e,t,i){"use strict";var s=i(1)(i(12)),a=i(483),o=i(538),r=function(e){function t(t){var i;return(i=e.call(this,t)||this).title=i.tr("Cover Crop"),i.body=function(){return new o({file:i.file,app:i.app})},i.footer=[{label:i.tr("Ok"),color:"blue",defaultAction:!0,callback:"cropCallback"},{label:i.tr("Cancel"),hide:!0}],i}return(0,s.default)(t,e),t.prototype.cropCallback=function(){var e=this,t=this.app.store.get("Folder");this.lockOverlay=!0,this.$el.addClass("modal_loading"),this.listenToOnce(t,"sync",function(){e.app.observer.fire("Folder:AddCover",{fileId:e.file.get("id")}),e.hide()}),this.findView("CoverCropBody").crop()},t}(a);e.exports=r},,,,function(e,t,i){"use strict";var s=i(9);e.exports=s.extend({url:function(){return this.get("uuid")?"DownloadBulkOrder":"RequestBulkOrder"},defaults:{uuid:null,transactions:[],type:"transaction"}})},,function(e,t,i){"use strict";e.exports={extraOffset:400,loadLimit:40,minItemsAmount:8}},function(e,t,i){"use strict";var s=i(1)(i(3)),a=i(0),o=i(501),r=i(525),l=i(14),n=i(127),c=i(523),h=i(499),d=i(40).app,u=i(545),p=i(481);e.exports=o.extend({name:"RelatedFilesList",el:!1,globals:(0,s.default)({},o.prototype.globals,{"scroll.infinite window":"checkLoadingNecessity","resize.infinite window":"checkLoadingNecessity"}),title:null,className:"",filesBoxClassName:"",seeMore:null,sliderShift:0,relatedMode:void 0,viewMode:"page",isCartBtnEnabled:!0,isFavoriteBtnEnabled:!0,isSimilarBtnEnabled:!1,infiniteScrollEnabled:!1,hasNavigation:!1,displaySeeMore:!0,displaySeeMoreLink:!1,filesListLargeEnabled:!1,filesListRelatedWideEnabled:!1,filesListFillEnabled:!1,events:(0,s.default)({},o.prototype.events,{"click ._nav-left":"onNavLeftClick","click ._nav-right":"onNavRightClick","mouseenter ._related-file:not(.related-file-box_see-more)":"showToolTip","mouseleave ._related-file:not(.related-file-box_see-more)":"hideToolTip","click ._related-file":"onFileClick","click ._see-more":"onSeeMoreClick","contextmenu .file-box":"onCustomFileClick","mouseup .file-box":"onCustomFileClick"}),initialize:function(){this.setFileEventsListeners(),this.listenTo(this.collection,"update reset",this.render),this.collection.endless&&this.initInfiniteScroll(),this.on("clientAfterRender",this.trackImpression)},prepareRender:function(){this.prepareSeoTitle()},serialize:function(){return{isEnterpriseUser:this.app.user.isEnterprise(),title:this.title,hidden:this.app.features.isFeatureOnValue("Lazy File Relates"),layoutClassName:this.className,filesBoxClassName:this.filesBoxClassName,relatedMode:this.relatedMode,endless:this.collection.endless,viewMode:this.viewMode,seeMore:this.seeMore,sortImagesEnabled:d.sortFileViewRelatedImagesEnabled,items:this.serializeItems(),infiniteScrollEnabled:this.infiniteScrollEnabled,filesListLargeEnabled:this.filesListLargeEnabled,filesListFillEnabled:this.filesListFillEnabled,hasNavigation:this.hasNavigation,isCartBtnEnabled:!this.app.user.isEnterprise()&&this.isCartBtnEnabled,isFavoriteBtnEnabled:this.isFavoriteBtnEnabled,isSimilarBtnEnabled:this.isSimilarBtnEnabled,sliderShift:this.getSliderShift(),lockUploadFiles:this.lockFilesUpload()}},serializeItems:function(){var e=this,t=this.collection.serialize().map(function(t){return(0,s.default)({},t,{url:l.urlFormat(t.url,{protocol:e.app.parsedUrl.protocol,host:e.app.host})})});return t.length>=8&&!this.infiniteScrollEnabled&&(this.filesListRelatedWideEnabled||(t=t.slice(0,8)),this.seeMore={display:this.displaySeeMoreLink,type:this.model.get("type"),url:this.model.makeRelatedUrl({relatedTo:this.relatedMode})},this.displaySeeMore&&!this.filesListLargeEnabled&&(0,s.default)(t[t.length-1],{seeMore:!0,url:this.seeMore.url})),t},clientAfterRender:function(){var e=this;"page"===this.viewMode&&(this.setNotExistView("tooltip",r,{app:this.app}),this.setSeeMoreLink()),h(this.$("._related-file:not(.related-file-box_see-more)"),this,{helperOptions:{mode:"related",defaults:function(){return(0,s.default)({},e.getRenderData(),{viewMode:"page"})},getModel:function(t){return(0,s.default)({},e.collection.get(+Backbone.$(t.currentTarget).data("id")).attributes)}}}),this.lockFilesUpload()&&this.uploadFiles(),this.clientAfterRenderCallback()},trackImpression:function(){this.collection.length&&this.$el.is(":visible")&&this.app.observer.broadcast("Track:UE:File:UserSeeFileThumb",{page:1,files:this.collection.toJSON(),relatedMode:this.relatedMode,anchor:this.model.get("id"),view:this.name})},toTracking:function(){return this.serializeItems()},initInfiniteScroll:function(){this.listenTo(this.collection,{"update reset":this.checkLoadingNecessity,CollectionEnded:this.destroyInfiniteScroll})},destroyInfiniteScroll:function(){this.collection.endless=!1,this.collection.initialized=!1,this.$("._loader").remove()},checkLoadingNecessity:a.throttle(function(){this.collection.initialized&&this.needToLoad()&&this.collection.loadNext()},300),needToLoad:function(){var e=Backbone.$(window);return e.scrollTop()+e.height()+u.extraOffset>this.$el.offset().top+this.$el.outerHeight()},prepareSeoTitle:function(){this.collection.each(function(e){return e.generateSeoTitle({useSeoAltTemplate:!1,useSeoTitleTemplate:!1})})},getRenderData:function(){return a.pick(this,"relatedMode","viewMode")},setSeeMoreLink:function(){var e=this.$("._link");e.length&&c.transformToLink(e[0],this.model.makeRelatedUrl({relatedTo:this.relatedMode}))},onFileClick:function(e){if(Backbone.$(e.currentTarget).hasClass("_related-file-activate")){var t=this.collection.findWhere({id:+Backbone.$(e.currentTarget).data("id")});this.app.observer.broadcast("Track:UE:File:RelatedFileClick",{id:t.get("id"),index:this.$(e.currentTarget).index(),mode:this.relatedMode}),(e.ctrlKey||e.shiftKey||e.metaKey)&&"page"===this.viewMode?this.trackNewTabClick(e.currentTarget):this.app.observer.broadcast("Track:UE:File:OpenFileView",{file:t,sourceFile:this.model,mode:this.relatedMode,viewMode:this.viewMode,view:this.name}),this.onFileClickCallback(e,t)}else this.trackSeeMore(e)},onCustomFileClick:function(e){[p.rightMouse,p.middleMouse].includes(e.which)&&(Backbone.$(e.currentTarget).hasClass("related-file-box_see-more")?this.trackSeeMoreNewTabClick():o.prototype.onCustomFileClick.call(this,e))},trackSeeMoreNewTabClick:function(){this.app.observer.broadcast("Track:UE:ContextMenu:Open",{source:"FileSeeMore",target:{target:"search"},params:{mode:this.relatedMode}})},onSeeMoreClick:function(e){this.trackSeeMore(e)},trackSeeMore:function(e){e.ctrlKey||e.shiftKey||e.metaKey?this.trackSeeMoreNewTabClick():this.app.observer.broadcast("Track:UE:File:SeeMoreClick",{mode:this.relatedMode})},trackNewTabClick:function(e){o.prototype.trackNewTabClick.call(this,e,{mode:this.relatedMode})},showToolTip:function(e){"page"===this.viewMode&&n.canShowPreviewTooltips()&&this.getView("tooltip").show(e,{anchor:e.currentTarget,contentData:{file:this.collection.at(Backbone.$(e.currentTarget).index())}})},hideToolTip:function(e){this.getView("tooltip")&&this.getView("tooltip").hide(!!e)},onNavLeftClick:function(e){this.navAction("left")},onNavRightClick:function(e){this.navAction("right")},navAction:function(e){var t="right"===e?"._nav-right":"._nav-left",i="right"===e?"._nav-left":"._nav-right",s=Math.abs(parseInt(this.$("._related-files-box").css("margin-left"),10)),a="right"===e?Math.max(this.totalItemsWidth-this.holderWidth-s,0):s,o="right"===e?-(s+Math.min(this.holderWidth,a)):-(s-Math.min(this.holderWidth,a));this.holderWidth>=a&&this.$(t).addClass("hidden"),this.$(i).removeClass("hidden"),this.$("._related-files-box").css({marginLeft:o}),this.sliderShift=o},getSliderShift:function(){if(!this.totalItemsWidth)return 0;var e=this.sliderShift;return e&&Math.abs(this.sliderShift)+this.holderWidth>this.totalItemsWidth&&(e=Math.min(-(this.totalItemsWidth-this.holderWidth),0)),e},lockFilesUpload:function(){return"page"===this.viewMode&&(this.app.features.isFeatureOnValue("Upload Related After")||this.app.features.isFeatureOnValue("Lazy File Relates"))},uploadFiles:function(){this.$el.removeClass("hidden"),this.$("._file-box-image-src").each(function(e,t){var i=Backbone.$(t);i.attr("data-src")&&i.attr("src",i.attr("data-src")).removeAttr("data-src")})},onFileClickCallback:function(){},clientAfterRenderCallback:function(){}})},,,,,function(e,t){e.exports=function(e){var t="";return e.showNotice&&(t+='<a class="file-view-notice__wrap" href="'+this.app.makeUrl("50freefiles")+'"><span class="file-view-notice__text">'+this.tr("You can download this file for free on our special offer landing page. Get it now!")+"</span></a>"),t}},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})});return'<div class="create-design create-design_'+s(e.viewMode)+'"><button class="create-design__btn button _btn"><i class="create-design__icon icon"></i><span class="create-design__text">'+s(e.btnText)+"</span></button></div>"}},function(e,t,i){"use strict";var s=i(0),a=i(137),o=i(478),r=i(40),l=i(552),n=i(23);e.exports=o.extend({name:"CreateDesign",el:!1,template:l,viewMode:"modal",events:{"click ._btn":"onBtnClick"},prepareRender:function(){return!this.isDisabled()},serialize:function(){var e="edit"===this.getCrelloButtonType()?this.tr("Edit with Crello"):this.tr("Create Design");return{viewMode:this.viewMode,btnText:e}},clientAfterRender:function(){this.isDisabled()||this.trackEvent("show")},getCrelloButtonType:function(){var e=this.app.features.get("Crello button type");return"enabled"===e.get("status")?e.get("value"):""},isDisabled:function(){return!(this.app.user.isLoggedIn()&&this.app.features.isFeatureOnValue("Create Design")&&!this.app.user.isEnterprise()&&"image"===this.model.get("type")&&!this.model.get("editorial"))},onBtnClick:function(e){e.stopPropagation(),window.open(this.getLink(),"_blank").focus(),this.trackEvent("click")},getLink:function(){var e={protocol:r.crello.protocol,host:r.crello.host,pathname:"home"};return this.app.features.isFeatureOnValue("Create Design Home")||(e=s.extend(e,{pathname:"create_design/depositphotos/"+this.model.get("id"),query:this.getQueryParams()})),a.format(e)},getQueryParams:function(){var e="modal"===this.viewMode?"Modal":"ItemPage";return{utm_source:"DepositPhotos",utm_medium:n.capitalize(this.getCrelloButtonType()),utm_campaign:e}},trackEvent:function(e){var t="modal"===this.viewMode?"FileViewModal":"FileView",i="edit"===this.getCrelloButtonType()?"EditWCrello":"CrelloCreate";this.app.observer.broadcast("Track:UE:"+t+":CrelloCreate",{eventCategory:i,action:e})}})},function(e,t){e.exports=function(e){var t='<div class="search-similar-box"><button class="search-similar-box__button button _find-similar-btn">';return"modal"===e.viewMode?(t+='<i class="search-similar-box__icon icon ',"video"===e.type?t+="icon-see-more-videos-light":t+="icon-see-more-images-light",t+='"></i>'):(t+='<i class="search-similar-box__icon icon ',"video"===e.type?t+="icon-see-more-videos-dark":t+="icon-see-more-images-dark",t+='"></i>'),t+='<span class="search-similar-box__text">',"video"===e.type?t+=""+this.tr("Find Similar Videos"):t+=""+this.tr("Find Similar Images"),t+="</span></button></div>"}},function(e,t,i){"use strict";var s=i(478),a=i(554);e.exports=s.extend({name:"SearchSimilarFiles",el:!1,template:a,viewMode:"modal",events:{"click ._find-similar-btn":"onFindSimilarBtnClick"},serialize:function(){return{viewMode:this.viewMode,type:this.file.get("type")}},onFindSimilarBtnClick:function(e){e.stopPropagation(),e.preventDefault(),this.app.observer.broadcast("Track:UE:File:ToSimilar"),this.app.router.redirect(this.file.makeRelatedUrl({relatedTo:"similar"}))}})},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="license-wizard _wizard"><div class="license-wizard__wrapper"><div class="license-wizard__fan images-fan images-fan_size-l '+e.classNames+'">',o=e.files;if(o)for(var r,l=-1,n=o.length-1;l<n;)r=o[l+=1],a+='<div class="images-fan__item images-fan__item_'+(e.files.length-1-l)+' cmp-file-thumb cmp-file-thumb_l"><img alt="'+s(r.seoAlt)+'" src="'+r.thumbs.normal+'" class="images-fan__img',r.width>r.height?a+=" horizontal":r.width<r.height?a+=" vertical":a+=" square",a+='"></div>';e.files.length>e.maxFilesListCount&&(a+='<div class="images-fan__more">'+s(e.maxFilesListCount)+"+</div>"),a+='</div><h2 class="license-wizard__title">'+this.tr("Licensing Wizard")+'</h2><div class="license-wizard__form-box"><div class="license-wizard__form"><form method="POST"><div class="license-wizard__fields-scroll-box _scroll"><div class="license-wizard__fields">';var c=e.splitTypes;if(c)for(var h,d=-1,u=c.length-1;d<u;)if(h=c[d+=1],e.availableLicenses.hasOwnProperty(h)){if(e.files.length>1&&(a+='<p class="files-amount">'+this.tr(e.licensingFileTypes[h])+": "+s(e.licensingParams.licensing[h].fileIds.length)+"</p>"),a+='<label class="license-wizard__input license-wizard__input_plans-selector field-box select-box select-box-xl"><select class="select select-xl _license" name="licenseId" data-type="'+s(h)+'">',e.availableLicenses[h]&&e.availableLicenses[h].length){var p=e.availableLicenses[h];if(p)for(var f,g=-1,m=p.length-1;g<m;)a+='<option value="'+s((f=p[g+=1]).id)+'"',e.licensingParams.licensing[h].licenseId===f.id&&(a+=" selected"),a+=">"+s(f.name)+"</option>"}else a+="<option>"+this.tr("No Licenses")+"</option>";if(a+='</select><i class="arrow arrow-black arrow-bottom"></i></label><label class="license-wizard__input license-wizard__input_size-selector field-box select-box select-box-xl"><select class="select select-xl _size" name="size" data-type="'+s(h)+'">',e.availableSizes[h]&&e.availableSizes[h].length){var b=e.availableSizes[h];if(b)for(var _,v=-1,w=b.length-1;v<w;)a+='<option value="'+s((_=b[v+=1]).size)+'"',e.licensingParams.licensing[h].size===_.size&&(a+=" selected"),a+=">",_.vector?a+=""+this.tr("Vect. Image"):(a+=""+s(_.shortName),_.label&&(a+=" | "+s(_.label))),_.costWithCurrency&&(a+=" | "+_.costWithCurrency),a+="</option>"}else a+="<option>"+this.tr("No Sizes")+"</option>";if(a+='</select><i class="arrow arrow-black arrow-bottom"></i></label>',e.options[h]&&e.options[h].length){a+='<div class="license-wizard__options">';var y=e.options[h];if(y)for(var k,x=-1,C=y.length-1;x<C;)a+='<div class="license-wizard__options-row">',0===(k=y[x+=1]).total?a+='<div class="license-wizard__free-option"><i class="icon license-wizard__free-option-icon"></i><span class="license-wizard__free-option-text">'+s(k.name)+'</span><span class="checkbox-text checkbox-text_option-price">'+this.tr("Included")+"</span></div>":(a+='<label class="field-box checkbox-box checkbox-box-m"><input type="checkbox" class="checkbox _option-checkbox" data-bit="'+s(k.bit)+'" data-type="'+s(h)+'"',k.selected&&(a+=" checked"),a+='><i class="icon icon-checkbox icon-checkbox-m"></i><span class="checkbox-text">'+s(k.name)+'</span><span class="checkbox-text checkbox-text_option-price">'+k.totalFormatted+"</span></label>"),a+="</div>";a+="</div>"}}var S=e.fields;if(S)for(var T,M=-1,F=S.length-1;M<F;)"input"===(T=S[M+=1]).tag?a+='<label class="license-wizard__input field-box input-box input-box-xl"><input type="'+s(T.type)+'" class="input input-xl _field" placeholder="'+this.tr(T.placeholder)+'"name="'+s(T.name)+'" value="'+s(e.licensingParams[T.name]||"")+'"></label>':a+='<label class="license-wizard__input field-box textarea-box textarea-box-xl"><textarea class="textarea textarea-xl textarea-no-resize _field" placeholder="'+this.tr(T.placeholder)+'"name="'+s(T.name)+'">'+s(e.licensingParams[T.name]||"")+"</textarea></label>";return a+="</div></div>",e.vatRate&&e.vatEnabled&&(a+='<div class="license-wizard__vat-included">'+this.tr("Price includes VAT at %s&#37;",e.vatRate)+"</div>"),e.showTotal&&(a+='<div class="_total"></div>'),a+='<div class="license-wizard__buttons-container _buttons',e.vatRate||(a+=" license-wizard__buttons-container-margin"),a+='"><div class="license-wizard__buttons-cell license-wizard__buttons-cell_confirm"><button type="submit" class="license-wizard__submit button button-xl button-black-blue button-imitation _submit',e.ableToLicense||(a+=" disabled"),a+='"',e.ableToLicense||(a+=" disabled"),a+=">"+this.tr("Confirm")+'</button></div><div class="license-wizard__buttons-cell"><button type="submit" class="license-wizard__submit button button-xl button-blue button-imitation _submit-download',e.ableToLicense||(a+=" disabled"),a+='"',e.ableToLicense||(a+=" disabled"),a+=">"+s(e.downloadBtnText)+"</button></div></div></form></div></div></div></div>"}},function(e,t){e.exports=function(e){return'<div class="batch-download-modal _modal"><i class="modal__close-button icon-close-cross icon-close-cross-white batch-download-modal__close _close"></i><div class="_body"></div></div>'}},function(e,t){e.exports=function(e){return'<div class="batch-download__wrapper"><div class="batch-download__box"><span class="batch-download__header">'+this.tr("Thank You for Purchase!")+'</span><span class="batch-download__info">'+this.tr('Your files are preparing to download. A link with ZIP folder will be sent to <span class="%s">%s</span>.',["link-blue",e.user.email])+'</span><i class="icon batch-download__icon"></i><button class="button button-watery button-blue button-xxl _close">'+this.tr("Ok, got it")+"</button></div></div>"}},function(e,t,i){"use strict";var s=i(478),a=i(558);e.exports=s.extend({name:"BatchDownload",el:!1,template:a,serialize:function(){return{user:this.app.user.serialize()}}})},function(e,t,i){"use strict";var s=i(483),a=i(559),o=i(557);e.exports=s.extend({template:o,draggable:!1,destroyOnHide:!0,noBorder:!0,licensed:[],notLicensed:[],footer:[],prepareRender:function(){this.setView("._body",new a({app:this.app,licensed:this.licensed,notLicensed:this.notLicensed}))},clientAfterRender:function(){this.setModalHeight();for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];s.prototype.clientAfterRender.apply(this,t)},setModalHeight:function(){this.$el.height(this.$("._body").height())},getContainerHeight:function(){return this.$("._body").outerHeight()}})},function(e,t,i){"use strict";var s=i(48),a=i(129);e.exports=s.extend({model:a})},function(e,t,i){"use strict";var s=i(0),a=i(9),o=i(48),r=i(99);e.exports=r.extend({url:"LicenseItem",defaults:{licensing:null,project:null,client:null,purchaseOrder:null,isbn:null,other:null},relations:{licensing:o.extend({model:a.extend({defaults:{type:null,fileIds:null,licenseId:null,size:null,optionsBitMask:null}})})},getQueryParams:function(){return this.toJSON()},serialize:function(){var e=this.toJSON(),t={};return s.each(e.licensing,function(e){return t[e.type]=e}),e.licensing=t,e}})},function(e,t){e.exports=function(e){var t='<div class="license-wizard__message-box"><p class="modal__text">';return e.username?t+=""+this.tr("Dear %s!",e.username):t+=""+this.tr("Dear user!"),t+="</p>",e.filesOk&&(t+='<p class="modal__text"><i class="icon icon-round-ok"></i>',e.filesOkAmount>1?t+=""+this.tr("Files %s have been licensed successfully.",e.filesOk):t+=""+this.tr("File %s has been licensed successfully.",e.filesOk),t+="</p>"),e.filesFail&&(t+='<p class="modal__text"><i class="icon icon-round-fail"></i>',e.filesFailAmount>1?t+=""+this.tr("Files %s have not been licensed. Your account does not have sufficient funds to do this operation.",e.filesFail):t+=""+this.tr("File %s has not been licensed. Your account does not have sufficient funds to do this operation.",e.filesFail),t+="</p>"),t+="</div>"}},function(e,t,i){"use strict";var s=i(1),a=s(i(12)),o=s(i(505)),r=i(0),l=function(e){function t(t){var s;return s=e.call(this,t)||this,r.extend((0,o.default)((0,o.default)(s)),{template:i(563)},t),s}return(0,a.default)(t,e),t.prototype.serialize=function(){return r.clone(this.data)},t}(i(478));e.exports=l},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="file-view__thumb-wrapper" data-id="'+s(e.file.id)+'"><div class="file-box view-file-box _file-box '+s(e.fileViewBoxClassNames)+'"><div class="view-file-box__holder _file-box-holder"><div class="view-file-box__box">';return"video"===e.file.type?(a+='<div class="view-file-box__video _video-placeholder"><img class="view-file-box__video-poster _video-poster" src="'+e.thumb.src+'"width="'+e.dimensions.huge.w+'" height="'+e.dimensions.huge.h+'"',e.thumb.preload&&(a+=' data-preload="'+e.thumb.preload+'"'),("modal"===e.viewMode||e.maxHeight)&&(a+='style="',"modal"===e.viewMode&&(a+="min-width: "+e.dimensions.huge.w+"px; min-height: "+e.dimensions.huge.h+"px;"),e.maxHeight&&(a+=" max-height: "+e.maxHeight+"px;")),a+='alt="'+e.file.seoAlt+'" title="'+e.file.seoTitle+'" /></div>'):(a+='<a class="view-file-box__image-box view-file-box__image-box_label view-file-box__image-clear _image-box" href="'+e.thumb.download+'"><img class="view-file-box__image',e.dimensions.huge.w>=e.dimensions.huge.h?a+=" view-file-box__image_h":a+=" view-file-box__image_v",a+=" ",e.thumb.hasLabel||(a+=" view-file-box__image-clear"),a+=' _image _zoom-image" src="'+e.thumb.src+'" ',e.thumb.preload?a+=' data-preload="'+e.thumb.preload+'"':a+=' data-src="'+e.thumb.seo+'"',a+=" ",e.thumb.preloadMax&&(a+=' data-preload-max="'+e.thumb.preloadMax+'"'),a+=' width="'+e.dimensions.huge.w+'" height="'+e.dimensions.huge.h+'" ',"modal"===e.viewMode&&(a+=' style="min-width: '+e.dimensions.huge.w+"px; min-height: "+e.dimensions.huge.h+'px; margin-bottom: 0;"'),a+=' alt="'+e.file.seoAlt+'" title="'+this.tr("Download")+" - "+e.file.seoTitle+'" itemprop="image"/></a>'),a+='<div class="view-file-box__action',e.actionsSmallMode&&(a+=" view-file-box__action_small"),"video"===e.file.type&&(a+=" _view-file-box-video"),a+=' _action-box"><span class="view-file-box__action-holder',"modal"===e.viewMode&&e.file.editorial&&(a+=" view-file-box__action-holder_tall"),a+='">',e.isCartBtnEnabled&&(a+='<button class="view-file-box__action-item button-circle button-circle-xl button-add-to-cart',e.file.inCart&&(a+=" active"),a+=' _to-cart"title="',e.file.inCart?a+=""+this.tr("Remove from Shopping Cart"):a+=""+this.tr("Add to Shopping Cart"),a+='"></button>'),e.isFavoriteBtnEnabled&&(a+='<button class="view-file-box__action-item button-circle button-circle-xl button-add-to-favorites _to-favorites',e.file.inFavorites&&(a+=" active"),a+='"title="',e.file.inFavorites?a+=""+this.tr("Remove from Favorites"):a+=""+this.tr("Add to Favorites"),a+='"></button>'),a+='<button class="view-file-box__action-item button-circle button-circle-xl button-share _share" title="'+this.tr("Share")+'"></button>',e.isEnterpriseUser||(a+='<a class="view-file-box__action-item button-circle button-circle-xl button-download _download_comp" ',e.canDownloadComp&&(a+='href="'+e.thumb.download+'?download=true" '),a+='title="'+this.tr("Download Comp")+'"></a>'),a+='</span></div><div class="view-file-box__share _share-box"><div class="view-file-box__share-container"><div class="view-file-box__share-box"><div class="view-file-box__share-holder"><i class="view-file-box__close icon icon-close-cross icon-close-cross-white _share-close"></i><ul class="view-file-box__list"><li class="view-file-box__list-item"><a class="view-file-box__share-item button-social button-social-share _share-button" rel="nofollow" data-width="730" data-height="420" data-title="Tweet" data-social="twitter"><span class="button-circle button-circle-xl button-social-twitter"></span></a></li><li class="view-file-box__list-item"><a class="view-file-box__share-item button-social button-social-share _share-button" rel="nofollow" data-width="650" data-height="370" data-title="Facebook" data-social="facebook"><span class="button-circle button-circle-xl button-social-facebook"></span></a></li><li class="view-file-box__list-item"><a class="view-file-box__share-item button-social button-social-share _share-button" rel="nofollow" data-width="700" data-height="450" data-title="Google" data-social="google"><span class="button-circle button-circle-xl button-social-google"></span></a></li><li class="view-file-box__list-item"><a class="view-file-box__share-item button-social button-social-share _share-button" rel="nofollow" data-width="700" data-height="370" data-title="Pinterest" data-social="pinterest"><span class="button-circle button-circle-xl button-social-pinterest"></span></a></li>',e.showVKSocial&&(a+='<li class="view-file-box__list-item"><a class="view-file-box__share-item button-social button-social-share _share-button" rel="nofollow" data-width="700" data-height="370" data-title="VK" data-social="vk"><span class="button-circle button-circle-xl button-social-vk"></span></a></li>'),a+='</ul></div></div></div></div><div class="view-file-box__indicator">',e.isCartBtnEnabled&&(a+='<i class="view-file-box__indicator-item label-in-cart _label-in-cart',e.file.inCart||(a+=" hidden"),a+='" title="'+this.tr("In Shopping Cart")+'"></i>'),e.isFavoriteBtnEnabled&&(a+='<i class="view-file-box__indicator-item label-in-favorites _label-in-favorites',e.file.inFavorites||(a+=" hidden"),a+='" title="'+this.tr("Added to Favorites")+'"></i>'),a+="</div>","video"!==e.file.type&&(a+='<button class="view-file-box__lens button-zoom"></button>'),"modal"===e.viewMode&&e.file.editorial&&(a+='<div class="view-file-box__editorial-box',"video"===e.file.type&&(a+=" view-file-box__editorial-box-video"),a+='"><span class="view-file-box__editorial"><span class="view-file-box__editorial-text">'+this.tr("Editorial Use Only")+'</span><i class="view-file-box__editorial-icon icon icon-help icon-help-light-active _editorial-tooltip"></i></span></div>'),a+='<div class="view-file-box__similar-btn _thumb-find-similar"></div></div>',"page"!==e.viewMode||e.hideDescription||(a+='<p class="view-file-box__description view-file-box__description_short _file-box-description">',"video"===e.file.type?a+=s(e.file.visibleDescription)+" &mdash; "+this.tr("Video by %s",e.file.sellerName):(a+='<a class="view-file-box__description-link _zoom-image" href="'+e.thumb.download+'"><span class="view-file-box__description-text" itemprop="description">'+s(e.file.visibleDescription)+"</span> &mdash; ","vector"===e.file.type?a+=""+this.tr("Vector by %s",e.file.sellerName):a+=""+this.tr("Photo by %s",e.file.sellerName),a+="</a>"),a+="</p>"),a+="</div></div></div>"}},function(e,t,i){"use strict";var s=i(1)(i(12)),a=i(482),o=i(128),r=i(62),l=function(e){function t(t){var i;return void 0===t&&(t={}),(i=e.call(this,t)||this).title=t.title||o.NeedAuthTitle,i.message=t.message||i.tr(o.NeedAuthFavoritesMessage),i.footer=[{label:o.LoginBtn,hide:!0,callback:"loginHandler"},{label:o.CreateAccBtn,hide:!0,color:"blue",callback:"signupHandler"}],i}(0,s.default)(t,e);var i=t.prototype;return i.loginHandler=function(){this.app.observer.broadcast("Track:UE:Login:LoginButtonClick",{route:this.app.router.routeName,location:this.app.router.routeName+" "+this.app.url}),r.fire("Tooltip:LoginToggle",{options:{anchor:document.querySelector("._btn-sign-in")}})},i.signupHandler=function(){var e=this;this.app.observer.broadcast("Track:UE:SignUp:CreateAccButtonClick",{route:this.app.router.routeName,location:this.app.router.routeName+" "+this.app.url});var t="Free50Files"===this.app.router.routeName?"signup-simple":"signup";this.app.chain.initChain(t).then(function(){return e.app.chain.start()})},t}(a);e.exports=l},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="modal _modal '+s(e.modalClasses)+'"><div class="modal__dialog"><div class="modal__zoom _body" style="width: '+s(e.dimensions.w)+"px; height: "+s(e.dimensions.h)+'px;"><div class="_wrap" style="width: '+s(e.dimensions.w)+"px; height: "+s(e.dimensions.h)+'px;"><img class="modal__zoom-image" src="'+e.file.src+'" data-preload="'+s(e.file.preload)+'" alt="'+s(e.file.seoAlt)+'" title="'+s(e.file.seoTitle)+'"></div></div><div class="modal__zoom-caption';if(e.showDownloadButton&&(a+=" modal__zoom-caption_with-button"),a+=' _caption" style="width: '+s(e.dimensions.w)+'px;"><div class="modal__zoom-caption-text-box"><span class="modal__zoom-caption-text">'+s(e.file.seoTitle)+"</span>",e.showDownloadButton&&(a+='<span class="modal__zoom-caption-button"><button class="button button-xl button-watery button-blue _download">'+this.tr("Download")+"</button></span>"),a+="</div></div></div>",e.opacity.length){a+='<div class="bg-selector _opacity-range"><div class="bg-selector__content">';var o=e.opacity;if(o)for(var r,l=-1,n=o.length-1;l<n;)a+='<div class="bg-selector__handler _opacity-switcher ',(r=o[l+=1]).active&&(a+="bg-selector__handler_active"),a+='"><i class="bg-selector__handler-item" style="opacity: '+s(1-r.value/100)+';"></i></div>';a+="</div></div>"}return e.navigation.left&&(a+='<i class="modal__zoom-nav modal__zoom-nav_left button-nav button-nav-left _zoom-prev"></i>'),e.navigation.right&&(a+='<i class="modal__zoom-nav modal__zoom-nav_right button-nav button-nav-right _zoom-next"></i>'),a+="</div>"}},function(e,t,i){"use strict";var s=i(0),a=i(40),o=i(478),r=i(14);e.exports=o.extend({el:!1,serialize:function(){return{showNotice:this.isFree50DownloadEnabled()}},isFree50DownloadEnabled:function(){return!this.app.user.isEnterprise()&&this.app.user.isFreeDownloadEnabled()&&s.contains(a.free50Files,+this.model.get("id"))&&"Free50Files"!==r.getRoute(this.app.url).name}})},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="file-view__short-info-wrapper"><div class="file-view__short-info"><a class="file-view__short-info-avatar" href="'+e.portfolioLink+'"><span class="avatar-box avatar-box-m"><img class="avatar avatar-m" src="'+e.avatar+'" alt="'+s(e.file.sellerName)+'"></span></a><div class="file-view__short-info-line"><span class="file-view__short-info-name">'+this.tr("Copyright")+": "+this.seo.space+'</span><span class="file-view__short-info-value"><a class="';return"modal"===e.viewMode?a+="link-blue-on-dark":a+="link-blue",a+=' _portfolio" href="'+e.portfolioLink+'"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">'+s(e.file.sellerName)+'</span><meta itemprop="url" content="'+s(e.portfolioLink)+'" /></span></a>'+this.seo.space+'<span class="hidden" itemprop="provider">Depositphotos</span></span></div><div class="file-view__short-info-line"><span class="file-view__short-info-name">',"video"===e.file.type?a+=""+this.tr("Clip ID"):"vector"===e.file.type?a+=""+this.tr("Vector ID"):e.file.editorial?a+=""+this.tr("Photography ID"):a+=""+this.tr("Image ID"),a+=":"+this.seo.space+'</span><span class="file-view__short-info-value">'+s(e.file.id)+"</span></div></div></div>"}},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="series-box';e.series.className&&(a+=" "+s(e.series.className)),a+=' _series-box">';var o=e.series.elements;if(o)for(var r,l=-1,n=o.length-1;l<n;)a+='<a class="series-box__link-poster _link" href="'+((r=o[l+=1]).url||r.urlVar)+'" style="background-image: url('+s(r.resource.src.jpg)+')">',r.trTitle?a+=""+s(r.trTitle):a+=""+s(r.title),a+="</a>";return a+="</div>"}},function(e,t,i){"use strict";e.exports={6:{similar:[34,37]},7:{similar:[18,42]},8:{similar:[13,23]},9:{similar:[15,16]},10:{similar:[12,29]},11:{similar:[10,33]},12:{similar:[10,29]},13:{similar:[8,30]},14:{similar:[13,22]},15:{similar:[9,16]},16:{similar:[9,15]},17:{similar:[25,36]},18:{similar:[7,42]},19:{similar:[10,35]},20:{similar:[16,35]},21:{similar:[34,37]},22:{similar:[36,39]},23:{similar:[8,15]},24:{similar:[10,12]},25:{similar:[17,44]},26:{similar:[29,42]},27:{similar:[8,13]},28:{similar:[18,42]},29:{similar:[10,12]},30:{similar:[8,13]},31:{similar:[8,29]},32:{similar:[17,29]},33:{similar:[10,11]},34:{similar:[6,21]},35:{similar:[19,20]},36:{similar:[17,22]},37:{similar:[6,21]},38:{similar:[22,44]},39:{similar:[22,29]},41:{similar:[8,30]},42:{similar:[7,18]},43:{similar:[13,30]},44:{similar:[22,25]}}},function(e,t,i){"use strict";e.exports.base={connectToSortable:"._sortable-files",cancel:".vjs-control-bar",addClasses:!1,appendTo:"body",cursor:"move",cursorAt:{top:15,left:0},scroll:!1,opacity:.5,zIndex:4001,distance:5,delay:150}},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a="";return"search"===e.mode&&(a+='<div class="'+s(e.layoutClasses)+'">',"wide"===e.settings.layout?(a+='<div data-id="'+s(e.model.id)+'" class="'+s(e.fileBoxClasses)+" file-box_"+s(e.model.type)+' file-wide-box file-wide-box_align" ',e.itemsData[e.model.id]&&(a+='style="'+s(e.itemsData[e.model.id].boxStyle)+'"'),a+=">",e.model.free&&(a+='<svg width="0" height="0" class="file-box__svg-label"><defs><clipPath id="red-label-clippath" clipPathUnits="objectBoundingBox"><polygon points="0 0, 0.5 1, 1 0"></polygon></clipPath></defs></svg>'),a+='<a class="file-wide-box__link _file-box-link file-wide-box__link_align" href="'+e.model.url+'"',e.settings.linkTarget&&(a+=' target="_blank"'),e.itemsData[e.model.id]&&(a+=' style="',"video"!==e.model.type?a+=""+s(e.itemsData[e.model.id].holderStyle):a+=""+s(e.itemsData[e.model.id].linkStyle),a+='"'),a+='><span class="file-wide-box__holder file-box-image _file-box-holder _file-box-image"><img src="',e.previousLayout?a+=""+s(e.model.thumbs[e.previousLayout]):a+=""+s(e.model.thumbs[e.settings.layout]),a+='"',e.previousLayout&&(a+=' data-next-src="'+e.model.thumbs[e.settings.layout]+'"'),a+='class="file-wide-box__image',e.model.width>e.model.height?a+=" file-wide-box__image_v":e.model.width<e.model.height?a+=" file-wide-box__image_h":a+=" file-wide-box__image_s","video"===e.model.type&&(a+=" file-wide-box__image_video"),a+=' _file-box-image-src _remove-title-attr"alt="'+s(e.model.seoAlt)+'" title="'+s(e.model.seoTitle)+'"',e.itemsData[e.model.id]&&(a+=' style="'+s(e.itemsData[e.model.id].imageStyle)+'"'),a+=' /></span></a><div class="file-wide-box__title"><a class="file-wide-box__title-link" href="'+e.model.url+'" ',e.settings.linkTarget&&(a+='target="_blank"'),a+=">"+s(e.model.calculatedSeoTitle)+'</a></div><div class="file-wide-box__actions '+s(e.itemsData[e.model.id].className)+'">',e.isEnterpriseUser||(a+='<button class="file-box__action-item button button-circle button-add-to-cart',e.model.inCart&&(a+=" active"),a+=' _to-cart"title="',e.model.inCart?a+=""+this.tr("Remove from Shopping Cart"):a+=""+this.tr("Add to Shopping Cart"),a+='"></button>'),a+='<button class="file-box__action-item button button-circle button-add-to-favorites',e.model.inFavorites&&(a+=" active"),a+=' _to-favorites"title="',e.model.inFavorites?a+=""+this.tr("Remove from Favorites"):a+=""+this.tr("Add to Favorites"),a+='"></button><button class="file-box__action-item button button-circle '+s(e.actionButtonType)+' button-see-more-similars _to-similar"title="',"video"===e.model.type?a+=""+this.tr("Find Similar Videos"):a+=""+this.tr("Find Similar Images"),a+='"></button></div>',"video"!==e.model.type&&(a+='<div class="file-wide-box__zoom"><button class="file-box__action-zoom button-zoom button-zoom-small _zoom" title="'+this.tr("Quick Preview")+'"></button></div>',e.isFolder&&e.isEditableFolder&&(a+='<div class="file-wide-box__cover"><button class="file-box__action-cover button-cover _cover" title="'+this.tr("Set as Folder Cover")+'"></button></div>')),a+='<div class="file-wide-box__info">',e.model.free&&(a+='<div class="file-box__sale-free',e.model.isFreeCurated&&(a+=" file-box__sale-free_simple"),a+='"><div class="label label-sale',e.model.isFreeCurated&&(a+=" label-sale_curated"),a+='">'+s(e.model.freeLabel)+"</div></div>"),a+='<div class="file-box__indicator">',e.isEnterpriseUser||(a+='<span class="file-box__indicator-item label label-in-cart _label-in-cart ',e.model.inCart||(a+=" hidden"),a+='"title="'+this.tr("In Shopping Cart")+'"></span>'),a+='<span class="file-box__indicator-item label label-in-favorites _label-in-favorites',e.model.inFavorites||(a+=" hidden"),a+='"title="'+this.tr("Added to Favorites")+'"></span></div><div class="file-box__type label label-type label-type-'+s(e.model.type)+'"></div><div class="file-box__contributor label label-contributor">'+s(e.model.sellerName)+'</div><div class="file-box__maxsize label label-maxsize">'+s(e.model.width)+" x "+s(e.model.height)+"</div>","video"===e.model.type&&(a+='<div class="file-box__video-length label label-video-length">'+s(e.model.formattedLength)+"</div>"),a+="</div></div>"):(a+='<div data-id="'+s(e.model.id)+'" class="'+s(e.fileBoxClasses)+'" ',e.itemsData[e.model.id]&&(a+='style="'+s(e.itemsData[e.model.id].boxStyle)+'"'),a+='><div class="file-box__link _file-box-link" ',e.itemsData[e.model.id]&&(a+='style="'+s(e.itemsData[e.model.id].linkStyle)+'"'),a+='><a class="file-box__holder _file-box-holder" href="'+e.model.url+'" ',e.settings.linkTarget&&(a+='target="_blank"'),a+='><span class="'+s(e.imageHolderClasses),e.model.width>e.model.height?(a+=" file-box__image-holder_vertical",e.model.height/e.model.width<110/170&&(a+=" file-box__image-holder_limit")):e.model.width<e.model.height?(a+=" file-box__image-holder_horizontal",e.model.width/e.model.height<110/170&&(a+=" file-box__image-holder_limit")):a+=" file-box__image-holder_square",a+=' _file-box-image" ',e.itemsData[e.model.id]&&(a+='style="'+s(e.itemsData[e.model.id].holderStyle)+'"'),a+='><img src="',e.previousLayout?a+=""+s(e.model.thumbs[e.previousLayout]):a+=""+s(e.model.thumbs[e.settings.layout]),a+='"',e.previousLayout&&(a+=' data-next-src="'+e.model.thumbs[e.settings.layout]+'"'),a+=' class="file-box-image__image _file-box-image-src _remove-title-attr"  alt="'+s(e.model.seoAlt)+'" title="'+s(e.model.seoTitle)+'" /><span class="file-box-image__title">'+s(e.model.calculatedSeoTitle)+"</span></span></a>",e.model.free&&(a+='<div class="file-box__sale-free',e.model.isFreeCurated&&(a+=" file-box__sale-free_simple"),a+='"><div class="label label-sale',e.model.isFreeCurated&&(a+=" label-sale_curated"),a+='">'+s(e.model.freeLabel)+"</div></div>"),a+='<div class="file-box__indicator">',e.isEnterpriseUser||(a+='<span class="file-box__indicator-item label label-in-cart _label-in-cart ',e.model.inCart||(a+=" hidden"),a+='" title="'+this.tr("In Shopping Cart")+'"></span>'),a+='<span class="file-box__indicator-item label label-in-favorites _label-in-favorites',e.model.inFavorites||(a+=" hidden"),a+='" title="'+this.tr("Added to Favorites")+'"></span></div><div class="file-box__type label label-type label-type-'+s(e.model.type)+'"></div><div class="file-box__contributor label label-contributor">'+s(e.model.sellerName)+'</div><div class="file-box__maxsize label label-maxsize">'+s(e.model.width)+" x "+s(e.model.height)+'</div><div class="file-box__action '+s(e.itemsData[e.model.id].className)+'">',e.isEnterpriseUser||(a+='<button class="file-box__action-item button button-circle '+s(e.actionButtonType)+" button-add-to-cart",e.model.inCart&&(a+=" active"),a+=' _to-cart"title="',e.model.inCart?a+=""+this.tr("Remove from Shopping Cart"):a+=""+this.tr("Add to Shopping Cart"),a+='"></button>'),a+='<button class="file-box__action-item button button-circle '+s(e.actionButtonType)+" button-add-to-favorites",e.model.inFavorites&&(a+=" active"),a+=' _to-favorites"title="',e.model.inFavorites?a+=""+this.tr("Remove from Favorites"):a+=""+this.tr("Add to Favorites"),a+='"></button><button class="file-box__action-item button button-circle '+s(e.actionButtonType)+' button-see-more-similars _to-similar"title="',"video"===e.model.type?a+=""+this.tr("Find Similar Videos"):a+=""+this.tr("Find Similar Images"),a+='"></button></div>',"video"!==e.model.type&&(a+='<div class="file-box__zoom"><button class="file-box__action-zoom button-zoom button-zoom-small _zoom" title="'+this.tr("Quick Preview")+'"></button></div>',e.isFolder&&(a+='<div class="file-box__cover"><button class="file-box__action-cover button-cover _cover" title="'+this.tr("Set as Folder Cover")+'"></button></div>')),a+="</div></div>"),a+="</div>"),"favorite"===e.mode&&(a+='<div class="files-list_layout-'+s(e.panel.thumbs)+'"><div data-id="'+s(e.model.id)+'" class="file-box folder-file-box _favorite-file',-1!==e.listOfSelected.indexOf(e.model.id)&&(a+=" file-box_selected"),a+='"><a class="file-box__link" href="'+e.model.url+'"><span class="file-box__holder"><span class="file-box-image file-box__image-holder',e.model.width>e.model.height&&e.model.height/e.model.width<.5&&(a+=" file-box__image-holder_limit"),a+='"style="background-image: url('+s(e.model.thumbs[e.thumbSizes[e.panel.thumbs]])+')"></span><span class="file-box-video"></span></span><span class="file-box__indicator"><span class="file-box__indicator-item label label-in-cart _label-in-cart ',e.model.inCart||(a+=" hidden"),a+='" title="'+this.tr("In Shopping Cart")+'"></span></span><span class="file-box__control _prevent"><i class="file-box__control-item',e.viewOnly?a+=" file-box__control-item_disabled ":a+=" _delete",a+=' icon icon-item-remove"></i><i class="file-box__control-item',e.viewOnly&&(a+=" file-box__control-item_disabled"),a+=' icon icon-item-move"></i><i class="file-box__control-item icon icon-checkbox icon-checkbox-l _select',-1!==e.listOfSelected.indexOf(e.model.id)&&(a+=" checked"),a+='"></i><span class="file-box__blur"><img class="file-box__blur-image" src="'+e.model.thumbs[e.panel.thumbs]+'" style="filter: url(#blur'+s(e.model.id)+')" />\x3c!--[if !(lte IE 8)]><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="0" height="0"><filter id="blur'+s(e.model.id)+'"><feGaussianBlur in="SourceGraphic" stdDeviation="10" /></filter></svg><![endif]--\x3e</span></span></a></div></div>'),"filePage"===e.mode&&(a+='<div class="file-box view-file-box _file-box '+s(e.fileViewBoxClassNames)+'"><div class="view-file-box__holder _file-box-holder"><div class="view-file-box__box">',"video"===e.file.type?(a+='<div class="view-file-box__video _video-placeholder"><img class="view-file-box__video-poster _video-poster" src="'+e.thumb.src+'"width="'+e.dimensions.huge.w+'" height="'+e.dimensions.huge.h+'"',e.thumb.preload&&(a+=' data-preload="'+e.thumb.preload+'"'),("modal"===e.viewMode||e.maxHeight)&&(a+='style="',"modal"===e.viewMode&&(a+="min-width: "+e.dimensions.huge.w+"px; min-height: "+e.dimensions.huge.h+"px;"),e.maxHeight&&(a+=" max-height: "+e.maxHeight+"px;")),a+='alt="'+e.file.seoAlt+'" title="'+e.file.seoTitle+'" /></div>'):(a+='<a class="view-file-box__image-box view-file-box__image-box_label view-file-box__image-clear _image-box" href="'+e.thumb.download+'"><img class="view-file-box__image',e.dimensions.huge.w>=e.dimensions.huge.h?a+=" view-file-box__image_h":a+=" view-file-box__image_v",a+=" ",e.thumb.hasLabel||(a+=" view-file-box__image-clear"),a+=' _image _zoom-image" src="'+e.thumb.src+'" ',e.thumb.preload?a+=' data-preload="'+e.thumb.preload+'"':a+=' data-src="'+e.thumb.seo+'"',a+=" ",e.thumb.preloadMax&&(a+=' data-preload-max="'+e.thumb.preloadMax+'"'),a+=' width="'+e.dimensions.huge.w+'" height="'+e.dimensions.huge.h+'" ',"modal"===e.viewMode&&(a+=' style="min-width: '+e.dimensions.huge.w+"px; min-height: "+e.dimensions.huge.h+'px; margin-bottom: 0;"'),a+=' alt="'+e.file.seoAlt+'" title="'+this.tr("Download")+" - "+e.file.seoTitle+'" itemprop="image"/></a>'),a+='<div class="view-file-box__action',e.actionsSmallMode&&(a+=" view-file-box__action_small"),"video"===e.file.type&&(a+=" _view-file-box-video"),a+=' _action-box"><span class="view-file-box__action-holder',"modal"===e.viewMode&&e.file.editorial&&(a+=" view-file-box__action-holder_tall"),a+='">',e.isCartBtnEnabled&&(a+='<button class="view-file-box__action-item button-circle button-circle-xl button-add-to-cart',e.file.inCart&&(a+=" active"),a+=' _to-cart"title="',e.file.inCart?a+=""+this.tr("Remove from Shopping Cart"):a+=""+this.tr("Add to Shopping Cart"),a+='"></button>'),e.isFavoriteBtnEnabled&&(a+='<button class="view-file-box__action-item button-circle button-circle-xl button-add-to-favorites _to-favorites',e.file.inFavorites&&(a+=" active"),a+='"title="',e.file.inFavorites?a+=""+this.tr("Remove from Favorites"):a+=""+this.tr("Add to Favorites"),a+='"></button>'),a+='<button class="view-file-box__action-item button-circle button-circle-xl button-share _share" title="'+this.tr("Share")+'"></button>',e.isEnterpriseUser||(a+='<a class="view-file-box__action-item button-circle button-circle-xl button-download _download_comp" ',e.canDownloadComp&&(a+='href="'+e.thumb.download+'?download=true" '),a+='title="'+this.tr("Download Comp")+'"></a>'),a+='</span></div><div class="view-file-box__share _share-box"><div class="view-file-box__share-container"><div class="view-file-box__share-box"><div class="view-file-box__share-holder"><i class="view-file-box__close icon icon-close-cross icon-close-cross-white _share-close"></i><ul class="view-file-box__list"><li class="view-file-box__list-item"><a class="view-file-box__share-item button-social button-social-share _share-button" rel="nofollow" data-width="730" data-height="420" data-title="Tweet" data-social="twitter"><span class="button-circle button-circle-xl button-social-twitter"></span></a></li><li class="view-file-box__list-item"><a class="view-file-box__share-item button-social button-social-share _share-button" rel="nofollow" data-width="650" data-height="370" data-title="Facebook" data-social="facebook"><span class="button-circle button-circle-xl button-social-facebook"></span></a></li><li class="view-file-box__list-item"><a class="view-file-box__share-item button-social button-social-share _share-button" rel="nofollow" data-width="700" data-height="450" data-title="Google" data-social="google"><span class="button-circle button-circle-xl button-social-google"></span></a></li><li class="view-file-box__list-item"><a class="view-file-box__share-item button-social button-social-share _share-button" rel="nofollow" data-width="700" data-height="370" data-title="Pinterest" data-social="pinterest"><span class="button-circle button-circle-xl button-social-pinterest"></span></a></li>',e.showVKSocial&&(a+='<li class="view-file-box__list-item"><a class="view-file-box__share-item button-social button-social-share _share-button" rel="nofollow" data-width="700" data-height="370" data-title="VK" data-social="vk"><span class="button-circle button-circle-xl button-social-vk"></span></a></li>'),a+='</ul></div></div></div></div><div class="view-file-box__indicator">',e.isCartBtnEnabled&&(a+='<i class="view-file-box__indicator-item label-in-cart _label-in-cart',e.file.inCart||(a+=" hidden"),a+='" title="'+this.tr("In Shopping Cart")+'"></i>'),e.isFavoriteBtnEnabled&&(a+='<i class="view-file-box__indicator-item label-in-favorites _label-in-favorites',e.file.inFavorites||(a+=" hidden"),a+='" title="'+this.tr("Added to Favorites")+'"></i>'),a+="</div>","video"!==e.file.type&&(a+='<button class="view-file-box__lens button-zoom"></button>'),"modal"===e.viewMode&&e.file.editorial&&(a+='<div class="view-file-box__editorial-box',"video"===e.file.type&&(a+=" view-file-box__editorial-box-video"),a+='"><span class="view-file-box__editorial"><span class="view-file-box__editorial-text">'+this.tr("Editorial Use Only")+'</span><i class="view-file-box__editorial-icon icon icon-help icon-help-light-active _editorial-tooltip"></i></span></div>'),a+='<div class="view-file-box__similar-btn _thumb-find-similar"></div></div>',"page"!==e.viewMode||e.hideDescription||(a+='<p class="view-file-box__description view-file-box__description_short _file-box-description">',"video"===e.file.type?a+=s(e.file.visibleDescription)+" &mdash; "+this.tr("Video by %s",e.file.sellerName):(a+='<a class="view-file-box__description-link _zoom-image" href="'+e.thumb.download+'"><span class="view-file-box__description-text" itemprop="description">'+s(e.file.visibleDescription)+"</span> &mdash; ","vector"===e.file.type?a+=""+this.tr("Vector by %s",e.file.sellerName):a+=""+this.tr("Photo by %s",e.file.sellerName),a+="</a>"),a+="</p>"),a+="</div></div>"),"related"===e.mode&&(a+='<div data-id="'+s(e.model.id)+'"class="file-box',e.filesListFillEnabled&&(a+=" file-box_mode-fill"),a+=" related-file-box","video"===e.model.type?a+=" related-file-box_video":a+=" related-file-box_image",a+=" related-file-box_mode-"+s(e.viewMode),e.itemsData&&e.itemsData[e.model.id]&&(e.itemsData[e.model.id].isLastRow&&e.itemsData[e.model.id].row>2&&(a+=" related-file-box_last"),e.itemsData[e.model.id].isNarrow&&(a+=" related-file-box_narrow")),e.model.seeMore?a+=" related-file-box_see-more":a+=" _related-file-activate",e.titleInside&&(a+=" file-wide-box"),a+=' _related-file"',"page"!==e.viewMode&&e.sortImagesEnabled&&(a+=' style="opacity: 0"'),e.itemsData&&e.itemsData[e.model.id]&&(a+=' style="'+s(e.itemsData[e.model.id].boxStyle)+'"'),a+=">",e.filesListFillEnabled&&(a+='<div class="file-box__overlay">'),a+='<a class="file-box__link _file-box-link',e.titleInside&&(a+=" file-wide-box__link"),a+='" href="'+e.model.url+'" ',e.itemsData&&e.itemsData[e.model.id]&&(a+=' style="'+s(e.itemsData[e.model.id].holderStyle)+'"'),a+='><span class="file-box__holder"><span class="file-box-image file-box__image-holder',e.model.width>e.model.height?(a+=" file-box__image-holder_vertical",e.model.height/e.model.width<110/170&&(a+=" file-box__image-holder_limit")):e.model.width<e.model.height?(a+=" file-box__image-holder_horizontal",e.model.width/e.model.height<110/170&&(a+=" file-box__image-holder_limit")):a+=" file-box__image-holder_square",a+=' _file-box-image"><img onload="',"page"!==e.viewMode&&!e.model.seeMore&&e.sortImagesEnabled&&(a+="sortImagesByLoading(this)"),a+='"',e.lockUploadFiles&&(a+=' src="'+this.app.cdnPath+'_img/pixel.png" data-'),a+='src="',e.model.seeMore?a+=""+s(e.model.thumbs.big):e.filesListLargeEnabled?a+=""+s(e.model.thumbs.normalWide):e.filesListWideEnabled?a+=""+s(e.model.thumbs.wide):e.filesListFillEnabled?a+=""+s(e.model.thumbs.big):a+=""+s(e.model.thumbs.normal),a+='"class="file-box-image__image _file-box-image-src" alt="'+s(e.model.seoAlt)+'"',e.hideImgTitle||(a+=' title="'+s(e.model.seoTitle)+'"'),e.itemsData&&e.itemsData[e.model.id]&&(a+=' style="'+s(e.itemsData[e.model.id].imageStyle)+'"'),a+=" /></span>",e.titleInside?a+='<span class="file-wide-box__title"><span class="file-wide-box__title-link">'+s(e.model.calculatedSeoTitle)+"</span></span>":a+='<span class="file-box-image__title">'+s(e.model.calculatedSeoTitle)+" #"+s(e.model.id)+"</span>",a+='</span><span class="file-box__indicator">',e.isCartBtnEnabled&&(a+='<span class="file-box__indicator-item label label-in-cart _label-in-cart',e.model.inCart||(a+=" hidden"),a+='" title="'+this.tr("In Shopping Cart")+'"></span>'),e.isFavoriteBtnEnabled&&(a+='<span class="file-box__indicator-item label label-in-favorites _label-in-favorites',e.model.inFavorites||(a+=" hidden"),a+='" title="'+this.tr("Added to Favorites")+'"></span>'),a+='</span><span class="file-box__action',e.titleInside&&(a+=" file-wide-box__action"),a+='">',e.isCartBtnEnabled&&(a+='<button class="file-box__action-item button button-circle button-add-to-cart',e.model.inCart&&(a+=" active"),a+=' _to-cart"title="',e.model.inCart?a+=""+this.tr("Remove from Shopping Cart"):a+=""+this.tr("Add to Shopping Cart"),a+='"></button>'),e.isFavoriteBtnEnabled&&(a+='<button class="file-box__action-item button button-circle button-add-to-favorites',e.model.inFavorites&&(a+=" active"),a+=' _to-favorites"title="',e.model.inCart?a+=""+this.tr("Remove from Favorites"):a+=""+this.tr("Add to Favorites"),a+='"></button>'),e.isSimilarBtnEnabled&&(a+='<button class="file-box__action-item button button-circle '+s(e.actionButtonType)+' button-see-more-similars _to-similar"title="',"video"===e.model.type?a+=""+this.tr("Find Similar Videos"):a+=""+this.tr("Find Similar Images"),a+='"></button>'),a+="</span>",e.model.seeMore&&(a+='<span class="file-box__see-more"><i class="file-box__see-more-icon',"modal"===e.viewMode&&(a+="-hover"),a+=" icon ","video"===e.model.type?a+="file-box__see-more-icon_videos icon-see-more-videos-large":a+="file-box__see-more-icon_images icon-see-more-images-large",a+='"></i><i class="file-box__see-more-icon',"page"===e.viewMode&&(a+="-hover"),a+=" icon ","video"===e.model.type?a+="file-box__see-more-icon_videos icon-see-more-videos-large-hover":a+="file-box__see-more-icon_images icon-see-more-images-large-hover",a+='"></i><span class="file-box__see-more-text">',"image"===e.model.type?a+=""+this.tr("See More Pictures"):a+=""+this.tr("See More"),a+="</span></span>"),a+="</a>",e.filesListFillEnabled&&(a+="</div>"),a+="</div>"),a}},function(e,t,i){"use strict";var s=i(0),a=i(478),o=i(62);e.exports=a.extend({el:!1,defaultMode:"search",active:!1,template:i(573),initialize:function(e){e.mode&&(this.defaultMode=e.mode),this.listenTo(o,"Draggable:switchHelper",this.switchMode.bind(this))},serialize:function(){return this.data},clientAfterRender:function(){"search"===this.data.mode&&"wide"===this.data.thumbSize&&this.$("img").attr({style:this.data.itemsData[this.data.model.id].holderStyle})},setData:function(e){return e.mode||(e.mode=this.defaultMode),this.data=e,this.render().promise()},switchMode:function(e){if(this.active){var t=s.clone(this.data.model);s.size(s.omit(e,"mode"))<1&&(e=s.extend({},e,this.getDefaults())),this.setData(s.extend({},{model:t},e))}},getDefaults:function(){return s.result(this,"defaults")},defaults:s.noop})},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="file-preview';return e.editorial&&(a+=" file-preview_editorial"),a+='" style="width: '+s(e.width)+'px;"><video class="video-js vjs-deposit-skin"width="'+s(e.width)+'" height="'+s(e.height)+'"',e.poster&&(a+=' poster="'+s(e.poster)+'"'),e.autoplay&&(a+=" autoplay"),e.loop&&(a+=" loop"),e.preload&&(a+="  preload"),a+=">",e.files.mp4&&(a+='<source type="video/mp4" src="'+e.files.mp4+'"></source>'),e.isWebmAllowed&&e.files.webm&&(a+='<source type="video/webm" src="'+e.files.webm+'"></source>'),e.files.ogg&&(a+='<source type="video/ogg" src="'+e.files.ogg+'"></source>'),a+="</video>",e.showTitle&&e.title&&(a+='<p class="file-preview__title">'+s(e.title)+"</p>"),e.isEditorial&&(a+='<span class="file-preview__editorial file-preview__editorial_video"><i class="file-preview__editorial-icon icon icon-editorial-red"></i><span>'+this.tr("Editorial Use Only")+"</span></span>"),a+="</div>"}},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="file-preview';return e.editorial&&(a+=" file-preview_editorial"),a+='" style="width:'+s(e.width)+'px;"><img class="file-preview__img" src="'+e.thumb+'" data-preload="'+e.preload+'" />',e.showTitle&&e.title&&(a+='<p class="file-preview__title">'+s(e.title)+"</p>"),e.isEditorial&&(a+='<span class="file-preview__editorial"><i class="file-preview__editorial-icon icon icon-editorial-red"></i><span>'+this.tr("Editorial Use Only")+"</span></span>"),a+="</div>ё"}},function(e,t,i){"use strict";var s=i(478),a=i(131),o=i(493),r=i(576);e.exports=s.extend({name:"FilePreviewImage",el:!1,template:r,file:null,layout:"normal",initialize:function(){this.showTitle=this.getShowTitle()},serialize:function(){var e=a.getThumbSizes(this.file.serialize(),"huge");return{width:e.w,height:e.h,preload:this.file.get("thumbs").huge,thumb:this.file.get("thumbs")[this.layout],isEditorial:this.file.get("editorial"),showTitle:this.showTitle,title:this.file.get("title")}},clientAfterRender:function(){o(this.$("img"))},getShowTitle:function(){return this.app&&this.app.features&&this.app.features.isFeatureOnValue("Show file title in preview")}})},,,,function(e,t){e.exports=function(e){var t,i,s='<div class="modal-container"><div class="modal-container__wrapper _overlay-close"><div class="file-view-modal file-view-modal_admin _modal '+("undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}))(e.classNames)+'"><div class="file-view file-view_bg-black _file-view-container"><div class="file-view__title-box _title"></div><div class="file-view__left"><div class="file-view__thumb _file-view-thumb"></div></div><div class="file-view__right"><div class="file-view__rating _rating"></div></div><div class="file-view__bottom-wrapper _file-view-bottom"></div></div><div class="file-nav">';return e.displayLeftNavigation&&(s+='<i class="file-nav__item file-nav__item_left button-nav button-nav-left"></i>'),e.displayRightNavigation&&(s+='<i class="file-nav__item file-nav__item_right button-nav button-nav-right"></i>'),s+='</div><div class="file-view__btn-close _close"><i class="file-view__btn-close-icon icon icon-close-cross icon-close-cross-white _close"></i></div></div></div></div>'}},function(e,t,i){"use strict";var s=i(0),a=i(478),o=i(494),r=i(512),l=i(511),n=i(11).relatedTabs,c=i(510),h=i(509),d=i(508);e.exports=a.extend({name:"FileViewBottomModalAdmin",el:!1,template:c,prepareRender:function(){this.insertViews([new r({scheme:this.getTabs(),template:h}),new o({app:this.app,model:this.model,viewMode:"modal",template:d})])},serialize:function(){return{opacity:""}},clientAfterRender:function(){this.$("._related").filter('[data-tab="info"]').removeClass("hidden")},getTabs:function(){return new l([{key:"info",enabled:!0,label:s.findWhere(n,{key:"info",type:"all"}).label}])}})},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="file-rating';e.formLocked&&(a+=" file-rating_locked"),a+='"><div class="file-rating__buttons">';var o=e.buttons;if(o)for(var r,l=-1,n=o.length-1;l<n;)r=o[l+=1],a+='<button class="file-rating__button button button-black-blue _rate',e.attrs.rate===r&&(a+=" active"),a+='" data-value="'+s(r)+'">'+s(r)+"</button>";return a+='</div><div class="file-view__info-wrapper"><div class="file-view__info"><div class="file-view__info-line"><span class="file-view__info-name">'+this.tr("Rate")+':</span><span class="file-view__info-value">'+s(e.attrs.rate||"-")+'</span></div><div class="file-view__info-line"><span class="file-view__info-name">'+this.tr("Actor")+':</span><span class="file-view__info-value">'+s(e.attrs.actor||"-")+'</span></div><div class="file-view__info-line"><span class="file-view__info-name">'+this.tr("Date")+':</span><span class="file-view__info-value">'+s(e.attrs.date||"-")+"</span></div></div></div></div>"}},function(e,t,i){"use strict";var s=i(0),a=i(9);e.exports=a.extend({url:"FileRating",defaults:{fileId:null,rate:null,actor:null,date:null},parse:function(e){return e.errors?{}:s.pick(e.data,s.keys(this.defaults))}})},function(e,t,i){"use strict";var s=i(0),a=i(478),o=i(584),r=i(482),l=i(481),n=i(583),c=s.range(l.numDigit1,l.numDigit9).concat(l.numDigit9);e.exports=a.extend({name:"FileRating",el:!1,template:n,keys:s.range(l.digit1,l.digit9).concat(l.digit9),events:{"click ._rate":"onRateClick"},globals:{keyup:"onGlobalKeyUp"},formLocked:!1,initialize:function(e){void 0===e&&(e={}),this.model=e.model||new o({},{app:this.app}),this.listenTo(this.model,{"change:rate":this.render.bind(this),request:this.onModelRequest.bind(this),sync:this.onModelSynch.bind(this)})},prepareRender:function(){return!s.isNull(this.model.get("fileId"))},serialize:function(){return{buttons:this.keys.map(function(e,t){return t+1}),attrs:this.model.serialize(),formLocked:this.formLocked}},setFile:function(e){this.model.resetToDefaults(),this.model.set({fileId:e}),this.model.fetch()},saveRate:function(e){this.model.save({rate:e},{success:this.onRateSuccess.bind(this)})},showServiceDialog:function(e){new r({app:this.app,title:this.tr("Service Message"),message:s.map(e,function(e){return e.error_message}).join(" ")}).show()},onRateClick:function(e){this.saveRate(parseInt(e.currentTarget.dataset.value,10))},getRateFromKeyCode:function(e){var t=this.keys.indexOf(e);return~t?t+1:c.indexOf(e)+1},onGlobalKeyUp:function(e){var t=this.getRateFromKeyCode(e.keyCode);t>0&&this.saveRate(t)},onModelRequest:function(){this.formLocked=!0,this.onRequestCallback()},onModelSynch:function(){var e=this;this.formLocked=!1,this.render().promise().done(function(){e.onSyncCallback()})},onRateSuccess:function(e,t){t.errors?(this.showServiceDialog(t.errors),this.model.resetToDefaults(s(this.model.defaults).keys().omit("fileId"))):t.result&&this.onRateCallback(t.data)},onRequestCallback:s.noop,onSyncCallback:s.noop,onRateCallback:s.noop})},function(e,t,i){"use strict";var s=i(0),a=i(513),o=i(504),r=i(503),l=i(585),n=i(582),c=i(581),h=i(507);e.exports=a.extend({name:"FileViewModalAdmin",el:!1,template:c,initialize:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];a.prototype.initialize.apply(this,t),this.setViews({"._file-view-thumb":new o({app:this.app,model:this.model,viewMode:"modal",zoomShowCallback:this.zoomShowCallback.bind(this),zoomHideCallback:this.zoomHideCallback.bind(this),zoomNavCallback:this.zoomNavCallback.bind(this),zoomLeftCallback:this.zoomLeftCallback.bind(this),zoomRightCallback:this.zoomRightCallback.bind(this)}),"._title":new r({app:this.app,model:this.model,template:h,viewMode:"modal"}),"._rating":new l({app:this.app,onRateSuccess:this.onRateSuccess.bind(this)}),"._file-view-bottom":new n({app:this.app,model:this.model})})},show:function(e){this.loadRating(e.model.get("id")),this.injectModel(e.model),a.prototype.show.call(this,e)},injectModel:function(e){s.each(this.views,function(t){"FileRating"!==t.name&&(t.model=e)})},loadRating:function(e){this.getView("._rating").setFile(e)},onRateSuccess:function(){this.onRightNavigation()}})},function(e,t){e.exports=function(e){return'<div class="file-view__loading hidden _loader"><div class="file-view__loading-icon icon icon-loader"><i class="part-circle1"></i><i class="part-circle2"></i><i class="part-circle3"></i></div></div>'}},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="modal-container"><div class="modal-container__wrapper _overlay-close"><div class="file-view-modal _modal '+s(e.classNames)+'"><div class="file-view-notice _notice"></div><div class="file-view _file-view-container '+s(e.fileViewClasses)+'"><div class="file-view__title-box _title"></div><div class="file-view__left"><div class="file-view__thumb _file-view-thumb"></div><div class="file-view__links"><div class="file-view__find-similar-box _find-similar"></div><div class="file-view__design-box _design"></div></div></div><div class="file-view__right"><div class="file-view__info-box _file-view-info"></div><div class="file-view__download-method _download-method-selector"></div><div class="file-view__price-table-wrapper _price-table"></div></div><div class="file-view__bottom-wrapper _file-view-bottom"></div></div>';return e.isAvailableEnterpriseOnly&&(a+='<div class="file-view-lock"><div class="file-view-lock__wrap"><div class="file-view-lock__content"><span class="file-view-lock__text">'+this.tr("This file is available under Enterprise account only")+'</span><a class="file-view-lock__link button button-5xl button-watery button-blue" href="'+this.app.makeUrl("enterprise")+'" target="_blank">'+this.tr("Enterprise Solution")+"</a></div></div></div>"),a+='<div class="file-nav">',e.displayLeftNavigation&&(a+='<i class="file-nav__item file-nav__item_left button-nav button-nav-left"></i>'),e.displayRightNavigation&&(a+='<i class="file-nav__item file-nav__item_right button-nav button-nav-right"></i>'),a+='</div><a class="file-view__btn-back _back"><i class="license-wizard__back-arrow icon arrow-back-white _back"></i>'+this.tr("Back")+'</a><div class="file-view__btn-close _close"><i class="file-view__btn-close-icon icon icon-close-cross icon-close-cross-white _close"></i></div></div></div></div>'}},function(e,t,i){"use strict";e.exports=function(e){var t=function(e,t){for(var i=0,s=e.length;i<s;i++)if(e[i]==t)return!0;return!1},i=function(e,i){for(var s=document.querySelectorAll(i),a=e.parentNode;a&&!t(s,a);)a=a.parentNode;return a};e.removeAttribute("onload");var s=i(e,".related-file-box");if(s){var a=s.parentNode;if(a){var o=i(a,".file-view__related");if(o){var r=window.rc[["portfolio","similar","model","series"].indexOf(o.getAttribute("data-tab"))]++;s.setAttribute("data-loaded",r+1);var l=o.querySelectorAll("[data-loaded]").length;if(l?a.insertBefore(s,a.childNodes[l-1]):a.insertBefore(s,a.firstChild),s.style.opacity=1,l===a.querySelectorAll("._related-file").length-1){var n=a.querySelector(".related-file-box_see-more");n&&(n.style.opacity=1)}}}}}},,function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="file-view__related file-view__related_categories related-item hidden _related" data-tab="'+s(e.relatedMode)+'"><div class="related-item__content related-item__content_category" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><ul class="related-item__list"><li class="related-item__list-item _poster-box"></li>';if(e.file.categories.length){var o=e.file.categories;if(o)for(var r,l=-1,n=o.length-1;l<n;)a+='<li class="related-item__list-item _item"><a class="related-item__category" href="'+(r=o[l+=1]).url+'" itemprop="url"style="background-image: url('+s(this.app.cdnPath)+"_img/categories/"+s(r.alias)+'.jpg)"><span class="related-item__category-text" itemprop="title">'+this.tr(r.name)+"</span></a></li>"}return a+="</ul></div></div>"}},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="file-view__related hidden _related" data-tab="'+s(e.relatedMode)+'"><div class="file-view__related-nav file-view__related-nav_compact file-view__related-nav_left _nav-left';e.sliderShift||(a+=" hidden"),a+='"><i class="file-view__related-nav-icon icon icon-nav-arrow-left-white-big"></i></div><div class="file-view__related-files files-list files-list_related _related-files-box',(e.filesListWideEnabled||e.filesListLargeEnabled)&&(a+=" files-list_related-wide"),a+='"',e.sliderShift&&(a+=' style="margin-left: '+s(e.sliderShift)+'px"'),a+=">";var o=e.items;if(o)for(var r,l=-1,n=o.length-1;l<n;)a+='<div data-id="'+s((r=o[l+=1]).id)+'"class="file-box',e.filesListFillEnabled&&(a+=" file-box_mode-fill"),a+=" related-file-box","video"===r.type?a+=" related-file-box_video":a+=" related-file-box_image",a+=" related-file-box_mode-"+s(e.viewMode),e.itemsData&&e.itemsData[r.id]&&(e.itemsData[r.id].isLastRow&&e.itemsData[r.id].row>2&&(a+=" related-file-box_last"),e.itemsData[r.id].isNarrow&&(a+=" related-file-box_narrow")),r.seeMore?a+=" related-file-box_see-more":a+=" _related-file-activate",e.titleInside&&(a+=" file-wide-box"),a+=' _related-file"',"page"!==e.viewMode&&e.sortImagesEnabled&&(a+=' style="opacity: 0"'),e.itemsData&&e.itemsData[r.id]&&(a+=' style="'+s(e.itemsData[r.id].boxStyle)+'"'),a+=">",e.filesListFillEnabled&&(a+='<div class="file-box__overlay">'),a+='<a class="file-box__link _file-box-link',e.titleInside&&(a+=" file-wide-box__link"),a+='" href="'+r.url+'" ',e.itemsData&&e.itemsData[r.id]&&(a+=' style="'+s(e.itemsData[r.id].holderStyle)+'"'),a+='><span class="file-box__holder"><span class="file-box-image file-box__image-holder',r.width>r.height?(a+=" file-box__image-holder_vertical",r.height/r.width<110/170&&(a+=" file-box__image-holder_limit")):r.width<r.height?(a+=" file-box__image-holder_horizontal",r.width/r.height<110/170&&(a+=" file-box__image-holder_limit")):a+=" file-box__image-holder_square",a+=' _file-box-image"><img onload="',"page"!==e.viewMode&&!r.seeMore&&e.sortImagesEnabled&&(a+="sortImagesByLoading(this)"),a+='"',e.lockUploadFiles&&(a+=' src="'+this.app.cdnPath+'_img/pixel.png" data-'),a+='src="',r.seeMore?a+=""+s(r.thumbs.big):e.filesListLargeEnabled?a+=""+s(r.thumbs.normalWide):e.filesListWideEnabled?a+=""+s(r.thumbs.wide):e.filesListFillEnabled?a+=""+s(r.thumbs.big):a+=""+s(r.thumbs.normal),a+='"class="file-box-image__image _file-box-image-src" alt="'+s(r.seoAlt)+'"',e.hideImgTitle||(a+=' title="'+s(r.seoTitle)+'"'),e.itemsData&&e.itemsData[r.id]&&(a+=' style="'+s(e.itemsData[r.id].imageStyle)+'"'),a+=" /></span>",e.titleInside?a+='<span class="file-wide-box__title"><span class="file-wide-box__title-link">'+s(r.calculatedSeoTitle)+"</span></span>":a+='<span class="file-box-image__title">'+s(r.calculatedSeoTitle)+" #"+s(r.id)+"</span>",a+='</span><span class="file-box__indicator">',e.isCartBtnEnabled&&(a+='<span class="file-box__indicator-item label label-in-cart _label-in-cart',r.inCart||(a+=" hidden"),a+='" title="'+this.tr("In Shopping Cart")+'"></span>'),e.isFavoriteBtnEnabled&&(a+='<span class="file-box__indicator-item label label-in-favorites _label-in-favorites',r.inFavorites||(a+=" hidden"),a+='" title="'+this.tr("Added to Favorites")+'"></span>'),a+='</span><span class="file-box__action',e.titleInside&&(a+=" file-wide-box__action"),a+='">',e.isCartBtnEnabled&&(a+='<button class="file-box__action-item button button-circle button-add-to-cart',r.inCart&&(a+=" active"),a+=' _to-cart"title="',r.inCart?a+=""+this.tr("Remove from Shopping Cart"):a+=""+this.tr("Add to Shopping Cart"),a+='"></button>'),e.isFavoriteBtnEnabled&&(a+='<button class="file-box__action-item button button-circle button-add-to-favorites',r.inFavorites&&(a+=" active"),a+=' _to-favorites"title="',r.inCart?a+=""+this.tr("Remove from Favorites"):a+=""+this.tr("Add to Favorites"),a+='"></button>'),e.isSimilarBtnEnabled&&(a+='<button class="file-box__action-item button button-circle '+s(e.actionButtonType)+' button-see-more-similars _to-similar"title="',"video"===r.type?a+=""+this.tr("Find Similar Videos"):a+=""+this.tr("Find Similar Images"),a+='"></button>'),a+="</span>",r.seeMore&&(a+='<span class="file-box__see-more"><i class="file-box__see-more-icon',"modal"===e.viewMode&&(a+="-hover"),a+=" icon ","video"===r.type?a+="file-box__see-more-icon_videos icon-see-more-videos-large":a+="file-box__see-more-icon_images icon-see-more-images-large",a+='"></i><i class="file-box__see-more-icon',"page"===e.viewMode&&(a+="-hover"),a+=" icon ","video"===r.type?a+="file-box__see-more-icon_videos icon-see-more-videos-large-hover":a+="file-box__see-more-icon_images icon-see-more-images-large-hover",a+='"></i><span class="file-box__see-more-text">',"image"===r.type?a+=""+this.tr("See More Pictures"):a+=""+this.tr("See More"),a+="</span></span>"),a+="</a>",e.filesListFillEnabled&&(a+="</div>"),a+="</div>";return a+='</div><div class="file-view__related-nav file-view__related-nav_compact file-view__related-nav_right _nav-right',e.hasNavigation||(a+=" hidden"),a+='"><i class="file-view__related-nav-icon icon icon-nav-arrow-right-white-big"></i></div>',e.seeMore&&e.seeMore.display&&(a+='<a class="file-view__see-more-link link-blue-on-dark" href="'+e.seeMore.url+'">',"image"===e.seeMore.type?a+=""+this.tr("See More Pictures"):a+=""+this.tr("See More"),a+='<i class="file-view__see-more-icon icon icon-link-blue"></i></a>'),a+="</div>"}},function(e,t,i){"use strict";var s=i(0),a=i(23),o=i(48),r=i(129);e.exports=o.extend({url:"FileViewRelated",model:r,initialize:function(e,t){this.store=s.clone(t)},getQueryParams:function(){return s.clone(this.store)},parse:function(e,t){return e.result=a.beautifyApiResponse(e.items||e.result||[]),t.parser="parseFromSearch",o.prototype.parse.call(this,e.result,t)}})},,function(e,t,i){"use strict";var s=i(1)(i(3)),a=i(0),o=i(478),r=i(594),l=i(129),n=i(606),c=i(11),h=i(571),d=i(600),u=i(481),p=i(570);e.exports=o.extend({name:"RelatedContentDefault",el:!1,relatedMode:void 0,viewMode:"modal",events:{"click ._item":"onSeriesBoxClick","contextmenu ._item":"onSeriesBoxCustomClick","mouseup ._item":"onSeriesBoxCustomClick"},initialize:function(){this.file=new l({id:this.model.get("id")},{app:this.app}),this.listenTo(this.file,"sync",this.render),this.file.fetch({parser:"parseFromFile"}),this.series=new n(a.extend({},a.findWhere(d.series,{name:"curatedCollectionPoster"}),{lang:this.app.lang}),{app:this.app}),this.listenTo(this.series,"sync",this.render),this.series.fetch()},prepareRender:function(){var e=this;this.insertView("._poster-box",new r({app:this.app,template:p,model:this.series,onSeriesBoxClick:function(t){return e.onSeriesBoxClick(t)},onSeriesBoxCustomClick:function(t){return e.onSeriesBoxCustomClick(t)}}))},serialize:function(){var e=a.clone(this.file.attributes);return e.categories=this.prepareCategories(e.categories),{file:e,relatedMode:this.relatedMode}},clientAfterRender:function(){this.clientAfterRenderCallback()},trackClick:function(e){this.app.observer.broadcast("Track:UE:File:CategoriesClick",(0,s.default)({mode:"modal"},e))},trackNewTabClick:function(e){this.app.observer.broadcast("Track:UE:ContextMenu:Open",{source:"Categories",target:{target:"search"},params:{mode:"modal",type:"collection",text:e.text,position:e.position}})},toTracking:function(){return[this.series.serialize()].concat(this.prepareCategories(this.file.get("categories")))},prepareCategories:function(e){var t=this,i=[],s=a.clone(e)||[],o=e?3-e.length:3,r=a.clone(e)||[];return o>0&&(a.each(e||[],function(e){h[e]&&a.each(h[e].similar,function(e){s.push(e)})}),r=a.difference(a.uniq(s),e),r=a.union(e,a.shuffle(r).slice(0,o))),a.each(r||[],function(e){var s=a.findWhere(c.categories,{id:e});s&&i.push(a.extend({},s,{url:t.app.makeUrl({route:"Search",category:e},{absolute:!0})}))}),i},onSeriesBoxClick:function(e){var t=this.$(e.currentTarget),i={position:t.index()+1,text:t.text()};e.ctrlKey||e.shiftKey||e.metaKey?this.trackNewTabClick(i):this.trackClick(i)},onSeriesBoxCustomClick:function(e){if([u.rightMouse,u.middleMouse].includes(e.which)){var t=this.$(e.currentTarget),i={position:t.index()+1,text:t.text()};this.trackNewTabClick(i)}},clientAfterRenderCallback:a.noop})},function(e,t,i){"use strict";var s=i(1)(i(3)),a=i(0),o=i(16),r=i(478),l=i(546),n=i(595),c=i(512),h=i(494),d=i(593),u=i(511),p=i(127),f=i(62),g=i(11),m=i(510),b=i(509),_=i(508),v=i(592),w=i(591);e.exports=r.extend({name:"FileViewBottomModal",el:!1,template:m,viewMode:"modal",related:["models","series","similar"],relatedCounter:0,isCartBtnEnabled:!0,isFavoriteBtnEnabled:!0,categories:!0,initialize:function(){var e=this;a.each(this.related,function(t){e[t]=new d([],{app:e.app,relatedTo:"models"===t?"model":t}),e.listenTo(e[t],"sync",e.checkRelated)}),this.tabs=this.makeFileViewModalTabs()},prepareRender:function(){var e=this,t=this.app.features.isFeatureOnValue("File View Modal Big Related"),i=[new c({scheme:this.tabs,template:b,changeTabCallback:function(){var t=e.tabs.getActiveTab().get("key");e.showActiveTab(),e.changeTabCallback(),e.trackFilesImpression(t)}}),new l({template:v,app:this.app,relatedMode:"model",model:this.model,viewMode:this.viewMode,displaySeeMore:!0,collection:this.models,clientAfterRenderCallback:this.tabsAfterRender.bind(this,"models"),onFileClickCallback:this.onRelatedFileClick.bind(this),isCartBtnEnabled:this.isCartBtnEnabled,isFavoriteBtnEnabled:this.isFavoriteBtnEnabled,filesListFillEnabled:t}),new l({template:v,app:this.app,relatedMode:"series",model:this.model,viewMode:this.viewMode,displaySeeMore:!0,collection:this.series,clientAfterRenderCallback:this.tabsAfterRender.bind(this,"series"),onFileClickCallback:this.onRelatedFileClick.bind(this),isCartBtnEnabled:this.isCartBtnEnabled,isFavoriteBtnEnabled:this.isFavoriteBtnEnabled,filesListFillEnabled:t}),new l({template:v,app:this.app,relatedMode:"similar",model:this.model,viewMode:this.viewMode,displaySeeMore:!0,collection:this.similar,clientAfterRenderCallback:this.tabsAfterRender.bind(this,"similar"),onFileClickCallback:this.onRelatedFileClick.bind(this),isCartBtnEnabled:this.isCartBtnEnabled,isFavoriteBtnEnabled:this.isFavoriteBtnEnabled,filesListFillEnabled:t}),new n({template:w,app:this.app,relatedMode:"categories",model:this.model,viewMode:this.viewMode,clientAfterRenderCallback:this.tabsAfterRender.bind(this,"categories")})];this.app.features.isFeatureOnValue("File View Classic")&&i.push(new h({viewMode:this.viewMode,template:_,app:this.app,model:this.model})),this.resetRelated(),this.setViews({"":i})},serialize:function(){return{opacity:0}},clientAfterRender:function(){this.$("._related").addClass("hidden"),this.toggleLoader(!0),this.setRelatedStore(this.model.get("id")),window.rc=[0,0,0,0]},setRelatedStore:function(e){var t=this;return a.each(this.related,function(i){t[i].store.id=e}),o.$.when(a.map(this.related,function(e){return t[e].fetch()}))},resetRelated:function(){var e=this;a.each(this.related,function(t){return e[t].reset()})},checkRelated:function(){var e=this;if(2==this.relatedCounter++){var t=0;this.toggleLoader(!1),this.el.style.opacity="",this.tabs.findWhere({key:"similar"}).set({active:!1}),a.each(this.related,function(t){e.tabs.findWhere({key:"models"===t?"model":t}).set({enabled:!!e[t].length},{silent:!0})}),this.tabs.where({enabled:!0}).forEach(function(i,s){!e.alreadySetDefaultIndex&&e.model.get("lightfield")&&("model"!==i.get("key")&&"series"!==i.get("key")||(t=s,e.alreadySetDefaultIndex=!0))}),this.tabs.changeActiveTab(t),this.showTab(this.tabs.getActiveTab().get("key")),this.onRelatedReadyCallback(),this.relatedCounter=0}},changeTabCallback:function(){this.app.observer.broadcast("Track:UE:FileViewModal:TabChange",{file:this.model.serialize(),tab:this.tabs.getActiveTab().serialize()}),this.onChangeTabCallback()},showTab:function(e){this.$("._related").addClass("hidden").filter('[data-tab="'+this.tabs.getActiveTab().get("key")+'"]').removeClass("hidden")},showActiveTab:function(){var e=this.tabs.getActiveTab().get("key");this.showTab(e),p.mobileMode()&&f.fire("Modal:CheckSize")},tabsAfterRender:function(e){(this[e]||this[e].length>0)&&this.showActiveTab()},makeFileViewModalTabs:function(){var e=[{key:"similar",enabled:!1,label:a.findWhere(g.relatedTabs,{key:"similar",type:this.model.get("type")}).label},{key:"model",enabled:!1,label:a.findWhere(g.relatedTabs,{key:"model",type:"all"}).label},{key:"series",enabled:!1,label:a.findWhere(g.relatedTabs,{key:"series",type:"all"}).label},{key:"categories",enabled:!0,label:a.findWhere(g.relatedTabs,{key:"categories",type:"all"}).label}];return this.app.features.isFeatureOnValue("File View Classic")&&e.push({key:"info",enabled:!0,label:a.findWhere(g.relatedTabs,{key:"info",type:"all"}).label}),new u(e)},trackFilesImpression:function(e){var t=this.findViews("RelatedFilesList").filter(function(t){return t.relatedMode===e})[0];t&&t.trackImpression()},updateFileInfo:function(e){var t=this.findView("FileInfo");t.model.get("id")!==e.get("id")&&((0,s.default)(t,{model:e}),t.render())},onRelatedFileClick:function(e,t){e.preventDefault(),e.stopPropagation(),t&&(this.app.observer.broadcast("Track:UE:FileViewModal:Open",{file:t.serialize(),route:"FileViewModal",view:this.name}),this.app.features.isFeatureOnValue("File View Classic")&&this.updateFileInfo(t),this.onRelatedClickCallback(t))},toggleLoader:function(){},onChangeTabCallback:function(){},onRelatedClickCallback:function(){},onRelatedReadyCallback:function(){}})},function(e,t,i){"use strict";(function(t){var s=i(1)(i(3)),a=i(0),o=i(478),r=i(513),l=i(596),n=i(568),c=i(504),h=i(503),d=i(494),u=i(536),p=i(532),f=i(524),g=i(555),m=i(553),b=i(134),_=i(23),v=i(127),w=i(589),y=i(502),k=i(588),x=i(551),C=i(507),S=i(587);e.exports=r.extend({name:"FileViewModalBuyer",el:!1,template:k,showDownloadButtonInZoomMode:!1,events:(0,s.default)({},r.prototype.events,{"click ._back":"onBackBtnClick"}),initialize:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];r.prototype.initialize.apply(this,t),this.userPlansManager=new b({fileTypes:[this.model.get("type")]},{app:this.app})},prepareRender:function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];if(r.prototype.prepareRender.apply(this,i),t.browser&&(window.rc=[0,0,0,0],window.sortImagesByLoading=window.sortImagesByLoading||w),this.userPlansManager.set({fileTypes:[this.model.get("type")]}),this.isLicenseWizardOpen()){var a=this.onWindowResize.bind(this);this.setViews({"._modal":new f({app:this.app,files:[this.model],onLicenseSuccessCallback:this.onLicenseSuccess.bind(this),clientAfterRender:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];f.prototype.clientAfterRender.apply(this,t),a()}})})}else this.setViews({"._notice":new n({template:x,model:this.model}),"._file-view-thumb":new c({viewMode:"modal",model:this.model,showDownloadButtonInZoomMode:this.showDownloadButtonInZoomMode,zoomCallback:this.zoomCallback.bind(this),zoomShowCallback:this.zoomShowCallback.bind(this),zoomHideCallback:this.zoomHideCallback.bind(this),zoomNavCallback:this.zoomNavCallback.bind(this),zoomLeftCallback:this.zoomLeftCallback.bind(this),zoomRightCallback:this.zoomRightCallback.bind(this),app:this.app}),"._find-similar":new g({app:this.app,file:this.model,viewMode:"modal"}),"._design":new m({app:this.app,model:this.model,viewMode:"modal"}),"._title":new h({template:C,viewMode:"modal",model:this.model}),"._file-view-info":this.getInfoView(),"._download-method-selector":new u({app:this.app,viewMode:"modal",userPlansManager:this.userPlansManager}),"._file-view-bottom":[new l({app:this.app,model:this.model,onRelatedClickCallback:this.setRelated.bind(this),onChangeTabCallback:this.onChangeBottomTab.bind(this),onRelatedReadyCallback:this.onRelatedReady.bind(this),toggleLoader:this.toggleLoader.bind(this)}),new o({el:!1,template:S,name:"RelatedLoader"})]});this.setupPriceTable()},serialize:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var a=r.prototype.serialize.apply(this,t);return(0,s.default)({},a,{isLicenseWizardOpen:this.isLicenseWizardOpen(),isAvailableEnterpriseOnly:this.isAvailableEnterpriseOnly(),similarUrl:this.model.makeRelatedUrl({relatedTo:"similar"}),classNames:_.classNames((0,s.default)({},this.classes,{"file-view-modal_wizard":this.isLicenseWizardOpen(),"file-view-modal_lock":this.isAvailableEnterpriseOnly()})),fileViewClasses:_.classNames({hidden:this.isLicenseWizardOpen(),"file-view_bg-black":!0,"file-view_has-methods":this.hasMethods(),"file-view_classic":this.app.features.isFeatureOnValue("File View Classic")})})},clientAfterRender:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];r.prototype.clientAfterRender.apply(this,t),this.updateFileInfo()},getInfoView:function(){return this.app.features.isFeatureOnValue("File View Classic")?[]:new d({model:this.model,app:this.app,viewMode:"modal"})},setupPriceTable:function(){this.setView("._price-table",new p({app:this.app,file:this.model,viewMode:"modal",signUpModalAllowed:!0,userPlansManager:this.userPlansManager,onLicenseBtnClick:this.openLicenseWizard.bind(this),sizeChangedCallback:this.sizeChangedCallback.bind(this)}))},hide:function(e){return this.isLicenseWizardOpened=!1,r.prototype.hide.call(this,e)},setRelated:function(e){var t=this,i=this.findView("ProductsTooltip");this.$("._file-view-container").toggleClass("file-view-video-huge",e.get("hasHugeVideoThumb")),a.each(a.omit(this.views,"._file-view-bottom"),function(i){i.model&&i.model.get("id")===e.get("id")||("PriceTable"===i.name?(0,s.default)(i,{file:e}):(0,s.default)(i,{model:e}),i.render().promise().then(function(){t.setModalHeight(),v.mobileMode()&&t.app.observer.fire("Modal:CheckSize"),t.isFullScreenMode()&&window.scrollTo(0,0)}))}),y.write({itemId:e.get("id")},{app:this.app}),this.model=e,i&&i.detach(),this.app.observer.broadcast("Track:UE:FileViewModal:RelatedClick",{file:this.model,view:this.name})},updateFileInfo:function(){this.getView("FileViewBottomModal")&&this.getView("FileViewBottomModal").updateFileInfo(this.model)},openLicenseWizard:function(){return this.isLicenseWizardOpened=!0,this.render()},closeLicenseWizard:function(){return this.isLicenseWizardOpened=!1,this.render()},onLicenseSuccess:function(e,t,i,s){var a=e[0]&&e[0].transaction;if(a){var o=(this.model.get("licensed")||[]).slice();o.push(a),this.model.set({licensed:o})}this.closeLicenseWizard(),this.onLicenseSuccessCallback.call(this,e,t,i,s)},sizeChangedCallback:function(){this.setModalHeight()},isLicenseWizardOpen:function(){return!!this.isLicenseWizardOpened},hasMethods:function(){return!a.isEmpty(this.userPlansManager.get("available"))},isAvailableEnterpriseOnly:function(){return!this.app.user.isEnterprise()&&this.model.isAvailableEnterpriseOnly()},getContainerHeight:function(e){var t=e;return this.isLicenseWizardOpen()&&(t="._wizard"),this.$(a.isUndefined(t)?"._file-view-container":t).outerHeight()+this.$("._notice").outerHeight()},zoomCallback:function(e){this.canHideModal=!1,this.findView("ZoomModal").hide(),this.app.user.isLoggedIn()?this.findView("FileViewThumb").showDownloadButtonInZoomMode=!1:this.findView("PriceTable").onDownloadClick(e)},toggleLoader:function(e){this.findView("RelatedLoader").$el.toggleClass("hidden",!e)},trackModalShow:function(){this.app.observer.broadcast("Track:UE:FileViewModal:Show",{id:this.model.get("id"),file:this.model.toJSON(),query:this.app.store.get("SearchQuery").get("query")+"-"+this.model.get("id"),sorting:this.app.store.get("SearchQuery").get("sorting"),activeTableRow:this.findView("PriceTable")&&this.findView("PriceTable").getActiveTableRowData(),subtype:"total",view:this.name}),this.app.observer.broadcast("Track:UE:FileViewModal:DownloadShow")},onChangeBottomTab:function(){this.onChangeRelatedTabCallback()},onBackBtnClick:function(){this.closeLicenseWizard()},onRelatedReady:function(){this.zoomModalEnabled||this.app.observer.broadcast("Track:UE:FileViewModal:Ready",{file:this.model,view:this.name}),this.onRelatedReadyCallback()},onRelatedReadyCallback:function(){},onLicenseSuccessCallback:function(){},onChangeRelatedTabCallback:function(){}})}).call(this,i(6))},function(e,t,i){"use strict";(function(e){var t=i(0),s=i(16),a=i(129),o=i(597),r=i(586),l=i(502),n=i(481),c=i(7)(e);e.exports={asyncFileViewModalLoad:!0,enableListThroughNavigation:!0,enableKeyboardNavigation:!0,storeFileViewModalAsLastViewed:!1,shouldEnableAdminModal:!1,canHideModal:!1,zoomModalEnabled:!1,showDownloadButtonInZoomMode:!1,onKeyUpModal:function(e){this.enableListThroughNavigation&&this.isOwnModalOpened()&&this.canSwitch()&&(e.keyCode===n.left?this.navigatePrev():e.keyCode===n.right&&this.navigateNext())},canSwitch:function(){return"body"===document.activeElement.tagName.toString().toLowerCase()},navigatePrev:function(){var e=this.getPrevItem();this.currFile.id===e.id?(this.app.observer.broadcast("Track:UE:FileViewModal:Edge",{direction:"prev"}),this.leftEdgeCallback()):(this.app.observer.broadcast("Track:UE:FileViewModal:Navigate",{direction:"prev",file:e.toJSON(),sourceFile:this.currFile}),this.showFileViewModal(e.id))},navigateNext:function(){var e=this.getNextItem();e&&(this.currFile.id===e.id?(this.app.observer.broadcast("Track:UE:FileViewModal:Edge",{direction:"next"}),this.rightEdgeCallback()):(this.app.observer.broadcast("Track:UE:FileViewModal:Navigate",{direction:"next",file:e.toJSON(),sourceFile:this.currFile}),this.showFileViewModal(e.id)))},getPrevItem:function(){var e=this.getFileIndex();return this.collection.at(Math.max(e-1,0))},getNextItem:function(){var e=this.getFileIndex();return this.collection.at(Math.min(e+1,this.collection.length-1))},isAnyModalOpened:function(){return this.app.store.get("FileViewModal")&&this.app.store.get("FileViewModal").isOpen()},isOwnModalOpened:function(){return this.isAnyModalOpened()&&this.app.store.get("FileViewModal").openerCID===this.cid},getFileIndex:function(e){return void 0===e&&(e=this.currFile),this.collection.indexOf(this.collection.get(e.id))},fetchFile:function(e,i,s){var o=this;return this.currFile=new a({id:e},{app:this.app,validate:!0}),this.currFile.fetch({parser:"parseFromFile"}).then(function(){t.isFunction(s)&&s.call(o,o.currFile,i)})},isNeedToMakeNewModal:function(){return!this.app.store.get("FileViewModal")||this.app.store.get("FileViewModal").openerCID!==this.cid},initFileViewModal:function(e){var i,s=this;i=t.result(this,"shouldEnableAdminModal")?new r({app:this.app,model:e,canHideModal:this.canHideModal,zoomModalEnabled:this.zoomModalEnabled,tuneScroll:this.tuneScroll.bind(this),onLeftNavigation:this.navigatePrev.bind(this),onRightNavigation:this.navigateNext.bind(this),onHideCallback:function(){s.currFile=null,s.app.store.unlink("FileViewModal"),s.app.observer.fire("ToTopButton:Toggle",{state:!0})}}):new o({model:e,app:this.app,tuneScroll:this.tuneScroll.bind(this),canHideModal:this.canHideModal,zoomModalEnabled:this.zoomModalEnabled,overlayConfig:this.getOverlayConfig(),trackingInfo:this.getTrackingInfo?this.getTrackingInfo():null,showDownloadButtonInZoomMode:this.showDownloadButtonInZoomMode,onLeftNavigation:this.navigatePrev.bind(this),onRightNavigation:this.navigateNext.bind(this),onLicenseSuccessCallback:this.onFileViewLicenseSuccessCallback.bind(this),onHideCallback:function(){s.currFile=null,s.app.store.unlink("FileViewModal"),s.app.observer.fire("ToTopButton:Toggle",{state:!0})},onRelatedReadyCallback:function(){return s.trigger("relatedReady")}}),this.app.store.link("FileViewModal",i),this.app.store.get("FileViewModal").openerCID=this.cid},toggleViewModalNavigation:function(e){var t=this.pagerModel?this.pagerModel.get("page"):1,i=this.pagerModel?this.pagerModel.get("pagesCount"):1,s=this.getFileIndex(e);this.app.store.get("FileViewModal").toggleNavigation("left",!(1===t&&0===s)),this.app.store.get("FileViewModal").toggleNavigation("right",!(t===i&&!this.collection.at(s+1)))},forceDisableNavigation:function(){this.app.store.get("FileViewModal").toggleNavigation("left",!1),this.app.store.get("FileViewModal").toggleNavigation("right",!1)},showFileViewModal:function(e,t){void 0===t&&(t={}),this.asyncFileViewModalLoad?(!this.fetchXhr||this.fetchXhr&&"pending"!==this.fetchXhr.state())&&(this.fetchXhr=this.fetchFile(e,t,this.showModal)):this.showModal(this.collection.get(e),t)},showModal:function(e,t){e&&e.id?(this.currFile=e,this.isNeedToMakeNewModal()&&this.initFileViewModal(e),this.enableListThroughNavigation?this.toggleViewModalNavigation(e):this.forceDisableNavigation(),this.app.observer.fire("ToTopButton:Toggle",{state:!1}),this.storeFileViewModalAsLastViewed&&l.write({itemId:e.id},{app:this.app}),this.trackModalShow(e.serialize(),t),this.app.store.get("FileViewModal").show({model:e,needToUpdateHistoryState:this.needToUpdateHistoryState,replaceState:t.replaceState})):c.warn("Fail to get File data by id")},trackModalShow:function(e,t){this.app.observer.broadcast("Track:UE:FileViewModal:Open",{file:e,ecommerce:t.ecommerce,view:this.name})},hideFileViewModal:function(e){var t=this.app.store.get("FileViewModal");t&&(t.hide(e),this.app.store.unlink("FileViewModal"))},tuneScroll:function(e){var t=this.$('[data-id="'+e+'"]');if(t.length){var i=s.$(window),a=i.height(),o=i.scrollTop(),r=o+a,l=t.offset().top,n=l+t.height();if(n>r||l<o)l-100+s.$("body > footer").outerHeight(!0)+a>s.$(document).height()&&(l=n-a+200),s.$("body").add(s.$("html")).stop(!1,!0).animate({scrollTop:l-100},600)}},getOverlayConfig:function(){var e={};return this.zoomModalEnabled&&(e.className="hidden"),e},leftEdgeCallback:t.noop,rightEdgeCallback:t.noop,onFileViewLicenseSuccessCallback:t.noop}}).call(this,i(4)(e))},,,,,,,,,,,,,,,function(e,t,i){"use strict";var s=i(478),a=i(482),o=i(739);e.exports=s.extend({name:"FolderPermissions",el:!1,template:o,disableRemove:!1,isMultipleSharing:!1,events:{"click ._access":"onAccessClick","click ._remove":"onRemoveClick"},initialize:function(){if(!this.model)throw new Error(this.name+" "+this.cid+": Permission model required!");if(!this.folder)throw new Error(this.name+" "+this.cid+": Folder model required!")},serialize:function(){return{permList:this.isMultipleSharing?this.getListForMultipleSharing():this.getList()}},getListForMultipleSharing:function(){var e=this.model.get("permission");return[{type:"access",name:"view",title:this.tr("Can View"),active:"view"===e},{type:"access",name:"edit",title:this.tr("Can Edit"),active:"edit"===e}]},getList:function(){var e=this.model.get("type"),t=this.model.get("permission"),i=this.folder.get("permission"),s=this.app.user.get("id")===this.folder.get("userId"),a="user"===this.model.get("type")&&this.model.get("user").get("userId")===this.app.user.get("id"),o=!this.disableRemove&&"link"!==e&&(s||"edit"===i||a),r=[];return("edit"===i||s)&&(r.push({type:"access",name:"view",title:this.tr("Can View"),active:"view"===t}),r.push({type:"access",name:"edit",title:this.tr("Can Edit"),active:"edit"===t})),o&&r.push({type:"remove",name:"remove",title:a?this.tr("Leave Collection"):this.tr("Remove")}),r},onAccessClick:function(e){e.stopPropagation();var t=e.currentTarget.dataset.name;this.isUserTryToDecreaseOwnAccess(t)?this.showConfirmationDialog(t):this.changeCallback(t)},onRemoveClick:function(e){e.stopPropagation(),this.removeCallback()},isUserTryToDecreaseOwnAccess:function(e){return!this.isMultipleSharing&&("user"===this.model.get("type")&&parseInt(this.model.get("user").get("userId"),10)===parseInt(this.app.user.get("id"),10)&&"edit"===this.model.get("permission")&&"view"===e)},showConfirmationDialog:function(e){var t=this;new a({title:this.tr("Are you sure?"),message:this.tr("By changing sharing settings, you will no longer be able to edit this folder."),footer:[{label:this.tr("Yes"),hide:!0,color:"blue",defaultAction:!0,callback:function(){return t.changeCallback(e)}},{label:this.tr("No"),hide:!0}],destroyOnHide:!0,app:this.app}).show()},changeCallback:function(){},removeCallback:function(){}})},,,,,,,,,,,,,,,,,function(e,t,i){"use strict";var s=i(0),a=i(9),o=i(48),r=i(23),l=i(11);e.exports=o.extend({url:"TopKeywords",model:a,type:"photo",initialize:function(e,t){this.type=t.type||this.type},getQueryParams:function(){return{lang:this.app.lang,type:this.type}},parse:function(e){return e.result&&e.result.length?this.prepareKeywords(e.result):this.getDefaultKeywords()},serialize:function(){if("categories"===this.type)return this.getCategoriesKeywords();for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return o.prototype.serialize.apply(this,t)},prepareKeywords:function(e){var t=this;return s.each(e,function(e){e.url=t.makeKeywordUrl(e.name.replace(/\s/g,"-"))}),s.sortBy(e,function(e){return e.rate})},getDefaultKeywords:function(){var e=this,t=s.clone(l["ceoPopReq"+r.capitalize(this.type)]);return s.map(t,function(t){var i=e.app.translator.tr(t.name);return{name:i,url:e.makeKeywordUrl(i)}})},getCategoriesKeywords:function(){var e=this;return s.map(l.categories,function(t){return{name:e.app.translator.tr(t.name),url:e.app.makeUrl({route:"Search",category:t.id},{protocol:e.app.parsedUrl.protocol})}})},makeKeywordUrl:function(e){return this.app.makeUrl({route:"Search",pageType:this.type,keywordName:e,offset:"",hash:""},{protocol:this.app.parsedUrl.protocol})}})},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<h3 class="top-keywords__title">'+this.tr(e.keywordsTitle)+'</h3><div class="top-keywords__content top-keywords__content_cols'+s(e.countCols)+'">',o=e.topKeywordsList;if(o)for(var r=-1,l=o.length-1;r<l;){a+='<ul class="top-keywords__list list">';var n=o[r+=1];if(n)for(var c,h=-1,d=n.length-1;h<d;)a+='<li class="top-keywords__list-item list-item"><a class="top-keywords__link _link" href="'+(c=n[h+=1]).url+'">'+s(c.name)+"</a></li>";a+="</ul>"}return a+="</div>"}},function(e,t,i){"use strict";var s=i(0),a=i(478),o=i(11).keywordsTitles,r=i(631),l=i(481);e.exports=a.extend({name:"TopKeywords",className:"top-keywords",template:r,count:{cols:6,rows:5},updateOnItemsTypeChange:!1,events:{"click ._link":"onLinkClick","contextmenu ._link":"onCustomLinkClick","mouseup ._link":"onCustomLinkClick"},initialize:function(){this.updateOnItemsTypeChange&&this.app.store.get("SearchQuery")&&(this.listenTo(this.app.store.get("SearchQuery"),"change",this.requestKeywords),this.listenTo(this.collection,"sync",this.render))},serialize:function(){return{countCols:this.count.cols,indexTabId:this.collection.type,keywordsTitle:s.findWhere(o,{type:this.collection.type}).label,topKeywordsList:this.dividedIntoColumns(this.collection.serialize())}},requestKeywords:function(){this.collection.type=this.app.store.get("SearchQuery").defineItemsType(),this.collection.fetch()},dividedIntoColumns:function(e){var t=this;return s.chain(e).groupBy(function(e,i){return Math.floor(i/t.count.rows)}).toArray().value().slice(0,this.count.cols)},onLinkClick:function(e){e.ctrlKey||e.shiftKey||e.metaKey?this.trackNewTabClick(e):this.app.observer.broadcast("Track:UE:File:KeywordClick",{position:this.getItemIndex(e.currentTarget.innerText),text:e.currentTarget.innerText})},onCustomLinkClick:function(e){[l.rightMouse,l.middleMouse].includes(e.which)&&this.trackNewTabClick(e)},trackNewTabClick:function(e){this.app.observer.broadcast("Track:UE:ContextMenu:Open",{source:"Keywords",target:{target:"search"},params:{url:e.currentTarget.href,position:this.getItemIndex(e.currentTarget.innerText),text:e.currentTarget.innerText,type:"collection"}})},getItemIndex:function(e){var t=this.collection.serialize(),i=t.find(function(t){return t.name===e});return t.indexOf(i)+1}})},function(e,t,i){"use strict";var s=i(0),a=i(478),o=i(11),r=i(23).serializeSlider;e.exports=a.extend({template:i(885),animate:200,step:1,position:0,percent:0,value:null,name:"",labels:{title:"",control:"",footer:[]},initialize:function(){this.range=s.findWhere(o.sliders,{key:this.name}).range},serialize:function(){return s.extend(this,r(this.model,this.name,this.getValue())),s.extend({},s.pick(this,["name","position","percent","labels","range"]),{value:this.getValue()})},clientAfterRender:function(){var e=this;i(1002),this.$(".ui-slider-inside").slider({animate:this.animate,step:this.step,min:s.first(this.range),max:s.last(this.range),value:this.position,slide:function(t,i){e.$("._slider-range").css({width:r(e.model,e.name,i.value).percent+"%"}),e.$(".ui-slider-scale").attr("data-value",i.value),e.$('[name="'+name+'"]').val(i.value),e.onSlideCallback(t,i)},stop:function(t,i){return s.delay(function(){return e.onStopCallback(t,i)},200)}})},getValue:function(){return this.value||this.model.get(this.name)},calcValue:s.noop,onSlideCallback:s.noop,onStopCallback:s.noop})},,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";(function(t){var s=i(0),a=i(478),o=i(142),r=i(881);e.exports=a.extend({name:"ColorPalette",el:!1,template:r,repeatedClickReset:!1,currentColor:null,timer:null,events:{"click ._button-reset":"onButtonResetClick","click ._color":"onColorClick","touchstart ._color":"onColorClick","mouseenter ._color-hover":"onColorMouseenter","mouseleave ._color-hover":"onColorMouseleave"},serialize:function(){var e=this.colors||o.colors,t=s.where(e,{type:"line"});return{model:this.model?s.clone(this.model.attributes):{},mode:this.mode,colors:e,currentColor:this.getCurrentColor(),paletteCoordinates:this.getPaletteCoordinates(e),palette:s.difference(e,t),line:t}},getCurrentColor:function(){var e=this.model?this.model.get("color"):null;return this.currentColor||e},getPaletteCoordinates:function(e){var i,s=[35,4,42,0,49,4,49,12,42,16,35,12],a=[],o=-1,r=0,l=0,n=0,c=[];return t.browser?(e.forEach(function(e){if(a.length){if(!e.type){c=[];for(var t=0;t<s.length;t++)i=t%2==0?s[t]+14*r-7*(l-n):s[t]+12*l,c.push(i);a.push({hex:e.hex,coor:c}),r++,e.max&&(o=1),e.br&&(l++,r=0,o>0&&(n+=2))}}else a.push({hex:e.hex,coor:s}),r++}),a):a},clientAfterRender:function(){this.isTouchDevice="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch},onColorClick:function(e){if(this.isTouchDevice){if("touchstart"!==e.type)return;e.preventDefault()}var t=e.currentTarget.getAttribute("data-value"),i=this.getCurrentColor();this.repeatedClickReset&&i===t?this.onResetCallback("color"):this.onChangeCallback("color",t),this.onApplyCallback(e)},onColorMouseenter:function(e){clearTimeout(this.timer),this.$(".cmp-palette__wrap").addClass("cmp-palette__wrap_hover"),this.$("._color-icon").filter('[data-value="'+e.currentTarget.getAttribute("data-value")+'"]').addClass("cmp-palette__item_hover")},onColorMouseleave:function(e){var t=this;this.timer=setTimeout(function(){t.$(".cmp-palette__wrap").removeClass("cmp-palette__wrap_hover")},100),this.$("._color-icon").filter('[data-value="'+e.currentTarget.getAttribute("data-value")+'"]').removeClass("cmp-palette__item_hover")},onButtonResetClick:function(e){this.onResetCallback("color"),this.onApplyCallback(e)},onChangeCallback:s.noop,onResetCallback:s.noop,onApplyCallback:s.noop})}).call(this,i(6))},,,function(e,t,i){"use strict";e.exports={onSwipeTouchStart:function(e){this.touch={startPositionX:e.originalEvent.touches[0].pageX,endPositionX:e.originalEvent.touches[0].pageX,startLeft:this._getSwipeWrapper().scrollLeft(),startTime:Date.now()}},onSwipeTouchMove:function(e){var t=this._getSwipeWrapper(),i=this.touch.startLeft-(e.originalEvent.touches[0].pageX-this.touch.startPositionX);t.scrollLeft(i),this.touch.endPositionX=e.originalEvent.touches[0].pageX},onSwipeTouchEnd:function(e){if(Date.now()-this.touch.startTime<=250)this.touch.startPositionX<this.touch.endPositionX?this.setSwipePage(Math.max(this.currentSwipePage-1,0)):this.touch.startPositionX>this.touch.endPositionX&&this.setSwipePage(Math.min(this.currentSwipePage+1,3*this.maxSwipePages-1));else{var t=this._getSwipeWrapper(),i=Math.round(t.scrollLeft()/t.width());this.setSwipePage(i)}},initSwipe:function(){var e=this._getSwipeWrapper(),t=this._getSwipeInner().children().first();t.clone().addClass("swipe-before").insertBefore(t),t.clone().addClass("swipe-after").insertAfter(t),e.scrollLeft(t.outerWidth())},setSwipePage:function(e,t){var i=this;void 0===t&&(t=!0);var s=this._getSwipeWrapper(),a=this._getSwipePage(),o=this.getPageIndex(e);this.currentSwipePage=e,a.removeClass("active"),a.filter(":eq("+o+")").addClass("active"),t?s.animate({scrollLeft:e*s.width()},200,"swing",function(){i.setSwipePage(o+i.maxSwipePages,!1)}):s.scrollLeft(e*s.width())},getPageIndex:function(e){var t=e;return e>=this.maxSwipePages&&(t=e-this.maxSwipePages*Math.floor(e/this.maxSwipePages)),t},onSwipePageClick:function(e){this.setSwipePage(this.$(e.currentTarget).index()+this.maxSwipePages)},_getSwipeWrapper:function(){return"function"==typeof this.getSwipeWrapper?this.getSwipeWrapper():this.$("._swipe-wrap")},_getSwipeInner:function(){return"function"==typeof this.getSwipeInner?this.getSwipeInner():this.$("._swipe-inner")},_getSwipePage:function(){return"function"==typeof this.getSwipePage?this.getSwipePage():this.$("._swipe-page")}}},,,,,,,,,,,,function(e,t,i){"use strict";var s=i(0),a=i(48),o=i(737);e.exports=a.extend({url:"FolderPermissions",model:o,initialize:function(){var e=this;this.cid=s.uniqueId("col"),this.on("change",function(t,i){void 0===i&&(i={}),i.observable&&e.app.observer.fire("Favorites:FolderPermissionsChanged",{cid:e.cid,folderId:t.get("folderId")})}),this.on("update",function(t,i){void 0===i&&(i={}),i.observable&&e.app.observer.fire("Favorites:FolderPermissionsChanged",{cid:e.cid,folderId:t.length?t.first().get("folderId"):0})})},parse:function(e){return e?e.result:[]},findPermissionByEmail:function(e){return this.find(function(t){return t.isMatchByEmail(e)})}})},function(e,t,i){"use strict";var s=i(478),a=i(480),o=i(479),r=i(740);e.exports=s.extend({name:"FolderUsers",el:!1,template:r,maxAvatars:5,events:{"mouseenter ._avatar-box":"onAvatarBoxMouseEnter","mouseleave ._avatar-box":"onAvatarBoxMouseLeave"},initialize:function(){this.listenTo(this.collection,"change update reset",this.render)},prepareRender:function(){return this.users=this.collection.serialize().filter(function(e){return"link"!==e.type}).reverse(),!!this.users.length},serialize:function(){var e=this.users.slice(0,this.maxAvatars);return{users:this.prepareUsers(e),moreCount:this.users.length-e.length,ownerId:this.model.get("userId")}},prepareUsers:function(e){var t=this;return e.map(function(e){return t.model.get("userId")===e.userId?e.title=t.tr("%s is the owner",e.fullName):"edit"===e.permission?e.title=t.tr("%s can edit",e.fullName):e.title=t.tr("%s can view",e.fullName),e})},onAvatarBoxMouseEnter:function(e){e.preventDefault(),this.setNotExistView("avatarTooltip",a,{params:o.darkTitle,classes:{tooltip_dark:!0},content:new s({el:!1,template:function(){return e.currentTarget.getAttribute("data-title")}})}),this.getView("avatarTooltip").show(e)},onAvatarBoxMouseLeave:function(e){e.preventDefault(),this.getView("avatarTooltip").remove()}})},function(e,t,i){"use strict";e.exports.default={suppressScrollX:!0,wheelSpeed:.6,minScrollbarLength:30}},,,,,,,,,,function(e,t,i){"use strict";var s=i(0),a=i(23),o=i(129),r=i(48),l=i(100).apiErrors;e.exports=r.extend({isBulkAllowed:function(){return!1},model:o,renderingDisabled:!1,parse:function(e,t){return this.count=e.count||0,this.availableCount=e.availableCount||0,e.items=e.items||e.result,e.errors&&e.errors[0]&&e.errors[0].error_code===l.itemNotFound?this.trigger("itemNotFound"):!e.errors&&e.items||this.trigger("exception"),e.items=a.beautifyApiResponse(e.items||[]),t.parser="parseFromSearch",r.prototype.parse.call(this,e.items,t)},filterByTypeEnabled:function(){var e=this.app.store.get("SearchQuery").attributes,t=e.photo,i=e.vector;return e.video||!(t&&i)},serializeForSearchPage:function(){return s.map(this.models,function(e){return e.toSearchResult()})},includeOnlyVideoFiles:function(){return this.length&&!this.find(function(e){return"video"!==e.get("type")})}})},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a="";return e.state.pagesCount>e.state.pagerLimit&&(a+='<a data-dir="prev"',e.schema.prev&&(a+=' href="'+e.schema.prev+'"'),a+=' title="'+this.tr("Previous")+'" data-page="'+s(e.state.page-1)+'" class="_pager-page pager__page pager__page-previous',e.schema.prev||(a+=" pager__page_inactive"),a+='" data-not-spa=""></a><div class="field-box input-box pager__input-box"><span contenteditable="true" class="pager__input',e.schema.activeButton||(a+=" pager__input_active"),a+='">'+e.state.page+'</span></div><a data-dir="next"',e.schema.next&&(a+=' href="'+e.schema.next+'"'),a+=' title="'+this.tr("Next")+'" data-page="'+s(e.state.page+1)+'" class="_pager-page pager__page pager__page-next',e.schema.next||(a+=" pager__page_inactive"),a+='" data-not-spa=""></a>'),a}},function(e,t,i){"use strict";var s=i(0),a=i(478),o=i(480),r=i(496),l=i(479).Pager,n=i(128),c=i(481),h=i(800),d=a.extend({template:h,className:"pager",events:{"click ._pager-page":"onButtonClick","contextmenu ._pager-page":"onCustomButtonClick","mouseup ._pager-page":"onCustomButtonClick","click .pager__input":"onInputEvent","focusin .pager__input":"onInputEvent","keydown .pager__input":"onInputEvent","keypress .pager__input":"onInputEvent","input .pager__input":"onInputEvent"},initialize:function(){this.listenTo(this.collection,"update reset",this.render),this.listenTo(this.model,"change:page",this.updatePageNumber)},serialize:function(){return{schema:this.model.getSchema(this.app.store.get("SearchQuery"),this.searchAuthor,this.searchInfo),state:this.model.toJSON(),placeholder:this.placeholder}},clientAfterRender:function(){this.setNotExistView("tooltip",o,{params:l,content:new a({el:!1,template:function(){return this.tr(n.PagerTitle)}})})},onButtonClick:function(e){if(e.ctrlKey||e.shiftKey||e.metaKey)this.trackNewTabClick(e);else{e.preventDefault();var t=e.currentTarget.getAttribute("data-dir"),i=parseInt(e.currentTarget.getAttribute("data-page"),10);-1!==s.indexOf(["next","prev"],t)&&(i=this.model.get("page")+("next"===t?1:-1)),this.app.observer.broadcast("Track:UE:Pager:ButtonClick",{direction:t}),this.model.secureSet("page",i)}},onCustomButtonClick:function(e){[c.rightMouse,c.middleMouse].includes(e.which)&&this.trackNewTabClick(e)},trackNewTabClick:function(e){var t=e.currentTarget.getAttribute("data-dir");this.app.observer.broadcast("Track:UE:ContextMenu:Open",{source:"Pager",target:{target:"search"},params:{direction:t}})},onInputEvent:function(e){var t=e.currentTarget,i=e.which||e.keyCode;switch(e.type){case"click":this.showToolTip(e);break;case"focusin":t.setAttribute("data-value",t.innerHTML);break;case"keydown":this.hideToolTip(e);break;case"keypress":if(13===i){e.preventDefault();var s=Math.ceil(this.collection.count/this.app.store.get("SearchQuery").get("limit")),a=Math.min(t.innerHTML,s);a!==this.model.get("page")?(this.model.set("page",a),this.app.observer.broadcast("Track:UE:Pager:SubmitInput",{page:a})):this.updatePageNumber()}break;case"input":if(""!==t.innerHTML&&this.model.preValidate("pageUnlimited",t.innerHTML)&&(t.innerHTML=t.getAttribute("data-value"),this.incorrect(),t.innerHTML.length)){var o=document.createRange(),r=window.getSelection();o.setStart(t.childNodes[0],t.innerHTML.length),o.collapse(!0),r.removeAllRanges(),r.addRange(o)}t.setAttribute("data-value",t.innerHTML)}},incorrect:function(){var e=this.$(".pager__input-box");this.fieldIncorrect(e),s.delay(s.bind(this.fieldReset,this,e),300)},updatePageNumber:function(){this.$(".pager__input").html(this.model.get("page"))},showToolTip:function(e){this.getView("tooltip").show(e)},hideToolTip:function(e){this.getView("tooltip").hide(e)}});s.extend(d.prototype,r),e.exports=d},function(e,t){e.exports=function(e){return'<div class="tooltip-exclude-keywords"><p class="tooltip__pg">'+this.tr("You can exclude keywords, to narrow the results of your search.")+'</p><p class="tooltip__pg">'+this.tr("Use commas, semicolons or spaces to separate multiple keywords or phrases.")+'</p><p class="tooltip__pg"><span class="tooltip__text tooltip__text_bold">'+this.tr("Example")+':</span><span class="tooltip__text">'+this.tr('If you enter "dog" in the search request field and "ball" in the exclusion field, you will be shown results which have the keyword "dog" but not the keyword "ball".')+'</span></p><p class="tooltip__pg"><span class="tooltip__text tooltip__text_bold">'+this.tr("Example of entering multiple keywords for exclusion")+':</span><span class="tooltip__text">'+this.tr("nigth city clouds")+'</span><span class="tooltip__text">'+this.tr("nigth, city, clouds")+'</span><span class="tooltip__text">'+this.tr("nigth; city; clouds")+"</span></p></div>"}},function(e,t){e.exports=function(e){return'<div class="tooltip-by-seller"><p class="tooltip__pg">'+this.tr("You can always find your favorite contributor by entering the initial letters of his/her username, full name or last name (if this information is in his public profile).")+'</p><p class="tooltip__pg"><span class="tooltip__text tooltip__text_bold">'+this.tr("Example")+':</span><span class="tooltip__text">'+this.tr('If you enter the letters "and" or "rod", you’ll get the link to Andres Rodriguez’ portfolio.')+'</span></p><div class="seller-example"><span class="seller-example__key">and|</span><div class="seller-example__result"><img class="seller-example__thumb" src="'+this.app.cdnPath+'_img/seller-example-avatar.jpg" alt="Avatar" /><div class="seller-example__user"><span class="seller-example__login">'+this.tr("andresr")+'</span><span class="seller-example__info">'+this.tr("Andres Rodriguez | Online Files: 32503")+'</span></div></div></div><p class="tooltip__pg">or</p><div class="seller-example"><span class="seller-example__key">rod|</span><div class="seller-example__result"><img class="seller-example__thumb" src="'+this.app.cdnPath+'_img/seller-example-avatar.jpg" alt="'+this.tr("Avatar")+'" /><div class="seller-example__user"><span class="seller-example__login">andresr</span><span class="seller-example__info">'+this.tr("Andres Rodriguez | Online Files: 32503")+"</span></div></div></div></div>"}},function(e,t,i){"use strict";var s=i(0),a=i(478),o=i(11).categories;e.exports=a.extend({el:!1,template:i(882),scrollable:!1,scrollOptions:{suppressScrollX:!0,wheelSpeed:.6},events:{"change ._category":"onCategoryChange"},serialize:function(){return{model:s.clone(this.model.attributes),categories:o}},clientAfterRender:function(){this.$target=this.$el.parent(),this.initScroll()},initScroll:function(){this.scrollable&&this.$target.length&&i(486).initialize(this.$target.get(0),this.scrollOptions)},updateScroll:function(){if(this.scrollable&&this.model.get("category")){this.$target.scrollTop(0);var e=this.$("._category:checked").parent().position().top;this.$target.scrollTop(e)}},onCategoryChange:function(e){this.onCategoryChangeCallback(e)},onCategoryChangeCallback:s.noop})},function(e,t,i){"use strict";var s=i(0),a=i(478),o=i(23).prefixedArrayString,r=i(633),l=i(128);e.exports=a.extend({template:i(883),autoSubmit:!0,events:{"change ._size-unit":"onSizeUnitChange","click ._apply":"onApplyClick"},keys:["size_unit","min_width","min_height"],initialize:function(){this.listenTo(this.model,o("change:",this.keys),this.render),this.autoSubmit||this.createVirtualModel(this.model)},prepareRender:function(){var e=this.autoSubmit?this.model:this.virtual,t=e.getPositionFromSize("min_width"),i=e.getPositionFromSize("min_height");this.setViews({"#slider-min_width":new r({model:e,name:"min_width",value:t,labels:{control:this.getSliderLabel(t)},onSlideCallback:this.onMinWidthSlideCallback.bind(this),onStopCallback:this.onMinWidthStopCallback.bind(this)}),"#slider-min_height":new r({model:e,name:"min_height",value:i,labels:{control:this.getSliderLabel(i)},onSlideCallback:this.onMinHeightSlideCallback.bind(this),onStopCallback:this.onMinHeightStopCallback.bind(this)})})},serialize:function(){var e=this.autoSubmit?this.model:this.virtual;return{model:s.clone(e.attributes),autoSubmit:this.autoSubmit}},createVirtualModel:function(e){this.virtual=new e.constructor(s.clone(e.attributes),s.clone(e.options)),this.listenTo(e,"change",this.updateVirtualModel),this.listenTo(this.virtual,o("change:",this.keys),this.render)},updateVirtualModel:function(e){this.virtual.set(e.changed)},onSizeUnitChange:function(e){this.autoSubmit?this.onChangeCallback(e.currentTarget.name,e.currentTarget.value):this.virtual.set(e.currentTarget.name,e.currentTarget.value)},onResetClick:function(e){e.stopPropagation(),e.preventDefault(),this.onResetCallback(e.currentTarget.getAttribute("data-key"))},onApplyClick:function(e){e.preventDefault(),e.stopPropagation(),this.onChangeCallback(s.pick(this.virtual.attributes,this.keys)),this.onApplyCallback()},getSliderLabel:function(e){var t=this.autoSubmit?this.model:this.virtual;return 0===e?this.tr(l.Off):t.getSizeFromPosition(e)},setSliderLabel:function(e){this.$("#slider-"+e).find(".ui-slider-label").text(this.getSliderValue(e))},getSliderValue:function(e){var t=this.autoSubmit?this.model:this.virtual,i=this.getSliderPosition(e),s=this.getSizeUnitValue();return 0===i?this.tr(l.Off):t.getSizeFromPosition(i,s)},getSizeUnitValue:function(){return this.$("._size-unit:checked").val()},getSliderPosition:function(e){return this.$("#slider-"+e+" .ui-slider-scale").attr("data-value")},onMinWidthSlideCallback:function(e,t){this.getView("#slider-min_width").$(".ui-slider-label_small").text(this.getSliderLabel(t.value))},onMinWidthStopCallback:function(e,t){this.autoSubmit?this.onChangeCallback("min_width",this.model.getSizeFromPosition(t.value)):this.virtual.set({min_width:this.virtual.getSizeFromPosition(t.value)})},onMinHeightSlideCallback:function(e,t){this.getView("#slider-min_height").$(".ui-slider-label_small").text(this.getSliderLabel(t.value))},onMinHeightStopCallback:function(e,t){this.autoSubmit?this.onChangeCallback("min_height",this.model.getSizeFromPosition(t.value)):this.virtual.set({min_height:this.virtual.getSizeFromPosition(t.value)})},onChangeCallback:s.noop,onResetCallback:s.noop,onApplyCallback:s.noop})},function(e,t,i){"use strict";var s=i(0),a=i(478),o=i(925),r=i(924),l=i(884);e.exports=a.extend({el:!1,type:"search",enabled:!0,mode:"full",classNames:{},events:{"click ._reset":"onResetClick","click ._search":"onSearchClick","blur ._field":"onFieldBlur","input ._field":"onFieldChange","keydown ._field":"onFieldKeyDown"},serialize:function(){return{classNames:{helpIcon:this.classNames.helpIcon},name:this.name,placeholder:this.placeholder,value:this.model.get(this.name)}},clientAfterRender:function(){this.setNotExistView("hints",o,{type:this.type,customWidth:185,template:l,collection:new r(null,{url:"ContributorHints"}),onHintMouseDownCallback:this.chooseHint.bind(this),onHintSelectCallback:this.fillFieldValue.bind(this)}).setAnchor(this.$("._field")[0])},onFieldBlur:function(){this.getView("hints").opened&&this.hideHints()},onFieldChange:function(e){if("compact"!==this.mode){var t=!!e.target.value.length&&e.target.value!==this.model.get(this.name);this.$("._search").toggleClass("hidden",!t)}this.enabled&&this.getView("hints").load(e.target.value)},onResetClick:function(){this.$("._reset").toggleClass("hidden",!1),this.fillFieldValue(),this.search()},onSearchClick:function(e){e.preventDefault(),this.search()},onFieldKeyDown:function(e){switch(e.keyCode){case 38:case 40:if(!this.getView("hints").opened)return;e.preventDefault(),this.getView("hints").moveSelection(38===e.keyCode?-1:1);break;case 13:e.preventDefault(),this.search();break;case 27:this.hideHints();break;default:return}},search:function(){this.hideHints(),this.chooseHint(this.$("._field").val())},fillFieldValue:function(e){this.$("._field").val(e||"")},chooseHint:function(e){this.onChangeCallback(this.name,e||"")},hideHints:function(){this.getView("hints").reset()},onChangeCallback:s.noop})},function(e,t,i){"use strict";var s=i(0),a=i(478),o=i(633),r=i(23),l=i(11).genders,n=i(11).ages,c=i(11).races,h=i(128),d=i(751);e.exports=a.extend({template:d,autoSubmit:!0,events:{"change input:checkbox":"onCheckboxChange","change select":"onSelectChange","click ._apply":"onApplyClick"},keys:["mr_release_quantity","mr_property_only","mr_property_exclude","gender","age","race"],initialize:function(){this.listenTo(this.model,r.prefixedArrayString("change:",this.keys),this.render),this.autoSubmit||this.createVirtualModel(this.model)},prepareRender:function(){var e=this.autoSubmit?this.model:this.virtual;this.setViews({"#slider-people":new o({model:e,name:"mr_release_quantity",labels:{title:this.getSliderLabel(e.get("mr_release_quantity"))},onSlideCallback:this.onSlideCallback.bind(this),onStopCallback:this.onStopCallback.bind(this)})})},serialize:function(){var e=this.autoSubmit?this.model:this.virtual;return{model:s.clone(e.attributes),autoSubmit:this.autoSubmit,showExcludePeople:!0,genders:l,ages:n,races:c}},createVirtualModel:function(e){this.virtual=new e.constructor(s.clone(e.attributes),s.clone(e.options)),this.listenTo(e,"change",this.updateVirtualModel),this.listenTo(this.virtual,r.prefixedArrayString("change:",this.keys),this.render)},updateVirtualModel:function(e){this.virtual.set(e.changed)},getSliderLabel:function(e){var t=4===e?this.tr(h.PeoplesPlus,e):this.tr(h.Peoples,e),i=1===e?this.tr(h.Persons,e):t;return e?i:this.tr(h.AnyNumberOfPeople)},onCheckboxChange:function(e){e.stopPropagation(),this.autoSubmit?this.onChangeCallback(e.currentTarget.name,e.currentTarget.checked):this.virtual.set(e.currentTarget.name,e.currentTarget.checked)},onSelectChange:function(e){e.stopPropagation(),this.autoSubmit?this.onChangeCallback(e.currentTarget.name,e.currentTarget.value):this.virtual.set(e.currentTarget.name,e.currentTarget.value)},onApplyClick:function(e){e.stopPropagation(),e.preventDefault(),this.onChangeCallback(s.pick(this.virtual.attributes,this.keys)),this.onApplyCallback()},onSlideCallback:function(e,t){this.getView("#slider-people").$(".ui-slider-label")[0].textContent=this.getSliderLabel(t.value)},onStopCallback:function(e,t){this.autoSubmit?this.onChangeCallback("mr_release_quantity",t.value):this.virtual.set({mr_release_quantity:t.value})},onChangeCallback:s.noop,onApplyCallback:s.noop,onResetCallback:s.noop})},function(e,t,i){"use strict";var s=i(478);e.exports=s.extend({name:"SearchFilter",el:!1,opened:!1,blocked:{},listenToTheModel:function(){this.listenTo(this.model,"change paramsArrived",this.render)},onSubFilterResetSingle:function(e){e&&this.model.resetToDefaults(e)},onSubFilterChange:function(e,t){var i;"object"==typeof e?i=e:(i={})[e]=t,this.model.secureSet(i)},onRegularFieldChange:function(e){this.onSubFilterChange(e.currentTarget.name,e.currentTarget.value)},onRegularCheckboxChange:function(e){this.onSubFilterChange(e.currentTarget.name,e.currentTarget.checked)},onTypifyFieldChange:function(e){this.onSubFilterChange(e.currentTarget.name,parseInt(e.currentTarget.value))}})},function(e,t,i){"use strict";var s=i(48);e.exports=s.extend({url:"HomeBanners",getQueryParams:!0,parse:function(e){return e&&e.items?e.items:[]}})},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="'+s(e.className)+'">';if(e.showTitle&&(a+='<h3 class="folders__info-title">'+this.tr("You may also be interested in")+"</h3>"),e.isMobileMode){a+='<div class="folders__swipe-box _swipe-box"><div class="folders__swipe-wrap _swipe-wrap"><div class="folders__swipe-inner _swipe-inner" style="width: '+s(e.swipeWidth.innerBox)+'"><div class="folders__swipe-clone">';var o=e.banners;if(o)for(var r=-1,l=o.length-1;r<l;)d=o[r+=1],a+='<div class="folders__swipe-link-box" style="width: '+s(e.swipeWidth.linkBox)+'"><a class="folders__swipe-link _link" href="'+d.link+'"><img class="folders__swipe-image" src="'+d.img+'" /></a></div>';a+='</div></div></div><div class="folders__swipe-pager pager-slider">';var n=e.banners;if(n){r=-1;for(var c=n.length-1;r<c;)d=n[r+=1],a+='<span class="folders__swipe-page pager-slider__page _swipe-page"></span>'}a+="</div></div>"}else{a+='<div class="folders__box"><div class="folders__inner-box">';var h=e.banners;if(h){r=-1;for(var d,u=h.length-1;r<u;)a+='<a class="folders__link _link"',(d=h[r+=1]).itemId&&(a+=' data-id="'+s(d.itemId)+'"'),a+=' href="'+d.link+'"><img class="folders__image" src="'+d.img+'" /></a>'}a+="</div></div>"}return a+="</div>"}},function(e,t,i){"use strict";(function(t){var s=i(0),a=i(478),o=i(658),r=i(127),l=i(23).classNames,n=i(481),c=i(693),h=a.extend({name:"MarketFolders",el:!1,template:c,className:"",banners:[],showTitle:!0,onlyDesktopMode:!1,currentSwipePage:0,maxSwipePages:null,events:{"click ._swipe-page":"onSwipePageClick","click ._link":"onLinkClick","contextmenu ._link":"onCustomLinkClick","mouseup ._link":"onCustomLinkClick","touchstart ._swipe-box":"onSwipeTouchStart","touchmove ._swipe-box":"onSwipeTouchMove","touchend ._swipe-box":"onSwipeTouchEnd"},globals:{"resize window":"onWindowResize"},initialize:function(){this.maxSwipePages=this.banners.length},serialize:function(){return{banners:this.banners,className:this.getWrapperClassNames(),showTitle:this.showTitle,isMobileMode:this.isMobileMode(),swipeWidth:this.calculateSwipeElementsWidth()}},clientAfterRender:function(){this.setSwipePage(0),this.initSwipe()},onWindowResize:function(){this.onlyDesktopMode||this.render()},isMobileMode:function(){return t.browser&&!this.onlyDesktopMode&&r.marketFoldersMobileMode()},getWrapperClassNames:function(){var e;return l(((e={folders:!0})[this.className]=!!this.className,e))},calculateSwipeElementsWidth:function(){return{innerBox:100*this.banners.length*3+"%",linkBox:100/this.banners.length+"%"}},parseLink:function(e){if(!e)return null;var t=this.banners.indexOf(this.banners.find(function(t){return e.href.includes(t.link)}))+1,i=e.dataset.id;return[i&&parseInt(i,10)||null,t]},onLinkClick:function(e){if(e.ctrlKey||e.shiftKey||e.metaKey)this.trackNewTabClick(e);else{e.preventDefault();var t=this.parseLink(e.currentTarget),i=t[0],s=t[1];this.app.observer.broadcast("Track:UE:Market:FolderClick",{id:i,position:s}),this.app.router.redirect(e.currentTarget.href)}},onCustomLinkClick:function(e){[n.rightMouse,n.middleMouse].includes(e.which)&&this.trackNewTabClick(e)},trackNewTabClick:function(e){var t=this.parseLink(e.currentTarget),i=t[0],s=t[1],a={source:this.name,target:i?{target:"fileView",targetId:i}:{target:"search"},params:{position:s,type:"collection"}};i&&(a.params.id=i),this.app.observer.broadcast("Track:UE:ContextMenu:Open",a)}});s.extend(h.prototype,o),e.exports=h}).call(this,i(6))},function(e,t,i){"use strict";(function(e,t){var s=i(0),a=i(16),o=i(23),r=i(131),l=i(127),n=i(7)(e);e.exports={arrangeFiles:function(e){var t=this,i=e||this.app.store.get("SearchSettings").get("layout");n.time&&n.time("Arrange "+i),this.setHolderWidth();var o=this.getItemsData(),r="wide"===i?"_file-box-link":"_file-box-image";s.each(this.el.getElementsByClassName("file-box"),function(e){var i=e.getAttribute("data-id");o[i]&&("next"===i?e.getElementsByClassName("_next-link")[0].setAttribute("style",o[i].holderStyle):i&&(e.setAttribute("style",o[i].boxStyle),e.getElementsByClassName("_file-box-link")[0].setAttribute("style",o[i].linkStyle),e.getElementsByClassName(r)[0].setAttribute("style",o[i].holderStyle),e.getElementsByClassName("_file-box-image-src")[0].setAttribute("style",o[i].imageStyle),t.detectLastRow&&(o[i].isLastRow&&o[i].row>t.detectLastRow?e.classList.add("file-box_last-row"):e.classList.remove("file-box_last-row"))))}),a.$(".search-box").css("visibility","visible"),n.timeEnd&&n.timeEnd("Arrange "+i)},getAdjustItemsData:function(e){var t="video"===this.app.store.get("SearchQuery").defineSearchType(),i="big"===this.app.store.get("SearchSettings").get("layout")?172:112,a=o.getArrangeFilesSizes(i,this.holderWidth,3,!0),r={},l={},n=0,c={};return s.each(e,function(e,o){c[e.id]={width:e.w,height:e.h,boxStyle:{marginRight:"0"},linkStyle:{},holderStyle:{width:"auto",height:"auto"}},void 0===r[n]&&(r[n]=[]),r[n].push(e.id),t&&(void 0===l[n]&&(l[n]=0),l[n]=Math.max(l[n],"next"===e.id?0:Math.floor(i/e.w*e.h))),o&&(o+1)%a.perSet==0?n++:(c[e.id].boxStyle.marginRight=a.margin,s.extend(c[e.id].boxStyle,{marginRight:a.margin}))}),t&&s.each(r,function(e,t){!isNaN(l[t])&&l[t]>0&&s.each(e,function(e){s.extend(c[e].linkStyle,{height:l[t]})})}),c},getStaticItemsData:function(e,t,i){var a=this;void 0===i&&(i=!1);var o,r={},l=this.staticMargin||20,n=[],c=t,h=0,d=0,u=0,p=0,f=!1,g=l,m=g;return s.each(e,function(e){o=Math.ceil(e.w*t/e.h),n[e.id]={width:o},!f&&d+o<=a.holderWidth?(h++,d+=o+l,u+=o,p=a.holderWidth-u):(f=!0,a.hasNavigation=!0)}),i&&f&&(g=Math.floor(p/(h-1)),m=p-g*(h-1)+g),s.each(e,function(i,s){var o=s===e.length-1?0:g;r[i.id]={width:n[i.id].width,height:t,isNarrow:n[i.id].width<=92,boxStyle:{marginRight:0===s?m:o,width:n[i.id].width,height:t}},!a.incompleteLastRow&&n[i.id].width<c&&(r[i.id].boxStyle.width=c,r[i.id].imageStyle={width:n[i.id].width})}),this.totalItemsWidth=0,this.incompleteLastRow&&(c=0),s.each(r,function(e){a.totalItemsWidth+=Math.max(e.boxStyle.width,c)+e.boxStyle.marginRight}),this.totalItemsWidth>this.holderWidth&&(this.hasNavigation=!0),r},getWideItemsData:function(e,t){var i={},s=[],a=[],o=t||200;return this.prepareWideRows({rowsData:s,rowsHeight:a,itemBorder:2,itemMargin:10,rowHeight:o,itemsDimensions:e}),this.resizeWideItems({rowsData:s,itemsData:i,rowsHeight:a,itemBorder:2,itemMargin:10,itemsDimensions:e}),this.prepareLastWideRow({rowsData:s,itemsData:i,itemBorder:2,itemMargin:10,rowHeight:o}),this.setZoomInOutContainerClearance(),i},prepareWideRows:function(e){var i,a,o,r=this,n=[],c=e.itemMargin;s.each(e.itemsDimensions,function(s){i=Math.ceil(s.w*e.rowHeight/s.h),a=i+e.itemBorder+e.itemMargin,c+a<=r.holderWidth||0===n.length?c+=o=a:t.browser&&!l.isMobileModeWideSearch()&&i>=r.holderWidth/2&&c<=.75*r.holderWidth&&r.maxRows&&n.length<r.maxRows?(c+=o=a,i=r.holderWidth-(c-i),c=r.holderWidth):(e.rowsData.push(n),e.rowsHeight.push(Math.ceil(e.rowHeight*r.holderWidth/(c-o))),c=e.itemMargin+e.itemBorder+a,n=[]),n.push({id:s.id,width:i,height:e.rowHeight,thumb:s.thumb,ratio:s.w/s.h})}),this.lastRowStretched=!1,0!==n.length&&(e.rowsData.push(n),this.stretchLastRow&&c/this.holderWidth>=.65&&(this.lastRowStretched=!0,e.rowsHeight.push(Math.ceil(e.rowHeight*this.holderWidth/(c-o)))))},resizeWideItems:function(e){var t=this,i=0,a=0;s.each(e.rowsData,function(o,r){s.each(o,function(t){i=Math.floor(t.width*e.rowsHeight[r]/t.height),e.itemsData[t.id]={width:i,height:e.rowsHeight[r],thumb:t.thumb,row:r,holderStyle:{width:i,height:e.rowsHeight[r]}},a+=i+e.itemBorder+e.itemMargin}),e.itemsData[o[o.length-1].id].boxStyle={marginRight:0},t.setExtraWideItemsSizes(s.extend({rowData:o,newRowWidth:a-e.itemMargin},e)),a=0})},setExtraWideItemsSizes:function(e){var t=this.holderWidth-e.newRowWidth,i={},a=0,o=0,r=0;s.each(e.rowData,function(s,a){i=e.itemsData[s.id],o=a===e.rowData.length-1?Math.floor(t-r):Math.floor(t/(e.newRowWidth/i.width)),r+=o,i.width+=o,i.holderStyle.width=i.width,i.boxStyle=i.boxStyle||{},i.boxStyle.width=i.width+e.itemBorder,i.lowQuality=i.width>i.thumb.w}),s.each(e.rowData,function(t){t.height=e.itemsData[t.id].width/t.ratio-1,a=a?Math.min(a,t.height):t.height}),s.each(e.rowData,function(t){(i=e.itemsData[t.id]).height=Math.round(Math.min(a,350)),i.boxStyle.height=Math.round(i.height),i.holderStyle.height=Math.round(i.height),i.imageStyle={top:-Math.floor((t.height-i.height)/2)}})},prepareLastWideRow:function(e){if(this.lastRowStretched)return!1;var t=e.rowsData[e.rowsData.length-1],i=0;if(s.each(t,function(t){e.itemsData[t.id]={width:t.width,height:e.rowHeight,row:e.rowsData.length-1,isLastRow:!0,holderStyle:{width:t.width,height:e.rowHeight}},i+=t.width+e.itemBorder+e.itemMargin}),e.itemsData.next&&i>this.holderWidth){var a=e.itemsData.next.width-(i-this.holderWidth);a>=130?(e.itemsData.next.width=a,e.itemsData.next.holderStyle.width=a):this.setExtraWideItemsSizes(s.extend({rowData:t,newRowWidth:i},e))}return e.rowsData.length<=this.maxRows&&(this.incompleteLastRow=!0),!0},setZoomInOutContainerClearance:function(){t.browser&&this.$el.width(this.holderWidth+10)},setHolderWidth:function(e){void 0===e&&(e=0),t.browser&&this.$el.css({width:"auto"}),this.holderWidth=this.el.offsetWidth||e},getWideVideoItemsData:function(e){var i=380,a=214,o=10,r=1;t.browser&&!l.canArrangeFilesList()||(r=Math.floor((this.holderWidth+10)/392))<e.length&&(412*r<this.holderWidth+30&&(r+=1,i=Math.floor((this.holderWidth-10*(r-1))/r)-2,a=Math.round(i/380*214)),o=Math.floor((this.holderWidth-r*(i+2))/(r-1))),this.maxRows&&e.length<this.maxRows*r&&(this.incompleteLastRow=!0);var n={};return s.each(e,function(e,t){n[e.id]={width:e.w,height:e.h,row:Math.floor(t/r),boxStyle:{marginRight:(t+1)%r?o:0,height:a,width:i},linkStyle:{height:a,width:i},holderStyle:{height:a,width:i,paddingLeft:0,paddingRight:0}}}),n},getItemsDimensions:function(e){var t,i,a=[],o=e||this.app.store.get("SearchSettings").get("layout");return this.collection.each(function(e){t=r.getThumbSizes(e.serialize(),o),i=r.calculateSize({width:e.get("width"),height:e.get("height")},r.config[e.get("type")][o]),a.push(s.extend({id:e.get("id")},{thumb:i},t))}),this.pagerModel&&this.pagerModel.isNextPageAvailable(this.app.store.get("SearchQuery"))&&a.push({id:"next",w:t.h,h:t.h,thumb:{}}),a},convertStyleToString:function(e){var t="";return s.each(e,function(e,i){t=""+t+i.replace(/[A-Z]/g,"-$&").toLowerCase()+": "+e+("auto"!==e?"px":"")+";"}),t}}}).call(this,i(4)(e),i(6))},,,function(e,t){e.exports=function(e){var t='<div class="search-box';return e.hasResult||(t+=" search-box__no-result-box"),t+='">',e.hasResult&&(t+="<script>var toggleSearchResult = function(hide) {var els = document.getElementsByClassName('search-box');for (var i = 0; i < els.length; i++) {els[i].style.visibility = hide ? 'hidden' : 'visible';}};toggleSearchResult(true);setTimeout(function() {toggleSearchResult(false);}, 3000);<\/script>"),t+='<div class="_search-header"></div><div class="search-box__content _search-content"></div><div class="search-box__footer _search-footer',e.isEnabledFolderSearch&&(t+=" search-box__footer_folder"),e.hasResult||(t+=" hidden"),t+='"></div><div class="_search-seo-text"></div></div>'}},function(e,t,i){"use strict";(function(t){var s=i(0),a=i(16),o=i(478),r=i(480),l=i(784),n=i(479).SearchSettings,c=i(127),h=i(782);e.exports=o.extend({name:"SearchSettings",el:!1,template:h,mobileMode:!1,layoutMobile:"big",layoutCurrent:null,events:{"click ._btn-layout":"onLayoutBtnClick","click ._btn-settings":"onSettingsBtnClick","click ._btn-close-settings":"onSettingsBtnClick","click ._mobile-filters":"onMobileFiltersClick"},globals:{"resize window":"onWindowResize"},initialize:function(){this.listenTo(this.app.store.get("SearchSettings"),"change:layout",this.render),this.listenTo(this.app.observer,"Responsive:CloseMobileMenu",this.observeCloseMobileMenu.bind(this)),this.layoutCurrent=this.app.store.get("SearchSettings").defaults.layout},prepareRender:function(){this.mobileMode=t.browser?c.mobileMode():this.mobileMode,this.mobileMode&&this.setView("._mobile-settings",new l({className:"search-settings search-settings_mobile",mobileMode:!0,app:this.app,settingsMap:{linkTarget:!this.app.features.isFeatureOnValue("Search Without File View Modal"),previews:!1},onSearchQueryChange:this.onSearchQueryChange.bind(this),onSearchSettingsChange:this.onSearchSettingsChange.bind(this)}))},onLayoutBtnClick:function(e){var t=e.currentTarget.getAttribute("data-layout");c.shouldEnableMobileLayout()&&(t=this.switchMobileLayout(e)),this.app.observer.broadcast("Track:UE:SearchSettings:Layout",{layout:{normal:"Small",big:"Medium",wide:"Big"}[t]}),this.layoutCurrent=t,this.onSearchSettingsChange({layout:t})},switchMobileLayout:function(e){var t=a.$(e.currentTarget),i=t.parent(),s=t.next().length?t.next():i.children().first();return t.removeClass("active"),s.addClass("active"),s.attr("data-layout")},onSettingsBtnClick:function(e){e.preventDefault(),this.mobileMode?(this.app.observer.fire("Responsive:CloseMobileMenu",{cid:this.cid}),this.getView("._mobile-settings").$el.toggle()):this.getView("tooltip").toggle(e)},serialize:function(){return{layout:this.app.store.get("SearchSettings").get("layout"),mobileMode:this.mobileMode,settingsClassName:this.settingsClassName||"",isCategory:this.app.store.get("SearchQuery").isCategory(),isSettingsEnabled:this.collection.length,isLayoutSwitcherEnabled:this.layoutSwitcherEnabled()}},clientAfterRender:function(){this.mobileMode||(this.setNotExistView("tooltip",r,{params:n,content:new l({className:"search-settings",mobileMode:!1,app:this.app,settingsMap:{linkTarget:!this.app.features.isFeatureOnValue("Search Without File View Modal"),previews:!1},onSearchQueryChange:this.onSearchQueryChange.bind(this),onSearchSettingsChange:this.onSearchSettingsChange.bind(this)})}),this.app.userSettings.get("Tour")&&this.app.userSettings.get("Tour").wideLayout||this.app.observer.fire("Tour:Start",{name:"wideLayout"})),this.mobileModeLayout()},layoutSwitcherEnabled:function(){return!this.app.features.isFeatureOnValue("Layout Switcher Disabled")&&this.collection.length},onWindowResize:s.throttle(function(){var e=t.browser?c.mobileMode():this.mobileMode;e!==this.mobileMode&&(this.mobileMode=e,this.mobileMode&&this.getView("tooltip")&&this.getView("tooltip").hide(),this.render()),this.mobileModeLayout()},10),onMobileFiltersClick:function(){this.app.observer.fire("Search:ToggleMobileFilter")},observeCloseMobileMenu:function(e){e.cid!==this.cid&&this.getView("._mobile-settings").$el.hide()},mobileModeLayout:function(){var e=this.app.store.get("SearchSettings").get("layout");c.mobilePhone()?e!==this.layoutMobile&&this.onSearchSettingsChange({layout:this.layoutMobile}):e!==this.layoutCurrent&&this.onSearchSettingsChange({layout:this.layoutCurrent})},onSearchQueryChange:s.noop,onSearchSettingsChange:s.noop,mobileFiltersClickCallback:s.noop})}).call(this,i(6))},,,,function(e,t,i){"use strict";var s=i(486),a=i(478),o=i(671),r=i(613),l=i(480),n=i(479),c=i(672).default,h=i(738);e.exports=a.extend({name:"SharedUsers",el:!1,template:h,listOnly:!1,includeLink:!1,opened:!1,scrollPosition:0,events:{"click ._open-list":"onOpenListClick","click ._close-list":"onCloseListClick","click ._select-perm":"onSelectPermClick"},initialize:function(){if(!this.model)throw new Error(this.name+": Folder model required!");if(!this.collection)throw new Error(this.name+": FolderPermissions collection required!");this.listenTo(this.collection,"change update reset",this.render)},prepareRender:function(){this.setView("._users",new o({app:this.app,model:this.model,collection:this.collection}))},serialize:function(){return{opened:this.opened,listOnly:this.listOnly,includeLink:this.includeLink,linkPermission:this.getLinkPermission(),usersList:this.getUsersList(),ownerId:this.model.get("userId")}},clientAfterRender:function(){var e=this;this.opened&&setTimeout(function(){return e.initPerfectScrollbar()},0)},initPerfectScrollbar:function(){var e=this.$("._scroll");s.initialize(e.get(0),c),e.scrollTop(this.scrollPosition)},getLinkPermission:function(){var e=this.collection.find(function(e){return"link"===e.get("type")});return e?e.serialize():{}},getUsersList:function(){return this.opened?this.collection.serialize().filter(function(e){return"link"!==e.type}).reverse():[]},onOpenListClick:function(e){e.preventDefault(),this.opened=!0,this.render()},onCloseListClick:function(e){e.preventDefault(),this.opened=!1,this.render()},onSelectPermClick:function(e){e.stopPropagation();var t=e.currentTarget.dataset.email,i=this.collection.findPermissionByEmail(t),s=this.getView("FolderPermissions");if(this.selectedModel&&this.selectedModel.cid===i.cid)s&&s.toggle(e);else{var a=this.app.user.get("id")===this.model.get("userId"),o="user"===i.get("type")&&i.get("user").get("userId")===this.app.user.get("id");"view"!==this.model.get("permission")||a||o?(this.selectedModel=i,this.setView("FolderPermissions",new l({params:n.FolderPermissions,content:new r({app:this.app,model:i,folder:this.model,changeCallback:this.selectPermissionCallback.bind(this),removeCallback:this.removePermissionCallback.bind(this)})})),this.getView("FolderPermissions").show(e)):s&&s.isOpen()&&s.hide()}},saveScrollPosition:function(){this.scrollPosition=this.$("._scroll").scrollTop()},selectPermissionCallback:function(e){this.getView("FolderPermissions").hide(),this.saveScrollPosition(),this.selectedModel.updatePermission({permission:e})},removePermissionCallback:function(){this.getView("FolderPermissions").hide(),this.saveScrollPosition(),this.selectedModel.deletePermission()}})},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<ul class="share-tabs share-tabs_count-'+s(e.scheme.length)+'">',o=e.scheme;if(o)for(var r,l=-1,n=o.length-1;l<n;)(r=o[l+=1]).disabled||(a+='<li class="share-tabs__item',(r.active||r.pseudoActive)&&(a+=" share-tabs__item_active _tab-active"),a+=' _tab" data-key="'+s(r.key)+'"><span class="share-tabs__link">'+s(r.label)+"</span></li>");return a+='<li class="share-tabs__menu-underline hidden _menu-underline"></li></ul>'}},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="share-modal">';if(!e.isCompact){a+='<div class="share-modal__left"><div class="share-modal__info-box"><span class="share-modal__info-text share-modal__info-text_title">'+s(e.info.title)+'</span><span class="share-modal__info-text share-modal__info-text_count">'+this.tr("%s Files",[e.info.count])+'</span></div><div class="share-modal__poster-wrap share-modal__poster-wrap_rows'+s(e.posterMap.length)+' _poster">';var o=e.posterMap;if(o)for(var r,l=-1,n=o.length-1;l<n;){a+='<div class="share-modal__poster-row share-modal__poster-row_count'+s((r=o[l+=1]).images.length)+'">';var c=r.images;if(c)for(var h,d=-1,u=c.length-1;d<u;)a+='<div class="share-modal__poster-cell"style="width: '+s((h=c[d+=1]).width)+"%;",h.url&&(a+=" background-image: url("+s(h.url)+");"),a+='"></div>';a+="</div>"}a+="</div></div>"}return a+='<div class="share-modal__right"><h2 class="share-modal__title">'+this.tr("Share Collection")+'</h2><div class="share-modal__tabs _tabs"></div><div class="share-modal__wrap">',e.emailSharingAllowed&&(a+='<div class="share-modal__form',"email"===e.activeTab&&(a+=" active"),a+=' _form _wrap" data-tab="email"></div>'),e.linkSharingAllowed&&(a+='<div class="share-modal__link',e.emailSharingAllowed&&"link"!==e.activeTab||(a+=" active"),a+=' _link _wrap" data-tab="link"></div>'),e.isCompact||(a+='<div class="share-modal__social',e.emailSharingAllowed&&"social"!==e.activeTab||(a+=" active"),a+=' _wrap" data-tab="social"><a class="share-modal__social-btn button-share-circle button-share-facebook _share-button"rel="nofollow" data-width="650" data-height="370" data-title="Facebook" data-social="facebook"><span class="button-share-circle-text">Facebook</span></a><a class="share-modal__social-btn button-share-circle button-share-twitter _share-button" rel="nofollow" data-width="730" data-height="420" data-title="Tweet" data-social="twitter"><span class="button-share-circle-text">Twitter</span></a><a class="share-modal__social-btn button-share-circle button-share-google _share-button"rel="nofollow" data-width="700" data-height="450" data-title="Google" data-social="google"><span class="button-share-circle-text">Google Plus</span></a></div>'),a+="</div></div></div>"}},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})});return'<form class="share-link"><span class="share-link__title">'+this.tr("Collaborate by sharing link")+':</span><div class="share-link__field field-box input-box input-box-xxxl input-box-params"><div class="input-params-wrap"><input class="input input-xxxl _link-field" type="text" name="link" value="'+s(e.sharedLink)+'" autocomplete="off" readonly /><div class="input-params-select"><span class="input-action-wrap _link-copy"><span class="input-action">'+this.tr("Copy link")+'</span></span></div></div></div><div class="share-link__perm"><div class="share-link__perm-title">'+this.tr("Users with the link")+':</div><div class="cmp-option-select share-link__perm-select"><div class="cmp-option-select-wrap _add-perm"><span class="cmp-option-select-value">'+s(e.permissionLabel)+'</span><i class="cmp-option-select-arrow arrow arrow-bottom arrow-block-1"></i></div></div></div><button class="share-link__done button button-xxl button-watery button-blue _done">'+this.tr("Done")+"</button></form>"}},function(e,t,i){"use strict";var s=i(1)(i(3)),a=i(518),o=i(613),r=i(480),l=i(479),n=i(730);e.exports=a.extend({name:"ShareLinkForm",el:!1,template:n,events:(0,s.default)({},a.prototype.events,{"click ._done":"onDoneClick","click ._add-perm":"onAddPermClick","click ._link-field":"onLinkFieldClick","click ._link-copy":"onLinkCopyClick"}),initialize:function(){var e=this;this.listenTo(this.permissions,{"change:permission":function(t){"link"===t.get("type")&&e.render()},update:this.render,reset:this.render})},prepareRender:function(){return this.model=this.permissions.findWhere({type:"link"}),void 0!==this.model},serialize:function(){return{sharedLink:this.getSharedLink(),permissionLabel:this.getPermissionLabel()}},clientAfterRender:function(){this.model&&this.setView("AddFolderPermissions",new r({params:l.FolderPermissions,content:new o({app:this.app,model:this.model,folder:this.folder,changeCallback:this.selectPermissionCallback.bind(this)})}))},getPermissionLabel:function(){return"edit"===this.model.get("permission")?this.tr("Can Edit"):this.tr("Can View")},onDoneClick:function(){this.hideCallback()},onAddPermClick:function(e){e.preventDefault(),this.getView("AddFolderPermissions").toggle(e)},onLinkFieldClick:function(e){e.currentTarget.select()},onLinkCopyClick:function(){var e=this.$("._link-field").get(0);e.select();try{document.execCommand("copy")&&this.app.observer.fire("Notification",{type:"success",description:this.tr("Link copied to the clipboard.")})}catch(e){}e.selectionStart=e.selectionEnd=-1},getSharedLink:function(){return this.model.get("link")||this.app.makeUrl({route:"Folder",folderId:this.folder.get("id"),folderName:this.folder.get("title")},{absolute:!0})},selectPermissionCallback:function(e){this.model.updatePermission({permission:e}),this.getView("AddFolderPermissions").hide()},hideCallback:function(){}})},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<form class="share-email"><span class="share-email__title">'+this.tr("Invite people to collaborate via Email")+':</span><div class="share-email__field field-box input-box input-box-xxxl input-box-params';return e.canSetPermission||(a+=" share-email__field_no-perms"),a+=' _errorHolder"><div class="input-params-wrap"><span class="input-params-title">'+this.tr("To:")+'</span><input class="input input-xxxl _share-email _field" type="text" name="rawEmails" value="'+s(e.formData.rawEmails)+'"placeholder="'+this.tr("Email")+'" autocomplete="off" /><div class="cmp-option-select input-params-select"><div class="cmp-option-select-wrap _add-perm"><span class="cmp-option-select-value">'+s(e.permissionLabel)+'</span><i class="cmp-option-select-arrow arrow arrow-bottom arrow-block-1"></i></div></div></div></div><div class="share-email__shared _shared"></div><button class="share-email__submit button button-xxl button-watery button-blue _submit" type="submit">'+this.tr("Share Collection")+"</button></form>"}},function(e,t,i){"use strict";var s=i(1)(i(3)),a=i(0),o=i(9),r=i(11).validationMessages;e.exports=o.extend({url:"ShareFolder",defaults:{folderID:null,rawEmails:"",emails:[],subject:"",type:"email",permission:"view"},validation:{emails:function(e){var t=this;if(!e.length)return!0;if(e.length>20)return this.app.translator.tr(this.getValidationMessage("tooMuchEmails"),[20]);var i=null;return e.find(function(e){return e.length<3?(i=t.getValidationMessage("emailMin"),!0):e.length>128?(i=t.getValidationMessage("emailMax"),!0):!t.isEmail(e)&&(i=t.getValidationMessage("multipleEmail"),!0)}),i},permission:{oneOf:["view","edit"]},type:{oneOf:["user","email"]}},isEmail:function(e){return/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i.test(e)},getValidationMessage:function(e){return r.find(function(t){return t.key===e}).label},parse:function(e){return a.pick(e,a.keys(this.defaults))},getQueryParams:function(){return(0,s.default)({},this.attributes,{type:"user"})}})},function(e,t,i){"use strict";var s=i(1),a=s(i(17)),o=s(i(3)),r=i(0),l=i(518),n=i(703),c=i(613),h=i(480),d=i(733),u=i(479),p=i(732);e.exports=l.extend({name:"ShareFolderForm",el:!1,template:p,isMultipleSharing:!1,events:(0,o.default)({},l.prototype.events,{"focusout ._field":"onFieldFocusOut","click ._add-perm":"onAddPermClick","blur ._field":"onFieldBlur"}),initialize:function(){this.model=new d({foldersID:this.getSharingIds()},{app:this.app}),this.listenTo(this.model,{invalid:this.showErrors,sync:this.onSubmitForm,"change:permission":this.render})},prepareRender:function(){!this.isMultipleSharing&&this.canSetPermission()&&this.setView("._shared",new n({app:this.app,model:this.folder,collection:this.permissions}))},serialize:function(){return{formData:this.model.serialize(),canSetPermission:this.canSetPermission(),permissionLabel:this.getPermissionLabel()}},clientAfterRender:function(){this.canSetPermission()&&this.setView("AddFolderPermissions",new h({params:u.FolderPermissions,content:new c({app:this.app,model:this.model,folder:this.folder,disableRemove:!0,isMultipleSharing:this.isMultipleSharing,changeCallback:this.selectPermissionCallback.bind(this)})}))},getSharingIds:function(){return this.isMultipleSharing?this.folder.map(function(e){return e.get("id")}):this.folder.get("id")},canSetPermission:function(){return this.isMultipleSharing?this.folder.every(function(e){return"edit"===e.get("permission")}):"edit"===this.folder.get("permission")},getPermissionLabel:function(){return"edit"===this.model.get("permission")?this.tr("Can Edit"):this.tr("Can View")},onFieldFocusOut:function(e){if(e.currentTarget.value.length){var t="email"===e.currentTarget.name?this.$(e.currentTarget).closest("._errorHolder"):this.$(e.currentTarget).parent();this.fieldCorrect(t)}},onFieldBlur:function(e){var t=Backbone.$(e.currentTarget)[0],i=t.scrollLeft;setTimeout(function(){t.scrollLeft=i},0)},onSubmitForm:function(e,t){t&&t.errors instanceof Array&&this.showSubmitError(t.errors[0].error_message)},onAddPermClick:function(e){e.preventDefault(),this.getView("AddFolderPermissions").toggle(e)},showErrors:function(e,t){var i=this;void 0===t&&(t={}),this.$("label:not(.field-box_correct) input, label:not(.field-box_correct) textarea").each(function(e){return i.fieldReset(i.$(e).parent())}),(0,a.default)(t).forEach(function(e){var s=t[e]instanceof Array?t[e][0]:t[e],a="emails"===e?i.$("._errorHolder"):i.$("input[name="+e+"], textarea[name="+e+"]").parent();i.fieldIncorrect(a,{errorMessage:s.length?i.tr(s):s})})},showSubmitError:function(e){if(e){var t=this.$("._submit-error");t.toggleClass("hidden",!1),t.text(e)}},serializeForm:function(){return{emails:this.parseEmails(this.$el.find("._share-email").val()),subject:this.$el.find("._share-subject").val()}},parseEmails:function(e){return r.uniq(r.compact(e.split(/[\s,;]+/)))},prepareSubmit:function(){this.model.set({emails:this.parseEmails(this.$el.find("._share-email").val())})},submit:function(){var e=this;this.model.save(this.serializeForm(),{wait:!0,success:function(){e.app.observer.fire("Favorites:FolderPermissionsChanged",{cid:"all",folderId:e.getSharingIds()}),e.shareCallback()}})},selectPermissionCallback:function(e){this.getView("AddFolderPermissions").hide(),this.model.set({permission:e})},shareCallback:function(){}})},function(e,t,i){"use strict";var s=i(1)(i(3)),a=i(478),o=i(495),r=i(734),l=i(731),n=i(519),c=i(670),h=i(14),d=i(40),u=i(729),p=i(728),f=a.extend({name:"ShareFolder",el:!1,template:u,activeTab:"email",asyncPermissionsLoad:!1,events:{"click ._share-button":"onShareButtonClick"},initialize:function(){if(!this.model)throw new Error(this.name+" "+this.cid+": Folder model required!");if(!this.asyncPermissionsLoad&&!this.permissions)throw new Error(this.name+" "+this.cid+": FolderPermissions collection required!");!this.isMultipleSharing()&&this.asyncPermissionsLoad&&(this.permissions=new c([],{app:this.app}),this.permissions.getQueryParams={folderId:this.model.get("id")},this.permissions.fetch({reset:!0}))},prepareRender:function(){var e=this,t=!this.isMultipleSharing(),i={"._form":new r({app:this.app,folder:this.model,permissions:this.permissions,isMultipleSharing:this.isMultipleSharing(),shareCallback:this.shareCallback.bind(this)})};t&&(this.setTabActive(),i["._tabs"]=new o({name:"ShareFolderTabs",template:p,app:this.app,schema:this.getSchema(),preventDefaultAction:!0,menuUnderline:!0,changeTabCallback:function(){return e.changeTabCallback()}})),t&&this.app.user.isLoggedIn()&&(i["._link"]=new l({app:this.app,folder:this.model,permissions:this.permissions,hideCallback:this.hideCallback.bind(this)})),this.setViews(i)},serialize:function(){return{info:this.isCompact()?{}:this.model.serialize(),isCompact:this.isCompact(),posterMap:this.getPosterMap(),emailSharingAllowed:this.emailSharingAllowed(),linkSharingAllowed:this.linkSharingAllowed(),activeTab:this.activeTab}},clientAfterRender:function(){this.isCompact()||this.initSocialButtons({shortenMap:{facebook:1,twitter:2,google:3},socialNameMap:{facebook:!0,twitter:!0,google:!1},shareData:{title:this.model.get("title"),description:this.model.get("description"),image:this.collection.length?this.collection.first().get("thumbs").huge:""}})},isMultipleSharing:function(){return this.model instanceof Array&&this.model.length>1},isCompact:function(){return void 0===this.collection},emailSharingAllowed:function(){return this.app.user.isLoggedIn()},linkSharingAllowed:function(){return!this.isMultipleSharing()&&"edit"===this.model.get("permission")&&this.app.user.isLoggedIn()},setTabActive:function(){var e=this.permissions.findWhere({type:"link"});this.permissions.where({type:"user"}).length<=1&&e&&"edit"===e.get("permission")&&(this.activeTab="link")},getSchema:function(){var e=[],t=!1;return this.emailSharingAllowed()&&(t=!0,e.push({key:"email",label:this.tr("Email"),active:"email"===this.activeTab})),this.linkSharingAllowed()&&(t=!0,e.push({key:"link",label:this.tr("Link"),active:!t||"link"===this.activeTab})),this.isCompact()||(t=!0,e.push({key:"social",label:this.tr("Social"),active:!t||"social"===this.activeTab})),e},getPosterMap:function(){var e=41,t=[],i=[],s=[];if(!this.isCompact()){this.collection.first(6).forEach(function(e){i.push(e.get("thumbs").bigWide),s.push(2*e.get("id").toString().substr(-1))});for(var a=0;a<Math.max(Math.floor(i.length/2),1);a++){var o=e+s[a],r=[{url:i[2*a],width:o}],l=2*a+1;i[l]&&r.push({url:i[l],width:100-o}),t.push({images:r})}}return t},changeTabCallback:function(){this.app.observer.fire("Tooltip:GlobalHide",{cid:"all"});var e=this.findView("ShareFolderTabs").getActiveTab();this.$("._wrap").removeClass("active").filter("[data-tab="+e.get("key")+"]").addClass("active"),this.activeTab=e.get("key")},getSocialRedirectUrl:function(e){return h.urlFormat({protocol:"http:",host:e.isShortenUrl?d.hostnameShorthand:this.app.host,pathname:"/f/"+this.model.get("id")+e.refId})},shareCallback:function(){}});(0,s.default)(f.prototype,n),e.exports=f},function(e,t,i){"use strict";var s=i(483),a=i(735);e.exports=s.extend({name:"ShareFolderModal",overlayOpacity:70,draggable:!0,noBorder:!0,showHeader:!0,showTitle:!1,fullScreen:!0,destroyOnHide:!0,options:{},modalClasses:"modal_share modal_with-poster",bodyClasses:"modal__body_share",footer:[],initialize:function(){this.options.callback&&(this.onAfterHideCallback=this.options.callback),this.body=[new a({app:this.app,model:this.model,collection:this.collection,permissions:this.permissions,asyncPermissionsLoad:this.asyncPermissionsLoad,shareCallback:this.shareCallback.bind(this),hideCallback:this.hideCallback.bind(this)})];for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];s.prototype.initialize.apply(this,t)},show:function(){this.def=Backbone.$.Deferred();for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return s.prototype.show.apply(this,t),this.def.promise()},hideCallback:function(){this.hide()},shareCallback:function(){this.hide(),this.app.observer.fire("Notification",{type:"success"})}})},function(e,t,i){"use strict";var s=i(1),a=s(i(3)),o=s(i(17)),r=i(0),l=i(9),n=i(99);e.exports=n.extend({url:"FolderPermission",defaults:{type:"",permission:"",folderId:null,link:null,value:null,user:{}},relations:{user:l.extend({defaults:{userId:null,username:"",email:"",firstName:"",lastName:"",avatar:"/_img/avatar-border-default-30.png"},initialize:function(){var e=this;this.on("change:userId",function(){e.attributes.userId=parseInt(e.attributes.userId,10)})},parse:function(e){void 0===e&&(e={});var t=r.pick(e,(0,o.default)(this.defaults));return t.userId=parseInt(t.userId,10),t}})},parse:function(e){if(void 0===e&&(e={}),e.errors)return{};var t=r.pick(e,(0,o.default)(this.defaults));return t.folderId=parseInt(t.folderId,10)||this.defaults.folderId,t.link=e.link||null,"email"===t.type&&(t.user={email:e.value}),"user"===t.type&&(t.user=e.value),t},getQueryParams:function(){var e=(0,a.default)({emitter:this.app.uid},this.attributes,this.get("user").attributes);return"link"===this.get("type")&&(e.id=this.get("value")),"user"===this.get("type")&&(e.id=this.get("user").get("userId")),e.type="link"===e.type?e.type:"user",e},serialize:function(){return(0,a.default)(this.get("user").serialize(),{userId:parseInt(this.get("user").get("userId"),10),permission:this.get("permission"),type:this.get("type"),link:this.get("link"),fullName:this.getFullName()})},getFullName:function(){return this.get("user").get("firstName").length?(this.get("user").get("firstName")+" "+(this.get("user").get("lastName")||"")).trim():this.get("user").get("email")},isMatchByEmail:function(e){return"link"!==this.get("type")&&this.get("user").get("email")===e},updatePermission:function(e){return this.save(e,{wait:!0,observable:!0})},deletePermission:function(){var e=this;return this.sync("delete",this,{success:function(){return e.destroy({observable:!0})}})}})},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="shared-users';if(e.opened&&(a+=" shared-users_opened"),e.listOnly&&(a+=" shared-users_list-only"),a+='">',e.listOnly||(a+='<span class="shared-users__title">'+this.tr("Shared with:")+"</span>"),e.opened){e.listOnly||(a+='<i class="shared-users__close arrow arrow-top arrow-block-1 _close-list"></i>'),a+='<div class="shared-users__list-box _scroll"><ul class="shared-users__list">',e.includeLink&&(a+='<li class="shared-users__list-row shared-users__list-row_type"><div class="shared-users__user"><div class="shared-users__avatar"><span class="shared-users__link-box"><i class="icon icon-sharing-link"></i></span></div><span class="shared-users__user-email">'+this.tr("Link Sharing")+'</span><span class="shared-users__user-name">',"edit"===e.linkPermission.permission?a+=""+this.tr("Anyone with the link can edit"):a+=""+this.tr("Anyone with the link can view"),a+='</span></div><div class="shared-users__perm">',"edit"===e.linkPermission.permission?a+='<i class="icon icon-folder-action-edit"></i>':a+='<i class="icon icon-folder-action-view"></i>',a+="</div></li>");var o=e.usersList;if(o)for(var r,l=-1,n=o.length-1;l<n;)(r=o[l+=1]).userId===e.ownerId?(a+='<li class="shared-users__list-row"><div class="shared-users__user"><div class="shared-users__avatar"><span class="shared-users__avatar-box avatar-box avatar-box-m"><img class="shared-users__avatar-img avatar avatar-m" src="'+r.avatar+'" /></span>',r.userId===e.ownerId&&(a+='<i class="shared-users__star icon icon-star-owner"></i>'),a+='</div><span class="shared-users__user-name">',r.firstName.length||r.lastName.length?a+=s(r.firstName)+" "+s(r.lastName):a+=""+s(r.username),a+='</span><span class="shared-users__user-email" title="'+s(r.email)+'">'+s(r.email)+'</span></div><div class="shared-users__perm"><span class="shared-users__creator">'+this.tr("Creator")+"</span></div></li>"):(a+='<li class="shared-users__list-row shared-users__list-row_hoverable _select-perm"data-id="'+s(r.email)+'"data-email="'+s(r.email)+'"><div class="shared-users__user">',"email"===r.type?a+='<div class="shared-users__avatar"><span class="shared-users__link-box"><i class="icon icon-sharing-email"></i></span></div>':(a+='<div class="shared-users__avatar"><span class="shared-users__avatar-box avatar-box avatar-box-m"><img class="shared-users__avatar-img avatar avatar-m" src="'+r.avatar+'" /></span>',r.userId===e.ownerId&&(a+='<i class="shared-users__star icon icon-star-owner"></i>'),a+="</div>"),a+='<span class="shared-users__user-name">',r.firstName.length||r.lastName.length?a+=s(r.firstName)+" "+s(r.lastName):a+=""+s(r.username),a+='</span><span class="shared-users__user-email" title="'+s(r.email)+'">'+s(r.email)+'</span></div><div class="shared-users__perm">',"edit"===r.permission?a+='<i class="icon icon-folder-action-edit"></i>':a+='<i class="icon icon-folder-action-view"></i>',a+="</div></li>");a+="</ul></div>"}else a+='<div class="shared-users__avatars _users _open-list"></div><i class="shared-users__icon arrow arrow-bottom arrow-block-1 _open-list"></i>';return a+="</div>"}},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<ul class="folder-perm-tooltip">',o=e.permList;if(o)for(var r,l=-1,n=o.length-1;l<n;)a+='<li class="folder-perm-tooltip__item folder-perm-tooltip__item_'+s((r=o[l+=1]).type)+" _"+s(r.type)+'" data-name="'+s(r.name)+'">',r.active&&(a+='<i class="folder-perm-tooltip__icon icon icon-ok"></i>'),a+='<span class="folder-perm-tooltip__title">'+s(r.title)+"</span></li>";return a+="</ul>"}},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="folder-users"><div class="folder-users__avatars">',o=e.users;if(o)for(var r,l=-1,n=o.length-1;l<n;)a+='<div class="folder-users__avatar _avatar-box" data-title="'+s((r=o[l+=1]).title)+'">',"email"===r.type?a+='<span class="shared-users__link-box"><i class="icon icon-sharing-email"></i></span>':a+='<span class="folder-users__avatar-box avatar-box avatar-box-m"><img class="folder-users__avatar-img avatar avatar-m" src="'+r.avatar+'" /></span>',r.userId===e.ownerId&&(a+='<i class="folder-users__star icon icon-star-owner"></i>'),a+="</div>";return a+="</div>",e.moreCount>0&&(a+='<div class="folder-users__more">+'+s(e.moreCount)+"</div>"),a+="</div>"}},,,,,function(e,t,i){"use strict";var s=i(478),a=i(23);e.exports=s.extend({name:"SearchCountInfo",el:!1,template:i(865),initialize:function(){this.listenTo(this.collection,"update reset",this.render)},serialize:function(){var e=this.pagerModel.get("itemsCount"),t=this.pagerModel.get("page"),i=this.app.store.get("SearchQuery").get("offset"),s=this.app.store.get("SearchQuery").get("limit");return{count:e,countFrom:1===t?1:i+1,countTo:Math.min(i+s,e),countTotal:a.numberFormat(e)}}})},function(e,t,i){"use strict";(function(t){var s=i(478),a=i(480),o=i(479).SortingMenu,r=i(479).SortingMenuEnterprise,l=i(127),n=i(481),c=i(868),h=i(867),d=i(866),u=[];e.exports=s.extend({name:"SearchSorting",el:!1,isCompact:!1,template:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.isCompact?c.apply(this,t):h.apply(this,t)},mobileMode:!1,compactMode:!0,events:{"click a":"onSortingClick","contextmenu a":"onCustomSortingClick","mouseup a":"onCustomSortingClick","click ._sorting-menu":"onSortingMenuClick"},globals:{"resize window":"onWindowResize"},initialize:function(){this.listenTo(this.app.store.get("SearchQuery"),"change:sorting paramsArrived",this.render),this.listenTo(this.app.observer,"Responsive:CloseMobileMenu",this.observeCloseMobileMenu.bind(this))},prepareRender:function(){return!!this.canRender()&&(this.mobileMode=t.browser?l.mobileMode():this.mobileMode,this.compactMode=t.browser?l.compactSearchSorting():this.compactMode,!0)},canRender:function(){var e=this.app.store.get("SearchQuery").get("sorting");return null!=this.sortingCollection.findWhere({key:e})},onSortingClick:function(e){if(e.ctrlKey||e.shiftKey||e.metaKey)this.trackNewTabClick(e);else if(e.preventDefault(),this.getView("tooltipSortingMenu")&&this.getView("tooltipSortingMenu").hide(),-1===e.currentTarget.parentNode.className.search("active")){var t=e.currentTarget.getAttribute("data-sorting"),i=this.getSortingData(),s=i.indexOf(i.find(function(e){return e.key===t}))+1;this.app.observer.broadcast("Track:UE:Search:SortingClick",{sorting:t,position:s}),this.onSearchQueryChange({sorting:t})}},onCustomSortingClick:function(e){[n.rightMouse,n.middleMouse].includes(e.which)&&this.trackNewTabClick(e)},trackNewTabClick:function(e){var t=e.currentTarget.getAttribute("data-sorting"),i=this.getSortingData(),s=i.indexOf(i.find(function(e){return e.key===t}))+1;this.app.observer.broadcast("Track:UE:ContextMenu:Open",{source:this.name,target:{target:"search"},params:{sorting:t,position:s,type:"tab"}})},onSortingMenuClick:function(e){this.compactMode&&!this.mobileMode||this.isCompact&&!this.mobileMode?(e.preventDefault(),this.getView("tooltipSortingMenu").toggle(e)):(this.mobileMode&&this.app.observer.fire("Responsive:CloseMobileMenu",{cid:this.cid}),this.$el.toggleClass("search-sorting-mobile_active"))},serialize:function(){return{sortings:this.getSortingData(),mobileMode:this.mobileMode,compactMode:this.compactMode}},clientAfterRender:function(){var e=this;this.isCompact&&this.onRenderCallback(),(this.compactMode&&!this.mobileMode||this.isCompact&&!this.mobileMode)&&this.setNotExistView("tooltipSortingMenu",a,{events:{"click a":"onSortingClick"},params:this.isCompact?r:o,content:new s({el:!1,template:d,serialize:function(){return{sortings:e.getSortingData()}}}),onSortingClick:this.onSortingClick.bind(this)})},getSortingData:function(){var e=this,t=this.sortingCollection.serialize().map(function(t){return{href:e.app.store.get("SearchQuery").defaults.sorting===t.key?e.app.parsedUrl.pathname:"?sorting="+t.key,key:t.key,label:e.tr(t.label),active:e.app.store.get("SearchQuery").get("sorting")===t.key,enabled:e.isSortingEnabled(t.key),isNew:-1!==u.indexOf(t.key)}});return t.length&&!t.some(function(e){return!0===e.active})&&(t[0].isDefault=!0),t},toTracking:function(){return this.getSortingData().filter(function(e){return e.enabled})},isSortingEnabled:function(e){var t=this.app.features.get("Enabled search sortings").get("value");return t&&t[e]&&{best_match:!0,best_sales:!this.isPurchasedTabActive,newest:!this.isPurchasedTabActive,undiscovered:!this.isPurchasedTabActive,last_activity:this.isPurchasedTabActive}[e]},onWindowResize:function(){var e=l.mobileMode(),t=l.compactSearchSorting();e!==this.mobileMode&&(this.mobileMode=e,this.getView("tooltipSortingMenu")&&this.getView("tooltipSortingMenu").hide(),this.render()),t!==this.compactMode&&(this.compactMode=t,this.getView("tooltipSortingMenu")&&this.getView("tooltipSortingMenu").hide(),this.render())},observeCloseMobileMenu:function(e){e.cid!==this.cid&&this.$el.removeClass("search-sorting-mobile_active")},onSearchQueryChange:function(){},onRenderCallback:function(){}})}).call(this,i(6))},function(e,t,i){"use strict";var s=i(0),a=i(478),o=i(23),r=i(11).sizes,l=i(869);e.exports=a.extend({name:"SearchFilterIndicators",el:!1,template:l,keys:["accuracy","category","seller","exclude_keywords","orientation","editorial_only","editorial_exclude","mr_property_only","mr_property_exclude","mr_release_quantity","gender","age","race","min_width","min_height","resolution","color"],events:{"click ._item":"onRemoveItemClick","click ._reset":"onResetClick"},initialize:function(){this.model=this.app.store.get("SearchQuery"),this.model.getRestrictions().get("editorial")||(this.keys=s.without(this.keys,"editorial_only","editorial_exclude")),this.listenTo(this.model,"change paramsArrived",this.render)},prepareRender:function(){var e={};s.each(this.model.getNonDefaults(this.keys),function(t,i){e[i]=o.makeIndicatorText(i,t)}),this.schema=e},serialize:function(){return{keys:this.keys,schema:!s.isEmpty(this.schema)&&this.schema,size:s.findWhere(r,{key:this.model.get("size_unit")}).value}},onRemoveItemClick:function(e){e.stopPropagation(),this.onIndicatorRemove(e.currentTarget.getAttribute("data-name"))},onResetClick:function(e){e.stopPropagation(),this.onIndicatorsReset(this.keys)},open:function(){this.$el.removeClass("close-animation"),this.render()},close:function(){var e=this;this.$el.addClass("close-animation"),s.delay(function(){e.$el.remove()},320)},onIndicatorRemove:s.noop,onIndicatorsReset:s.noop})},function(e,t,i){"use strict";var s=i(0),a=i(478),o=i(684),r=i(749),l=i(747),n=i(699),c=i(746),h=i(745),d=i(864),u=i(103),p=i(862),f=i(861),g=i(683);e.exports=a.extend({name:"SearchHeaderDefault",el:!1,template:p,initialize:function(){this.listenTo(this.app.observer,"SearchFilter:Toggle",this.render),this.listenTo(this.app.store.get("SearchQuery"),"change",function(e,t){s.has(e.changed,"nudity")||s.has(e.changed,"limit")||this.render()})},prepareRender:function(){if(this.setView("._search-filter-indicators",new l({app:this.app,onIndicatorRemove:this.removeFilterIndicators.bind(this),onIndicatorsReset:this.resetFilterIndicators.bind(this)})),this.setView("._search-settings",new n({app:this.app,onSearchQueryChange:this.onSearchQueryChange.bind(this),onSearchSettingsChange:this.onSearchSettingsChange.bind(this),collection:this.collection})),this.collection.length){var e={"._search-related":this.getRelatedView(),"._search-info":new r({app:this.app,template:f,searchInfo:this.searchInfo,searchAuthor:this.searchAuthor,collection:this.collection,sortingCollection:this.sortingCollection,onSearchQueryChange:this.onSearchQueryChange.bind(this)}),"._search-count-info":new h({app:this.app,pagerModel:this.pagerModel,collection:this.collection}),"._search-pager":new o({app:this.app,template:g,model:this.pagerModel,searchAuthor:this.searchAuthor,searchInfo:this.searchInfo,collection:this.collection})};this.shouldShowSorting()&&(e=s.extend(e,{"._search-sorting":new c({app:this.app,sortingCollection:this.sortingCollection,isCompact:!1,onSearchQueryChange:this.onSearchQueryChange.bind(this)})})),this.setViews(e)}},getRelatedView:function(){return new d({app:this.app,searchInfo:this.searchInfo,searchCollection:this.collection})},isFiltered:function(){return s.size(s.omit(this.app.store.get("SearchQuery").getNonDefaults(),this.app.store.get("SearchQuery").serviceFields.concat(["relatedTo","relatedItemId"])))>0},isFilterFull:function(){return this.app.store.get("SearchSettings").get("filterFull")},isFolderView:function(){return this.app.store.get("SearchQuery").get("folderId")>0},isSimilarView:function(){return"similar"===this.app.store.get("SearchQuery").get("relatedTo")},isCategoryView:function(){return!this.app.store.get("SearchSettings").get("filterFull")&&!!this.app.store.get("SearchQuery").isCategory()},isSearchView:function(){return!this.isFolderView()&&!this.isSimilarView()&&!this.isCategoryView()},isPremiumView:function(){return this.app.store.get("SearchQuery").get("sorting")===u.premiumSorting},filterIndicatorsEnabled:function(){return!this.isFolderView()&&(!this.isFilterFull()&&this.isFiltered())},infoEnabled:function(){return this.isCategoryView()||this.isFolderView()||!this.isFiltered()||this.isFilterFull()},sortingEnabled:function(){return!this.isFolderView()},shouldShowSorting:function(){var e=this.app.store.get("SearchQuery");return(null!==e.defineSpecificSearchMode()||e.get("query")||"newest"!==e.get("sorting"))&&"treasure"!==e.get("metaScope")},serialize:function(){return{headerEnabled:!0,isCategoryView:this.isCategoryView(),isFolderView:this.isFolderView(),isPremiumView:this.isPremiumView(),isSimilarView:this.isSimilarView(),isSearchView:this.isSearchView(),infoEnabled:this.infoEnabled(),filterIndicatorsEnabled:this.filterIndicatorsEnabled(),sortingEnabled:this.sortingEnabled()}}})},function(e,t,i){"use strict";var s=i(1)(i(3)),a=i(0),o=i(478),r=i(480),l=i(23).capitalize,n=i(14),c=i(481),h=i(103),d=i(479),u=i(11);e.exports=o.extend({name:"SearchInfo",el:!1,isFooter:!1,events:{"mouseenter ._level-tooltip":"showLevelTooltip","mouseleave ._level-tooltip":"hideLevelTooltip","click ._related-link":"onRelatedLinkClick","click ._link":"onLinkClick","contextmenu ._link":"onCustomLinkClick","mouseup ._link":"onCustomLinkClick","click ._anchor":"onAnchorClick"},initialize:function(){var e=this;this.listenTo(this.app.store.get("SearchQuery"),"change",this.onQueryChange),this.listenTo(this.searchInfo,"change",function(){e.searchInfo.get("count")&&e.render()})},prepareRender:function(){return!0!==this.collection.renderingDisabled&&(!(!this.isFooter&&this.hasSearchSubFilters())&&(this.removeView("levelTooltip"),!0))},serialize:function(){var e=this,t=this.getInfo(),i=this.app.store.get("SearchQuery").serialize();return a.each(t.suggestions,function(t){t.url=e.app.makeUrl({route:"Search",query:t.key})}),{isPremium:this.isPremiumContent(),isFiltered:this.isFiltered(),isSortingEnabled:this.isSortingEnabled(),isCategory:this.app.store.get("SearchQuery").isCategory(),info:t,searchParams:i,searchAuthor:a.clone(this.searchAuthor.attributes),title:{relatedKeywordsTitle:this.getKeywordsTitle("related"),trendsTitle:this.searchInfo.get("trendsTitle")||this.getKeywordsTitle("trend"),relatedPage:this.getRelatedPageTitle()},capitalize:l,fuzzyCorrection:t.isFuzzy&&this.collection.length,hideFooterTitle:this.hideFooterTitle()}},clientAfterRender:function(){var e=this;this.searchAuthor.get("level")&&this.setNotExistView("levelTooltip",r,{params:d.contributorLevel,content:new o({el:!1,searchAuthor:this.searchAuthor,template:function(){return e.tr(a.findWhere(u.contributorLevel,{level:e.searchAuthor.get("level")}).label)}})}),this.$("._related-box-text").length&&this.app.observer.broadcast("Track:UE:Search:Related",{action:"showOld",view:this.name})},toTracking:function(){var e="",t=this.getInfo(),i=t.isFuzzy&&this.collection.length>0,s=this.app.store.get("SearchQuery").serialize();if((t.suggestions.length||t.correction.length)&&(e=i?this.tr("Your search request returned too few results, so we extended it."):"Showed results for: "+t.query+"."),(i||t.original!==t.query)&&(e+="Search instead for "+l(t.original)),t.suggestions.length){var a=t.suggestions.map(function(e){return e.key}).join(", ");e+=" "+this.tr("Did you mean")+": "+a+"."}if(t.relatedItem)e+=this.stripTags(t.meta.h1);else if(this.isPremiumContent()?e+=s.query+" - "+this.tr("Premium Collection"):this.searchAuthor.get("level")&&""===s.query?e+=this.searchAuthor.get("username")+" "+this.tr("portfolio"):e+=this.stripTags(t.meta.h1),t.hints.length){var o=t.hints.filter(function(e){return e.url&&e.key}).map(function(e){return e.key}).join(", ");e+=this.getKeywordsTitle("related")+": "+o}return e},toTrackingRelated:function(e){void 0===e&&(e=this.isFooter);var t=this.getInfo(e),i=function(e){return e.filter(function(e){return e.key&&e.url})};return t.hints.length?i(t.hints):t.anchors.length?i(t.anchors):null},isFiltered:function(){return a.size(a.omit(this.app.store.get("SearchQuery").getNonDefaults(),this.app.store.get("SearchQuery").serviceFields.concat(["relatedTo","relatedItemId"])))>0},isSortingEnabled:function(){return this.sortingCollection&&this.sortingCollection.length},isPremiumContent:function(){return this.app.store.get("SearchQuery").get("sorting")===h.premiumSorting},getHints:function(e,t){return void 0===t&&(t=this.isFooter),t?e.hints:[]},getInfo:function(e){void 0===e&&(e=this.isFooter);var t=(0,s.default)({},this.searchInfo.attributes);return t.originalUrl=this.app.makeUrl({route:"Search",query:t.original},{query:{correction_required:0}}),t.hints=this.getHints(t,e),t},getKeywordsTitle:function(e){return this.tr(a.findWhere(u.searchTitles,{type:e,key:this.app.store.get("SearchQuery").defineSearchType()}).label.trim())},getRelatedPageTitle:function(){return this.app.store.get("SearchQuery").get("relatedTo")?this.searchInfo.get("meta").h1:""},hideFooterTitle:function(){return this.isFooter&&!this.app.store.get("SearchQuery").isPortfolio()&&this.app.features.isFeatureOnValue("Hide search info footer title")},onQueryChange:function(){this.isFiltered()&&this.$el.addClass("search-box__info_with-filters")},onInsteadClick:function(){this.onSearchQueryChange({query:this.searchInfo.get("original"),correction:!1})},onRelatedHintClick:function(e){var t=this.searchInfo.get("hints")[this.$("._related-hint").index(e.currentTarget)];t&&t.key&&(e.preventDefault(),this.onSearchQueryChange({query:t.key}),this.trackClickEvent(e.currentTarget))},onLinkClick:function(e){if(e.ctrlKey||e.shiftKey||e.metaKey)this.trackNewTabClick(e);else{var t=n.getExtendedQueryParams(e.currentTarget.href);t&&t.seller&&this.app.observer.broadcast("Track:UE:Portfolio:Click",{sellerId:parseInt(t.seller,10)})}},onCustomLinkClick:function(e){[c.rightMouse,c.middleMouse].includes(e.which)&&this.trackNewTabClick(e)},trackNewTabClick:function(e){var t=n.getExtendedQueryParams(e.currentTarget.href);t&&t.seller&&this.app.observer.broadcast("Track:UE:ContextMenu:Open",{source:"Portfolio",target:{target:"search"},params:{sellerId:parseInt(t.seller,10)}})},onAnchorClick:function(e){this.trackClickEvent(e.currentTarget,{position:this.$(e.currentTarget).parent().index()+1})},onRelatedLinkClick:function(e){this.trackClickEvent(e.currentTarget)},trackClickEvent:function(e,t){void 0===t&&(t={}),this.app.observer.broadcast("Track:UE:Search:Related",(0,s.default)({action:"clickOld",position:Backbone.$(e).closest("._related-item").index()+1,text:e.innerText,view:this.name},t))},showLevelTooltip:function(e){e.preventDefault(),this.getView("levelTooltip").show(e)},hideLevelTooltip:function(e){e.preventDefault(),this.getView("levelTooltip").hide(e)},stripTags:function(e){return void 0===e&&(e=""),e.replace(/<\/?[^>]+(>|$)/g,"")},onSearchQueryChange:a.noop,hasSearchSubFilters:a.noop})},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="filter-color__item"><div class="cmp-palette">';e.currentColor&&(a+='<div class="cmp-palette__selected"><i class="cmp-palette__selected-color button-color-hexagon"style="background-color: '+s(e.currentColor)+"; border-color: "+s(e.currentColor)+';"><i class="hexgon-edge hexgon-edge_0"></i><i class="hexgon-edge hexgon-edge_60"></i><i class="hexgon-edge hexgon-edge_120"></i><i class="hexgon-edge hexgon-edge_180"></i><i class="hexgon-edge hexgon-edge_240"></i><i class="hexgon-edge hexgon-edge_300"></i></i><i class="cmp-palette__selected-reset button-reset _button-reset" data-key="color"></i></div>'),a+='<div class="cmp-palette__wrap"><img class="cmp-palette__img" src="" usemap="#pallette" /><map name="pallette">';var o=e.paletteCoordinates;if(o)for(var r=-1,l=o.length-1;r<l;)a+='<area class="_color _color-hover" shape="poly" coords="'+s((u=o[r+=1]).coor.join())+'" data-value="'+s(u.hex)+'" style="cursor: pointer;" />';a+='</map><div class="cmp-palette__line">';var n=e.palette;if(n)for(var c=-1,h=n.length-1;c<h;)a+='<i class="cmp-palette__item button-color-hexagon _color-icon" data-value="'+s((u=n[c+=1]).hex)+'"style="background-color: '+s(u.hex)+"; border-color: "+s(u.hex)+';"><i class="cmp-palette__hover-box',e.currentColor&&u.hex===e.currentColor&&(a+=" cmp-palette__hover-box_shadow"),a+='"><i class="cmp-palette__edge cmp-palette__edge_0"></i><i class="cmp-palette__edge cmp-palette__edge_60"></i><i class="cmp-palette__edge cmp-palette__edge_120"></i><i class="cmp-palette__edge cmp-palette__edge_180"></i><i class="cmp-palette__edge cmp-palette__edge_240"></i><i class="cmp-palette__edge cmp-palette__edge_300"></i></i></i>',u.br&&(a+='</div><div class="cmp-palette__line">');a+='</div></div><div class="cmp-palette__adjective">';var d=e.line;if(d)for(var u,p=-1,f=d.length-1;p<f;)a+='<i class="cmp-palette__adjective-color button-color-hexagon _color _color-hover _color-icon',"#ffffff"===(u=d[p+=1]).hex&&(a+=" button-color-hexagon_white"),a+='"data-value="'+s(u.hex)+'" style="background-color: '+s(u.hex)+"; border-color: "+s(u.hex)+';"><i class="cmp-palette__hover-box cmp-palette__hover-box_border',e.currentColor&&u.hex===e.currentColor&&(a+=" cmp-palette__hover-box_active"),a+='"><i class="cmp-palette__edge cmp-palette__edge_0"></i><i class="cmp-palette__edge cmp-palette__edge_60"></i><i class="cmp-palette__edge cmp-palette__edge_120"></i><i class="cmp-palette__edge cmp-palette__edge_180"></i><i class="cmp-palette__edge cmp-palette__edge_240"></i><i class="cmp-palette__edge cmp-palette__edge_300"></i></i>',"#fff"!==u.hex&&"#ffffff"!==u.hex||(a+='<i class="hexgon-edge hexgon-edge_0"></i><i class="hexgon-edge hexgon-edge_60"></i><i class="hexgon-edge hexgon-edge_120"></i><i class="hexgon-edge hexgon-edge_180"></i><i class="hexgon-edge hexgon-edge_240"></i><i class="hexgon-edge hexgon-edge_300"></i>'),a+="</i>";return a+='</div></div><input type="hidden" name="color" value="'+s(e.currentColor)+'" /></div>'}},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="filter-people__item"><div id="slider-people" class="filter-people__slider ui-slider-block"></div>';e.model.mr_release_quantity&&e.autoSubmit&&(a+='<i class="filter-people__btn-reset filter-people__btn-reset_top button-reset _button-reset" data-key="mr_release_quantity"></i>'),a+='</div><label class="filter-people__item field-box checkbox-box checkbox-box-m ',e.model.mr_property_only&&(a+="active"),a+='"><input class="checkbox" type="checkbox" name="mr_property_only" ',e.model.mr_property_only&&(a+=' checked="checked"'),a+=' /><i class="icon icon-checkbox icon-checkbox-m"></i><span class="filter-people__item-text checkbox-text">'+this.tr("People Only")+"</span>",e.model.mr_property_only&&e.autoSubmit&&(a+='<i class="filter-people__btn-reset filter-people__btn-reset_top button-reset _button-reset" data-key="mr_property_only"></i>'),a+="</label>",e.showExcludePeople&&(a+='<label class="filter-people__item field-box checkbox-box checkbox-box-m ',e.model.mr_property_exclude&&(a+="active"),a+='"><input class="checkbox" type="checkbox" name="mr_property_exclude" ',e.model.mr_property_exclude&&(a+=' checked="checked"'),a+=' /><i class="icon icon-checkbox icon-checkbox-m"></i><span class="filter-people__item-text checkbox-text"><span class="filter-people__text">'+this.tr("Exclude People")+'</span><span class="filter-people__new label label-new-block"></span></span>',e.model.mr_property_exclude&&e.autoSubmit&&(a+='<i class="filter-people__btn-reset filter-people__btn-reset_top button-reset _button-reset" data-key="mr_property_exclude"></i>'),a+="</label>"),a+='<div class="filter-people__item"><div class="filter-people__select field-box select-box select-box-s"><i class="arrow arrow-black arrow-bottom"></i><select name="gender" class="select select-s"><option value="">'+this.tr("Any Gender")+"</option>";var o=e.genders;if(o)for(var r=-1,l=o.length-1;r<l;)u=o[r+=1],a+="<option ",e.model.gender===u.key&&(a+="selected"),a+=' value="'+s(u.key)+'">'+this.tr(u.value)+"</option>";a+="</select></div>",""!==e.model.gender&&e.autoSubmit&&(a+='<i class="filter-people__btn-reset button-reset _button-reset" data-key="gender"></i>'),a+='</div><div class="filter-people__item"><div class="filter-people__select field-box select-box select-box-s"><i class="arrow arrow-black arrow-bottom"></i><select name="age" class="select select-s"><option value="">'+this.tr("Any Age")+"</option>";var n=e.ages;if(n)for(var c=-1,h=n.length-1;c<h;)u=n[c+=1],a+="<option ",e.model.age===u.key&&(a+="selected"),a+=' value="'+s(u.key)+'">'+this.tr(u.value)+"</option>";a+="</select></div>",""!==e.model.age&&e.autoSubmit&&(a+='<i class="filter-people__btn-reset button-reset _button-reset" data-key="age"></i>'),a+='</div><div class="filter-people__item"><div class="filter-people__select field-box select-box select-box-s"><i class="arrow arrow-black arrow-bottom"></i><select name="race" class="select select-s"><option value="">'+this.tr("Any Ethnicity")+"</option>";var d=e.races;if(d)for(var u,p=-1,f=d.length-1;p<f;)u=d[p+=1],a+="<option ",e.model.race===u.key&&(a+="selected"),a+=' value="'+s(u.key)+'">'+this.tr(u.value)+"</option>";return a+="</select></div>",""!==e.model.race&&e.autoSubmit&&(a+='<i class="filter-people__btn-reset button-reset _button-reset" data-key="race"></i>'),a+="</div>",e.autoSubmit||(a+='<button class="filter-people__filter-apply button button-xl button-silver _apply">'+this.tr("Apply")+"</button>"),a}},function(e,t){e.exports=function(e){return'<section class="content__left-container"><aside class="content__left-container-inner _search-form"></aside></section>'}},,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";var s=i(48);e.exports=s.extend({url:"MixedLatestCollections",getQueryParams:{},parse:function(e){return e.result||[]}})},function(e,t,i){"use strict";var s=i(0),a=i(9),o=i(48),r=i(11),l={search:[{key:"best_match",label:s.findWhere(r.sortings,{key:"best_match"}).value},{key:"best_sales",label:s.findWhere(r.sortings,{key:"best_sales"}).value},{key:"newest",label:s.findWhere(r.sortings,{key:"newest"}).value},{key:"undiscovered",label:s.findWhere(r.sortings,{key:"undiscovered"}).value},{key:"last_activity",label:s.findWhere(r.sortings,{key:"last_activity"}).value}]};e.exports=o.extend({model:a,parse:function(e,t){return t&&s.isFunction(this[t.parser])?this[t.parser].call(this,e,t):t&&l[t.type]||[]},parseFromSearch:function(e){return s.map(e||[],function(e){return{key:e.sorting,label:e.label}})}})},function(e,t,i){"use strict";var s=i(778),a=i(721);e.exports={b:new s("b",!0,!1,!1),i:new s("i",!0,!1,!1),u:new s("u",!0,!1,!1),text:new s("text",!0,!1,!0,function(e,t,i){return t}),img:new s("img",!0,!1,!1,function(e,t,i){return'<img src="'+t+'" />'}),url:new s("url",!0,!1,!1,function(e,t,i){return'<a href="'+(i.url?a.escapeHTML(i.url):t)+'">'+t+"</a>"})}},,function(e,t,i){"use strict";var s=i(1)(i(3)),a=i(0),o=i(9),r=i(129),l=i(721),n=i(777),c=i(14),h=i(131);e.exports=o.extend({defaults:{count:0,hints:[],hintsExtended:[],anchors:!1,meta:!1,seoTemplates:!1,folderName:"",relatedItem:void 0,correction:"",correctionInsteadText:"",correctionText:"",isFuzzy:!1,original:"",query:"",suggestions:[],suggestionText:"",trends:[],trendsTitle:""},parse:function(e){var t=new l(n),i=e.seo_meta?e.seo_meta.meta:[];return i.h1&&!i.parsed&&(i.h1=t.parseString(i.h1),i.parsed=!0),a.extend({},{relatedItem:e.item?new r(e.item,{parse:!0,app:this.app}):void 0,folderName:e.folderName||"",count:+e.count,meta:i,seoTemplates:e.seo_meta.seoTemplates||{},hints:e.seo_meta?this.parseHints(e.seo_meta.hints):[],hintsExtended:this.parseHintsExtended(e.seo_meta),anchors:e.seo_meta?this.parseHints(e.seo_meta.anchors):[],trends:e.seo_meta?this.parseHints(e.seo_meta.trends):[]},e.did_you_mean?this.parseDidYouMean(e):{})},parseHints:function(e){var t=this;return a.map(e,function(e,i){return{key:i,url:c.urlFormat(e,{protocol:t.app.parsedUrl.protocol,host:t.app.host})}})},parseHintsExtended:function(e){var t=this;if(!e||!e.hintsExtended)return[];return e.hintsExtended.map(function(e){return(0,s.default)({},e.attributes,{thumbs:e.attributes.previews.map(function(e){return i=e,h.getThumbUrl({size:"big",protocol:t.app.parsedUrl.protocol,file:(0,s.default)({id:i.itemId,thumbSource:i.uploadHost},i)});var i})})})},parseHintExtended:function(e,t){var i=this;return a.isEmpty(e)||!e.url?{}:{key:e.phrase,url:c.urlFormat(e.url,{protocol:this.app.parsedUrl.protocol,host:this.app.host}),hash:e.hash,thumbs:a.map(e.sections&&e.sections[t]||[],function(e){return e.id=e.itemId,e.thumbSource=e.uploadHost,h.getThumbUrl({file:e,size:"big",protocol:i.app.parsedUrl.protocol})})}},parseDidYouMean:function(e){var t=e.did_you_mean;return t.suggestions&&(t.suggestions=this.parseHints(t.suggestionLinks?t.suggestionLinks:t.suggestions)),t},isSearchCorrectionEnabled:function(){return!!this.get("correction")},isSearchCorrectionIgnored:function(){var e=this.previousAttributes();return e&&e.correction&&!this.get("correction")}})},function(e,t,i){"use strict";e.exports.defaults={id:null,username:null,firstName:null,lastName:null,avatarBig:null,avatarSmall:null,level:null},e.exports.responseMap={userId:"id"}},function(e,t,i){"use strict";var s=i(0),a=i(9),o=i(780);e.exports=a.extend({defaults:o.defaults,parse:function(e){var t={};return s.each(e,function(e,i){var a=o.responseMap[i]||i;s.has(o.defaults,a)&&(t[a]=e)}),t}})},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="search-box__settings';return e.isCategory&&(a+=" search-box__settings_category"),a+='">',e.isSettingsEnabled&&(a+='<a class="button-settings _btn-settings '+s(e.settingsClassName)+'"><i class="icon icon-settings"></i><i class="arrow arrow-black arrow-bottom"></i></a>'),e.isLayoutSwitcherEnabled&&(a+='<div class="search-box__layout">\x3c!--Button hidden with DPWEB-30780--\x3e\x3c!--<a class="button-layout button-layout-normal _btn-layout ',"normal"===e.layout&&(a+="active"),a+='" data-layout="normal">--\x3e\x3c!--&lt;!&ndash;todo: replace by icon &ndash;&gt;--\x3e\x3c!--<i class="bl-part"></i>--\x3e\x3c!--<i class="bl-part"></i>--\x3e\x3c!--<i class="bl-part"></i>--\x3e\x3c!--<i class="bl-part"></i>--\x3e\x3c!--<i class="bl-part"></i>--\x3e\x3c!--<i class="bl-part"></i>--\x3e\x3c!--<i class="bl-part"></i>--\x3e\x3c!--<i class="bl-part"></i>--\x3e\x3c!--<i class="bl-part"></i>--\x3e\x3c!--</a>--\x3e<a class="button-layout button-layout-big _btn-layout ',"big"===e.layout&&(a+="active"),a+='" data-layout="big">\x3c!--todo: replace by icon --\x3e<i class="bl-part"></i><i class="bl-part"></i><i class="bl-part"></i><i class="bl-part"></i></a><a class="button-layout button-layout-wide _btn-layout ',"wide"===e.layout&&(a+="active"),a+='" data-layout="wide">\x3c!--todo: replace by icon --\x3e<i class="bl-part bl-part-narrow"></i><i class="bl-part bl-part-wide"></i><i class="bl-part bl-part-wide"></i><i class="bl-part bl-part-narrow"></i></a></div>'),a+='<i class="search-box__mobile-filter-btn icon icon-mobile-filters _mobile-filters"></i>',e.mobileMode&&(a+='<div class="search-box__settings-mobile _mobile-settings"></div>'),a+="</div>"}},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a="";if(!e.mobileMode||e.filesPerPageSettings.mobile===e.mobileMode){a+='<div class="search-settings__item"><span class="search-settings__title">'+this.tr(e.filesPerPageSettings.label)+'</span><div class="search-settings__select field-box select-box select-box-s"><i class="arrow arrow-black arrow-bottom"></i><select name="'+s(e.filesPerPageSettings.name)+'" class="select select-s">';var o=e.filesPerPageSettings.options;if(o)for(var r,l=-1,n=o.length-1;l<n;)a+='<option value="'+s(r=o[l+=1])+'" ',r==e.filesPerPageSettings.current&&(a+="selected"),a+=">"+s(r)+"</option>";a+="</select></div></div>"}var c=e.switcherSettings;if(c)for(var h,d=-1,u=c.length-1;d<u;)(h=c[d+=1]).hide||e.mobileMode&&h.mobile!==e.mobileMode||(a+='<div class="search-settings__item"><span class="search-settings__title">'+this.tr(h.label)+"</span><",h.tag?a+=""+s(h.tag):a+="label",a+=' class="switcher',h.disabled&&(a+=" disabled _switcher-disabled"),a+=" "+s(h.className||"")+'"><input class="switcher-checkbox '+s(h.inputClass||"")+'" type="checkbox" name="'+s(h.name)+'"',h.value&&(a+=' value="'+s(h.value)+'"'),h.checked&&(a+=' checked="checked"'),h.disabled&&(a+=" disabled"),a+=' /><span class="switcher-holder"><span class="switch-off"><span class="title">'+s(h.labelOff||"Off")+'</span></span><span class="switch-on"><span class="title">'+s(h.labelOn||"On")+'</span></span></span><i class="circle"></i></',h.tag?a+=""+s(h.tag):a+="label",a+="></div>");return e.mobileMode?a+='<div class="search-settings__footer"><span class="search-settings__close _btn-close-settings">'+this.tr("Close")+"</span></div>":a+='<div class="search-settings__footer"><a class="search-settings__reset _btn-reset-settings">'+this.tr("Reset to Defaults")+"</a></div>",a}},function(e,t,i){"use strict";var s=i(0),a=i(478),o=i(11).searchSettingsLabels,r=i(783);e.exports=a.extend({name:"SearchSettingsList",template:r,mobileMode:!1,settingsMap:{},events:{"change :checkbox":"onSwitcherChange","change select":"onLimitChange","click ._btn-reset-settings":"onResetSettingsClick"},initialize:function(){var e=this;this.model=this.app.store.get("SearchSettings"),this.listenTo(this.model,"change",this.rePaintLayout),this.listenTo(this.app.store.get("SearchQuery"),"change:limit change:nudity",function(t){e.trackSettingsChange(t),e.rePaintLayout(t)})},rePaintLayout:function(e){var t;s.each(e.changed,function(e,i){"limit"===i?(t=parseInt(this.$("select[name="+i+"]").val(),10))!==e&&this.$("select[name="+i+"]").val(e):((t=!!this.$("input[name="+i+"]").prop("checked"))!==e||"nudity"===i&&t===e)&&this.$("input[name="+i+"]").prop("checked","nudity"===i?!e:e)},this)},trackSettingsChange:function(e){this.app.observer.broadcast("Track:UE:SearchSettings:Change",{changed:e.changed})},onSwitcherChange:function(e){var t={};"nudity"===e.currentTarget.name?(t[e.currentTarget.name]=!e.currentTarget.checked,this.onSearchQueryChange(t)):(t[e.currentTarget.name]=!!e.currentTarget.checked,this.onSearchSettingsChange(t))},onLimitChange:function(e){this.onSearchQueryChange({limit:parseInt(e.currentTarget.value,10)})},onResetSettingsClick:function(){this.onSearchQueryChange(s.pick(this.app.store.get("SearchQuery").defaults,"limit","nudity")),this.onSearchSettingsChange(s.omit(this.model.defaults,"layout","filterFull"))},serialize:function(){var e="wide"===this.model.get("layout")&&(this.app.store.get("SearchQuery").get("photo")||this.app.store.get("SearchQuery").get("vector"));return{mobileMode:this.mobileMode,filesPerPageSettings:{name:"limit",label:s.findWhere(o,{key:"limit"}).label,options:this.app.store.get("SearchQuery").validation.limit.oneOf,current:this.app.store.get("SearchQuery").get("limit"),mobile:!0},switcherSettings:[{name:"previews",label:s.findWhere(o,{key:"previews"}).label,checked:this.model.get("previews")&&!e,className:"search-settings__switcher",mobile:!1,disabled:e,hide:!1===this.settingsMap.previews},{name:"title",label:s.findWhere(o,{key:"title"}).label,checked:this.model.get("title"),className:"search-settings__switcher",mobile:!1,hide:!1===this.settingsMap.title},{name:"type",label:s.findWhere(o,{key:"type"}).label,checked:this.model.get("type"),className:"search-settings__switcher",mobile:!0,hide:!1===this.settingsMap.type},{name:"author",label:s.findWhere(o,{key:"author"}).label,checked:this.model.get("author"),className:"search-settings__switcher",mobile:!1,hide:!1===this.settingsMap.author},{name:"maxsize",label:s.findWhere(o,{key:"maxsize"}).label,checked:this.model.get("maxsize"),className:"search-settings__switcher",mobile:!1,hide:!1===this.settingsMap.maxsize},{name:"videoLength",label:s.findWhere(o,{key:"videoLength"}).label,checked:this.model.get("videoLength"),className:"search-settings__switcher",mobile:!1,hide:!1===this.settingsMap.videoLength},{name:"linkTarget",label:s.findWhere(o,{key:"linkTarget"}).label,checked:this.model.get("linkTarget"),className:"search-settings__switcher",mobile:!0,hide:!1===this.settingsMap.linkTarget},{name:"nudity",label:s.findWhere(o,{key:"nudity"}).label,checked:!this.app.store.get("SearchQuery").get("nudity"),className:"search-settings__switcher",mobile:!0,hide:!1===this.settingsMap.nudity}]}},onSearchQueryChange:s.noop,onSearchSettingsChange:s.noop})},function(e,t){e.exports=function(e){var t='<div class="search-box__no-result';return e.isFolder&&(t+=" search-box__no-result_folder"),t+='"><i class="search-box__no-result-icon icon icon-search-huge"></i><h1 class="search-box__no-result-info">',e.isFolder?t+=""+this.tr('Sorry, but we haven\'t found anything for "<b class="%s">%s</b>"',["",e.searchQuery.folderQuery]):e.info.meta&&e.info.meta.h1?t+=""+e.info.meta.h1:t+=""+this.tr("Sorry, but we haven't found anything. Please change your search query or select another filter."),t+='</h1><div class="search-box__no-result-advice-box"><div class="search-box__no-result-advice-item"><i class="search-box__no-result-advice-icon icon icon-round-ok-middle"></i><span class="search-box__no-result-advice-text">'+this.tr("Be sure to check your spelling")+'</span></div><div class="search-box__no-result-advice-item"><i class="search-box__no-result-advice-icon icon icon-search-refine-middle"></i><span class="search-box__no-result-advice-text">'+this.tr("Refine your keywords")+'</span></div><div class="search-box__no-result-advice-item"><i class="search-box__no-result-advice-icon icon icon-lightning-middle"></i><span class="search-box__no-result-advice-text">'+this.tr("Try to use simpler search")+"</span></div></div></div>"}},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="latest-collections"><h3 class="latest-collections__title">'+this.tr("Explore Latest Hand-Picked Collections")+'</h3><div class="latest-collections__items-box">',o=e.items;if(o)for(var r,l=-1,n=o.length-1;l<n;)a+='<a class="latest-collections__item _item" href="'+(r=o[l+=1]).link+'"><span class="latest-collections__item-image" style="background-image: url('+s(r.img)+')"></span><span class="latest-collections__item-title">'+this.tr(r.title)+"</span></a>";return a+="</div></div>"}},function(e,t,i){"use strict";var s=i(478),a=i(786);e.exports=s.extend({name:"LatestCollections",el:!1,template:a,events:{"click ._item":"onItemClick"},serialize:function(){return{items:this.collection.serialize()}},onItemClick:function(e){this.app.observer.broadcast("Track:UE:LatestCollections:Click",{params:{position:this.$(e.currentTarget).index()+1,type:"banner",text:e.currentTarget.innerText}})}})},function(e,t,i){"use strict";var s=i(478),a=i(632),o=i(694),r=i(787),l=i(785);e.exports=s.extend({name:"SearchNoResult",el:!1,template:l,topKeywords:[],initialize:function(){this.searchQuery=this.app.store.get("SearchQuery"),this.setViews({"":this.getContentViews()})},serialize:function(){return{isFolder:this.isFolder(),searchQuery:this.searchQuery.serialize(),info:this.searchInfo.attributes}},getContentViews:function(){return this.isFolder()?[]:[new r({app:this.app,collection:this.collection}),new a({app:this.app,collection:this.topKeywords,updateOnItemsTypeChange:!0,searchType:this.app.store.get("SearchQuery").defineSearchType(),className:"top-keywords top-keywords_location-search"}),new o({app:this.app,banners:this.banners})]},isFolder:function(){return!!this.searchQuery.get("folderQuery").length}})},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="'+s(e.layoutClasses)+'"';e.firstFileVideoMeta&&(a+=' itemscope itemtype="http://schema.org/VideoObject"'),a+=">",e.firstFileVideoMeta&&(a+='<meta itemprop="name" content="'+s(e.firstFileVideoMeta.name)+'" /><meta itemprop="description" content="'+s(e.firstFileVideoMeta.description)+'" /><meta itemprop="thumbnailUrl" content="'+e.firstFileVideoMeta.thumbnailUrl+'" /><meta itemprop="uploadDate" content="'+s(e.firstFileVideoMeta.uploadDate)+'" /><meta itemprop="duration" content="'+s(e.firstFileVideoMeta.duration)+'" /><meta itemprop="contentUrl" content="'+e.firstFileVideoMeta.contentUrl+'" />');var o=e.files;if(o)for(var r,l=-1,n=o.length-1;l<n;)r=o[l+=1],"wide"===e.settings.layout?(a+='<div data-id="'+s(r.id)+'" class="'+s(e.fileBoxClasses)+" file-box_"+s(r.type)+' file-wide-box file-wide-box_align" ',e.itemsData[r.id]&&(a+='style="'+s(e.itemsData[r.id].boxStyle)+'"'),a+=">",r.free&&(a+='<svg width="0" height="0" class="file-box__svg-label"><defs><clipPath id="red-label-clippath" clipPathUnits="objectBoundingBox"><polygon points="0 0, 0.5 1, 1 0"></polygon></clipPath></defs></svg>'),a+='<a class="file-wide-box__link _file-box-link file-wide-box__link_align" href="'+r.url+'"',e.settings.linkTarget&&(a+=' target="_blank"'),e.itemsData[r.id]&&(a+=' style="',"video"!==r.type?a+=""+s(e.itemsData[r.id].holderStyle):a+=""+s(e.itemsData[r.id].linkStyle),a+='"'),a+='><span class="file-wide-box__holder file-box-image _file-box-holder _file-box-image"><img src="',e.previousLayout?a+=""+s(r.thumbs[e.previousLayout]):a+=""+s(r.thumbs[e.settings.layout]),a+='"',e.previousLayout&&(a+=' data-next-src="'+r.thumbs[e.settings.layout]+'"'),a+='class="file-wide-box__image',r.width>r.height?a+=" file-wide-box__image_v":r.width<r.height?a+=" file-wide-box__image_h":a+=" file-wide-box__image_s","video"===r.type&&(a+=" file-wide-box__image_video"),a+=' _file-box-image-src _remove-title-attr"alt="'+s(r.seoAlt)+'" title="'+s(r.seoTitle)+'"',e.itemsData[r.id]&&(a+=' style="'+s(e.itemsData[r.id].imageStyle)+'"'),a+=' /></span></a><div class="file-wide-box__title"><a class="file-wide-box__title-link" href="'+r.url+'" ',e.settings.linkTarget&&(a+='target="_blank"'),a+=">"+s(r.calculatedSeoTitle)+'</a></div><div class="file-wide-box__actions '+s(e.itemsData[r.id].className)+'">',e.isEnterpriseUser||(a+='<button class="file-box__action-item button button-circle button-add-to-cart',r.inCart&&(a+=" active"),a+=' _to-cart"title="',r.inCart?a+=""+this.tr("Remove from Shopping Cart"):a+=""+this.tr("Add to Shopping Cart"),a+='"></button>'),a+='<button class="file-box__action-item button button-circle button-add-to-favorites',r.inFavorites&&(a+=" active"),a+=' _to-favorites"title="',r.inFavorites?a+=""+this.tr("Remove from Favorites"):a+=""+this.tr("Add to Favorites"),a+='"></button><button class="file-box__action-item button button-circle '+s(e.actionButtonType)+' button-see-more-similars _to-similar"title="',"video"===r.type?a+=""+this.tr("Find Similar Videos"):a+=""+this.tr("Find Similar Images"),a+='"></button></div>',"video"!==r.type&&(a+='<div class="file-wide-box__zoom"><button class="file-box__action-zoom button-zoom button-zoom-small _zoom" title="'+this.tr("Quick Preview")+'"></button></div>',e.isFolder&&e.isEditableFolder&&(a+='<div class="file-wide-box__cover"><button class="file-box__action-cover button-cover _cover" title="'+this.tr("Set as Folder Cover")+'"></button></div>')),a+='<div class="file-wide-box__info">',r.free&&(a+='<div class="file-box__sale-free',r.isFreeCurated&&(a+=" file-box__sale-free_simple"),a+='"><div class="label label-sale',r.isFreeCurated&&(a+=" label-sale_curated"),a+='">'+s(r.freeLabel)+"</div></div>"),a+='<div class="file-box__indicator">',e.isEnterpriseUser||(a+='<span class="file-box__indicator-item label label-in-cart _label-in-cart ',r.inCart||(a+=" hidden"),a+='"title="'+this.tr("In Shopping Cart")+'"></span>'),a+='<span class="file-box__indicator-item label label-in-favorites _label-in-favorites',r.inFavorites||(a+=" hidden"),a+='"title="'+this.tr("Added to Favorites")+'"></span></div><div class="file-box__type label label-type label-type-'+s(r.type)+'"></div><div class="file-box__contributor label label-contributor">'+s(r.sellerName)+'</div><div class="file-box__maxsize label label-maxsize">'+s(r.width)+" x "+s(r.height)+"</div>","video"===r.type&&(a+='<div class="file-box__video-length label label-video-length">'+s(r.formattedLength)+"</div>"),a+="</div></div>"):(a+='<div data-id="'+s(r.id)+'" class="'+s(e.fileBoxClasses)+'" ',e.itemsData[r.id]&&(a+='style="'+s(e.itemsData[r.id].boxStyle)+'"'),a+='><div class="file-box__link _file-box-link" ',e.itemsData[r.id]&&(a+='style="'+s(e.itemsData[r.id].linkStyle)+'"'),a+='><a class="file-box__holder _file-box-holder" href="'+r.url+'" ',e.settings.linkTarget&&(a+='target="_blank"'),a+='><span class="'+s(e.imageHolderClasses),r.width>r.height?(a+=" file-box__image-holder_vertical",r.height/r.width<110/170&&(a+=" file-box__image-holder_limit")):r.width<r.height?(a+=" file-box__image-holder_horizontal",r.width/r.height<110/170&&(a+=" file-box__image-holder_limit")):a+=" file-box__image-holder_square",a+=' _file-box-image" ',e.itemsData[r.id]&&(a+='style="'+s(e.itemsData[r.id].holderStyle)+'"'),a+='><img src="',e.previousLayout?a+=""+s(r.thumbs[e.previousLayout]):a+=""+s(r.thumbs[e.settings.layout]),a+='"',e.previousLayout&&(a+=' data-next-src="'+r.thumbs[e.settings.layout]+'"'),a+=' class="file-box-image__image _file-box-image-src _remove-title-attr"  alt="'+s(r.seoAlt)+'" title="'+s(r.seoTitle)+'" /><span class="file-box-image__title">'+s(r.calculatedSeoTitle)+"</span></span></a>",r.free&&(a+='<div class="file-box__sale-free',r.isFreeCurated&&(a+=" file-box__sale-free_simple"),a+='"><div class="label label-sale',r.isFreeCurated&&(a+=" label-sale_curated"),a+='">'+s(r.freeLabel)+"</div></div>"),a+='<div class="file-box__indicator">',e.isEnterpriseUser||(a+='<span class="file-box__indicator-item label label-in-cart _label-in-cart ',r.inCart||(a+=" hidden"),a+='" title="'+this.tr("In Shopping Cart")+'"></span>'),a+='<span class="file-box__indicator-item label label-in-favorites _label-in-favorites',r.inFavorites||(a+=" hidden"),a+='" title="'+this.tr("Added to Favorites")+'"></span></div><div class="file-box__type label label-type label-type-'+s(r.type)+'"></div><div class="file-box__contributor label label-contributor">'+s(r.sellerName)+'</div><div class="file-box__maxsize label label-maxsize">'+s(r.width)+" x "+s(r.height)+'</div><div class="file-box__action '+s(e.itemsData[r.id].className)+'">',e.isEnterpriseUser||(a+='<button class="file-box__action-item button button-circle '+s(e.actionButtonType)+" button-add-to-cart",r.inCart&&(a+=" active"),a+=' _to-cart"title="',r.inCart?a+=""+this.tr("Remove from Shopping Cart"):a+=""+this.tr("Add to Shopping Cart"),a+='"></button>'),a+='<button class="file-box__action-item button button-circle '+s(e.actionButtonType)+" button-add-to-favorites",r.inFavorites&&(a+=" active"),a+=' _to-favorites"title="',r.inFavorites?a+=""+this.tr("Remove from Favorites"):a+=""+this.tr("Add to Favorites"),a+='"></button><button class="file-box__action-item button button-circle '+s(e.actionButtonType)+' button-see-more-similars _to-similar"title="',"video"===r.type?a+=""+this.tr("Find Similar Videos"):a+=""+this.tr("Find Similar Images"),a+='"></button></div>',"video"!==r.type&&(a+='<div class="file-box__zoom"><button class="file-box__action-zoom button-zoom button-zoom-small _zoom" title="'+this.tr("Quick Preview")+'"></button></div>',e.isFolder&&(a+='<div class="file-box__cover"><button class="file-box__action-cover button-cover _cover" title="'+this.tr("Set as Folder Cover")+'"></button></div>')),a+="</div></div>");return e.isButtonNextVisible&&(a+='<div data-id="next" class="files-list__next"><a href="'+e.buttonNextHref+'" class="files-list__next-btn button button-5xl button-watery button-glass _next-link">'+this.tr("Next Page")+"</a></div>"),a+="</div>"}},function(e,t,i){"use strict";var s=i(497);e.exports=s.extend({name:"MagicVideoPreview",el:void 0,tagName:"span",className:"file-box-video",muted:!0,controls:!1,viewMode:"wide"})},function(e,t,i){"use strict";(function(t){var s=i(0),a=i(16),o=i(526),r=i(695),l=i(525),n=i(790),c=i(48),h=i(499),d=i(141),u=i(127),p=i(23),f=i(789),g=i(481),m=o.extend({name:"SearchFilesList",el:!1,template:f,asyncFileViewModalLoad:!1,storeFileViewModalAsLastViewed:!0,needToUpdateHistoryState:!0,previousLayout:null,selectedIndex:null,sizeReplaceItems:[],events:s.extend({},o.prototype.events,{"mouseenter .search-file-box":"onSearchFileMouseEnter","mouseleave .search-file-box":"onSearchFileMouseLeave","click ._next-link":"onNextLinkClick","contextmenu ._next-link":"onCustomNextLinkClick","mouseup ._next-link":"onCustomNextLinkClick","mouseup .file-box":"onFileMouseClick"}),globals:s.extend({},o.prototype.globals,{"resize window":"onWindowResize",keyup:"onKeyUp"}),onWindowResize:s.throttle(function(){u.canArrangeFilesList()&&this.arrangeFiles()},3),leftEdgeCallback:function(){return this.prevPage()},rightEdgeCallback:function(){return this.nextPage()},makeFileBoxClasses:function(){return p.classNames({"file-box":!0,"search-file-box":!0})},makeImageHolderClasses:function(){return p.classNames({"file-box-image":!0,"file-box__image-holder":!0})},onPopStateChange:function(){this.isQViewEnabled()?this.showFileViewModal(this.app.queryParams.qview,{replaceState:!0,ecommerce:!1}):this.hideFileViewModal({doNotUpdateHistoryState:!0})},pagerDirection:void 0,initialize:function(){this.pagerModel&&this.listenTo(this.pagerModel,"change",function(){this.pagerDirection=this.pagerModel.getDirection()}),this.setFileEventsListeners(),this.initCache(),this.on("clientAfterRender",this.trackImpression),this.listenTo(this.collection,"reset update",this.updateFilesList),this.listenTo(this.app.store.get("SearchSettings"),"change",this.rePaintLayout)},prepareRender:function(){return!0!==this.collection.renderingDisabled&&(-1===this.selectedIndex&&(this.selectedIndex+=this.collection.length),this.hideFilePreview(),!0)},serialize:function(){return this.setHolderWidth(),s.extend({},this.getRenderData(),{isEnterpriseUser:this.app.user.isEnterprise(),isFolder:this.isFolder(),isEditableFolder:this.isEditableFolder(),files:this.collection.serializeForSearchPage(),isButtonNextVisible:!!this.pagerModel&&(this.collection.length>0&&this.pagerModel.isNextPageAvailable(this.app.store.get("SearchQuery"),this.collection)),buttonNextHref:this.pagerModel?this.pagerModel.getSchema(this.app.store.get("SearchQuery"),this.searchAuthor,this.collection).next:"",actionButtonType:"normal"===this.getLayout()?"button-circle-s":"",firstFileVideoMeta:this.getFirstFileVideoMeta()})},onSearchFileMouseEnter:function(e){var t=this;this.showFilePreview(e),a.$(e.currentTarget).data("ui-draggable")||h(a.$(e.currentTarget),this,{helperOptions:{mode:"search",defaults:this.getRenderData.bind(this),getModel:function(){return t.collection.findWhere({id:parseInt(a.$(e.currentTarget).data("id"),10)}).toSearchResult()}}})},onSearchFileMouseLeave:function(){this.hideFilePreview()},getRenderData:function(){return{settings:s.extend(this.app.store.get("SearchSettings").serialize(),{layout:this.getLayout(),linkTarget:this.getLinkTarget()}),previousLayout:this.previousLayout,imageHolderClasses:this.makeImageHolderClasses(),fileBoxClasses:this.makeFileBoxClasses(),layoutClasses:this.makeLayoutClasses(),itemsData:this.getItemsData()}},getFirstFileVideoMeta:function(){if("video"!==this.app.store.get("SearchQuery").defineSearchType()||!this.collection.length)return null;var e=this.app.store.get("SearchQuery").get("query");return s.extend(this.collection.first().getVideoMeta(),{name:e,description:e})},clientAfterRender:function(){var e=this;if(this.setNotExistView("FilePreviewTooltip",l,{app:this.app}),this.previousLayout&&(this.$("._file-box-image-src").each(function(e,t){t.setAttribute("src",this.getAttribute("data-next-src")),t.removeAttribute("data-next-src")}),this.previousLayout=null),this.isQViewEnabled()&&(this.isAnyModalOpened()||this.showFileViewModal(this.app.queryParams.qview,{replaceState:!0,ecommerce:!1})),this.holderWidth||this.arrangeFiles(),this.$("._remove-title-attr").removeAttr("title"),"wide"===this.getLayout()&&(this.$el.removeClass("files-list_layout-wide-images_align"),this.$(".button-next-box_align").removeClass("button-next-box_align"),this.$(".button-next-box__link_align").removeClass("button-next-box__link_align"),s.each(this.$(".file-wide-box"),function(e){e.classList.remove("file-wide-box_align"),e.getElementsByClassName("_file-box-link")[0].classList.remove("file-wide-box__link_align")}),this.setZoomInOutContainerClearance()),this.isFolder()){var t=this.app.store.get("Folder");t&&this.$("[data-id="+t.get("coverId")+"] ._cover").addClass("active")}s.delay(function(){return e.improveThumbsQuality()},500)},isQViewEnabled:function(){return!!this.app.queryParams.qview},isFolder:function(){return!!this.app.queryParams.folderId},isEditableFolder:function(){var e=this.isFolder()?this.app.store.get("Folder"):null;return!!e&&"edit"===e.get("permission")},shouldEnableAdminModal:function(){return!this.app.user.isEnterprise()&&this.app.user.hasPermissionsTo("item","rate")},trackItemInfoOpen:function(e){var t=this.getTrackingInfo(),i=this.$(e).closest("[data-id]").data("id");this.app.observer.broadcast("Track:UE:File:OpenFileView",{action:"newTab",file:this.collection.get(i),sorting:t.sorting,source:"FileThumb",view:this.name})},onFileClick:function(e){var t;if(e.ctrlKey||e.metaKey||this.getLinkTarget())this.trackItemInfoOpen(e.currentTarget);else{this.hideFilePreview("force");for(var i=arguments.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];(t=o.prototype.onFileClick).call.apply(t,[this,e].concat(s))}},onFileMouseClick:function(e){e.which===g.middleMouse&&this.trackItemInfoOpen(e.currentTarget)},getIndexById:function(e){return this.collection.indexOf(this.collection.get(+e))},onKeyUp:function(e){for(var t,i=arguments.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];(t=o.prototype.onKeyUpModal).call.apply(t,[this,e].concat(s)),!this.isAnyModalOpened()&&this.canChangePage()&&(37===e.keyCode?this.prevPage():39===e.keyCode&&this.nextPage())},canChangePage:function(){return"body"===document.activeElement.tagName.toString().toLowerCase()},nextPage:function(){this.pagerModel&&this.pagerModel.isNextPageAvailable(this.app.store.get("SearchQuery"))&&(this.selectedIndex=0,this.pagerModel.secureSet("page",this.pagerModel.get("page")+1),window.scroll("top",0))},prevPage:function(){this.pagerModel&&this.pagerModel.get("page")>1&&(this.selectedIndex=-1,this.pagerModel.secureSet("page",this.pagerModel.get("page")-1),window.scroll("top",0))},prepareSeoTitle:function(){this.collection.each(function(e){return e.generateSeoTitle()})},getLayout:function(){return t.browser&&u.mobilePhone()?this.app.store.get("SearchSettings").get("layout"):this.defaultLayout||this.app.store.get("SearchSettings").get("layout")},getLinkTarget:function(){return this.app.features.isFeatureOnValue("Search Without File View Modal")||this.app.store.get("SearchSettings").get("linkTarget")},updateFilesList:function(){if(this.collection.length){if(this.isOwnModalOpened()){var e="prev"===(this.pagerModel.getDirection()||this.pagerDirection)?this.collection.last():this.collection.first();this.showFileViewModal(e.get("id"),{replaceState:!0})}this.render()}},rePaintLayout:function(e){if(e.changed.layout)return this.previousLayout=e.previous("layout"),void this.render();var t=s.keys(e.changed);if(s.size(s.intersection(["videoLength","title","author","type","maxsize","linkTarget"],t))>0&&this.$el.attr("class",this.makeLayoutClasses()),s.has(e.changed,"linkTarget")){var i="wide"===e.get("layout")?".file-wide-box__link":".file-box__holder";a.$(i,this.$el).each(function(t,i){e.changed.linkTarget?i.setAttribute("target","_blank"):i.removeAttribute("target")})}},onNextLinkClick:function(e){e.ctrlKey||e.shiftKey||e.metaKey?this.trackNewTabClick(e):(e.preventDefault(),this.nextPage(),this.app.observer.broadcast("Track:UE:Pager:NextButton"))},onCustomNextLinkClick:function(e){[g.rightMouse,g.middleMouse].includes(e.which)&&this.trackNewTabClick(e)},trackNewTabClick:function(e){this.app.observer.broadcast("Track:UE:ContextMenu:Open",{source:"Pager",target:{target:"search"}})},showFilePreview:function(e){var t=this.collection.get(e.currentTarget.getAttribute("data-id"));t&&(this.isFilePreviewEnabled()||this.isWideVideoSearchResults(t))&&!this.isWideImageVectorSearchResults(t)&&(this.isWideVideoSearchResults(t)?this.showMagicVideoPreview({anchor:e.currentTarget,contentData:{file:t,layout:this.getLayout()}}):u.canShowPreviewTooltips()&&this.getView("FilePreviewTooltip").show(e,{anchor:e.currentTarget,contentData:{file:t,layout:this.getLayout()}}))},showMagicVideoPreview:function(e){var t=this.$(e.anchor).find("._file-box-image");this.setView("MagicVideoPreview",new n({$mount:this.$(e.anchor).find("._file-box-holder"),$poster:t,width:t.outerWidth(),height:t.outerHeight(),file:e.contentData.file,app:this.app})).render()},hideFilePreview:function(e){this.getView("FilePreviewTooltip")&&this.getView("FilePreviewTooltip").hide(!!e),this.getView("MagicVideoPreview")&&this.getView("MagicVideoPreview").remove()},isFilePreviewEnabled:function(){return this.app.store.get("SearchSettings").get("previews")},isWideVideoSearchResults:function(e){return"video"===e.get("type")&&"wide"===this.getLayout()},isWideImageVectorSearchResults:function(e){return("image"===e.get("type")||"vector"===e.get("type"))&&"wide"===this.getLayout()},getItemsData:function(){var e=this,t={};if(!this.collection.length)return t;var i=this.getItemsDimensions(),a=this.getLayout();return 0===this.holderWidth?s.each(i,function(e){t[e.id]={boxStyle:{},linkStyle:{},holderStyle:{width:"wide"===a?e.w:"auto",height:"wide"===a?e.h:"auto",paddingLeft:"0",paddingRight:"0"}}}):t="wide"===a?this.collection.includeOnlyVideoFiles()?this.getWideVideoItemsData(i):this.getWideItemsData(i):this.getAdjustItemsData(i),t.next&&("wide"===a?(t.next.holderStyle.paddingLeft=0,t.next.holderStyle.paddingRight=0):t.next.linkStyle.height-0?t.next.holderStyle={height:t.next.linkStyle.height}:t.next.holderStyle={}),this.sizeReplaceItems=[],s.each(t,function(t,i){var s=0;t.lowQuality&&e.sizeReplaceItems.push(i),t.holderStyle.width>=132&&t.holderStyle.width<=200?s=1:t.holderStyle.width>200&&(s=2),t.className="file-box__action-box-size-"+s,t.boxStyle=e.convertStyleToString(t.boxStyle),t.linkStyle=e.convertStyleToString(t.linkStyle),t.holderStyle=e.convertStyleToString(t.holderStyle),t.imageStyle=e.convertStyleToString(t.imageStyle)}),t},makeLayoutClasses:function(){var e=this.collection.includeOnlyVideoFiles(),i=this.getLayout();return p.classNames({"search-box__result":!!this.collection.length,"files-list":!0,"files-list_layout-normal":"normal"===i,"files-list_layout-big":"big"===i,"files-list_layout-wide":"wide"===i,"files-list_layout-wide-images_align":!t.browser&&"wide"===i&&!e,"files-list_layout-wide-images":"wide"===i&&!e,"files-list_layout-wide-video":"wide"===i&&e,"files-list_title":this.app.store.get("SearchSettings").get("title"),"files-list_author":this.app.store.get("SearchSettings").get("author"),"files-list_type":this.app.store.get("SearchSettings").get("type"),"files-list_size":this.app.store.get("SearchSettings").get("maxsize"),"files-list_target":this.app.store.get("SearchSettings").get("linkTarget"),"files-list_video-length":this.app.store.get("SearchSettings").get("videoLength")})},improveThumbsQuality:function(){var e=this;s.each(this.sizeReplaceItems,function(t){var i=e.collection.get(t);i&&e.$('[data-id="'+t+'"]').find("._file-box-image-src").attr("src",i.get("thumbs").large)})},initCache:function(){var e=this;d.isEnabled("FileRelated",this.app)&&d.manager.setEngine("FileRelated",{root:this,collections:{model:new c,series:new c,similar:new c},listenElement:this,listenEvent:"relatedReady",getQueryParams:function(){var t=e.collection.at(e.selectedIndex+1);return{id:t?t.get("id"):void 0}}})},onFileViewLicenseSuccessCallback:function(e,t,i,s){s&&this.app.store.get("FileViewModal")&&this.app.store.get("FileViewModal").hide()},getTrackingInfo:function(){return{sorting:this.app.store.get("SearchQuery").get("sorting")}}});s.extend(m.prototype,r),e.exports=m}).call(this,i(6))},function(e,t){e.exports=function(e){return'<section class="content__right-container"><section class="content__right-container-push __search-result"></section></section>'}},function(e,t,i){"use strict";var s=i(0),a=i(16),o=i(478);e.exports=o.extend({name:"RightContainer",el:!1,template:i(792),clientAfterRender:function(){this.$(".content__right-container-push").addClass("content_transition")},increase:function(){s.delay(s.bind(function(){this.$(".content__right-container-push").removeAttr("style").css({"margin-left":80})},this),30)},reduce:function(e){s.delay(s.bind(function(){this.$(".content__right-container-push").removeAttr("style"),this.$(".search-box").css({overflow:"hidden"}),this.$(".files-list").css({width:this.$(".files-list").width()+"px"}),this.$(".content__right-container-push").css({"margin-left":246}),s.delay(s.bind(function(){a.$(".search-box",this.$el).removeAttr("style"),a.$(".files-list",this.$el).removeAttr("style"),e()},this),320)},this),50)}})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";(function(t){var s=i(0),a=i(487),o=i(63),r=5,l=800,n=function(){function e(){this.app=null,this.timer=null,this.cookieName="signUpModalVisitsCount",this.isAllowedToCallModal=!0,this.maxValue=r,this.showDelay=l}var i=e.prototype;return i.getCookie=function(){return parseInt(o.get(this.cookieName),10)||0},i.increment=function(){if(t.browser){var e=this.getCookie();-2!==e&&(-1!==e?this.isAllowedToCallModal&&(this.setCookieValue(++e),this.callModal()):this.disable())}},i.disable=function(){this.setCookieValue(-2)},i.callModal=function(){var e=this;this.getCookie()%this.maxValue||(this.disable(),this.setCookieValue(0),this.timer=s.delay(function(){new a({app:e.app}).show(),e.isAllowedToCallModal=!1,o.set("signUpFileShown",1,{expires:365}),e.app.observer.broadcast("Track:UE:SignUp:ModalShow",{label:5})},this.showDelay))},i.setEnv=function(e){var t=this;this.app=e,this.app.observer.on({"Tour:Allowed":function(){clearTimeout(t.timer),t.setCookieValue(0),t.isAllowedToCallModal=!1},"Tour:End Track:UE:SignUp:ModalHide Track:UE:SignUp:ModalClosedByUser":function(){t.isAllowedToCallModal=!0}})},i.setCookieValue=function(e){o.set(this.cookieName,e,{expires:1})},i.setMaxValue=function(e){this.maxValue=e},i.setDelay=function(e){this.showDelay=e},e}();e.exports=function(){return new n}}).call(this,i(6))},function(e,t,i){"use strict";(function(t){var s=i(9),a=i(146);e.exports=a.extend({name:"RecentSearches",unique:!0,isStackEnabled:!!t.browser,model:s.extend({defaults:{query:"",sorting:"",count:0},toFlume:function(){return"q="+this.get("query").replace(/\s/g,"+")+"&sort="+this.get("sorting")}})})}).call(this,i(6))},function(e,t,i){"use strict";var s=i(1)(i(3)),a=i(0),o=i(9),r=i(523);e.exports=o.extend({defaults:{offsetByItems:!0,pagerLimit:1,page:null,pagesCount:null,itemsCount:null,unlimited:!1},validation:{page:{required:!0,pattern:/^[1-9]\d*$/,min:1,max:9999999999,fn:function(e){return e>this.get("pagesCount")?"Error":null}},pageUnlimited:{required:!0,pattern:/^[1-9]\d*$/,min:1,max:9999999999}},applyParams:function(e){this.set({page:Math.floor(parseInt(e.offset/e.limit,10)+1),pagesCount:Math.ceil(parseFloat(e.availableCount/e.limit)),itemsCount:e.count},{silent:!0})},getSchema:function(e,t,i){var o=this,l=a.extend(a.clone(e.attributes),{route:this.app.router.routeName,seller:t.get("id")||""}),n={current:i.get("relatedItem")&&l.relatedItemId?i.get("relatedItem").makeRelatedUrl(l):this.app.makeUrl(l),buttons:{prev:[],next:[]},next:"",prev:"",activeButton:!1},c=function(t){var n=t;return n<=0||n>o.get("pagesCount")?null:(o.get("offsetByItems")&&(n=(n-1)*e.get("limit")),r.useClearSearchUrls(e)?r.generateClearSearchUrl(o.app,e,{offset:n},{absolute:!0}):i.get("relatedItem")&&l.relatedItemId?i.get("relatedItem").makeRelatedUrl(a.extend({},l,{offset:n}),!0):o.app.makeUrl((0,s.default)({},l,{offset:n}),{absolute:!0}))};n.next=c(this.get("page")+1),n.prev=c(this.get("page")-1);for(var h=1;h<=this.get("pagerLimit");h++)n.activeButton=n.activeButton?n.activeButton:h===this.get("page"),n.buttons.prev.push({page:h,href:c(h),active:h===this.get("page")});for(var d=this.get("pagesCount")-this.get("pagerLimit")+1;d<=this.get("pagesCount");d++)n.activeButton=n.activeButton?n.activeButton:d===this.get("page"),n.buttons.next.push({page:d,href:c(d),active:d===this.get("page")});return n},isNextPageAvailable:function(){return this.get("page")<this.get("pagesCount")},getDirection:function(){var e,t=this.previousAttributes();return t.page<this.get("page")?e="next":t.page>this.get("page")&&(e="prev"),e}})},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="search-box__footer-info search-info">';if(e.info.count||e.title.folderName){if(e.info.relatedItem)a+='<a class="search-info__related-file search-info__related-file_footer',e.info.relatedItem.attributes.width>e.info.relatedItem.attributes.height?a+=" search-info__related-file_horizontal":a+=" search-info__related-file_vertical",a+='" href="'+e.info.relatedItem.attributes.url+'"><span class="search-info__related-file-wrap"><span class="search-info__related-file-box"><img class="search-info__related-file-image" src="'+e.info.relatedItem.attributes.thumbs.normal+'" /></span></span></a><span class="search-info__related-box">'+e.info.meta.h1.replace(/\<a\s/g,'<a class="link-blue _link" ')+"</span>";else if(e.hideFooterTitle||(a+='<span class="search-info__title">'+e.info.meta.h1+"</span>"),e.info.hints.length){a+='<span class="search-info__related-title search-info__related-title_footer">'+s(e.title.relatedKeywordsTitle)+':</span><ul class="search-info__related">';var o=e.info.hints;if(o)for(var r,l=-1,n=o.length-1;l<n;)(r=o[l+=1])&&r.url&&r.key&&(a+='<li class="search-info__related-item _related-link"><a class="link-blue" href="'+r.url+'">'+s(r.key)+"</a></li>");a+="</ul>"}if(e.info.anchors&&e.info.anchors.length){a+='<ul class="search-info__anchors">';var c=e.info.anchors;if(c)for(var h,d=-1,u=c.length-1;d<u;)a+='<li class="search-info__anchor-item"><a class="link-blue _anchor" href="'+(h=c[d+=1]).url+'">'+s(h.key)+"</a></li>";a+="</ul>"}}return a+="</div>"}},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a="";if(e.info.trends.length){a+='<div class="search-box__footer-info search-box__footer-info_first search-info"><span class="search-info__trends-title">'+s(e.title.trendsTitle)+':</span><ul class="search-info__trends">';var o=e.info.trends;if(o)for(var r,l=-1,n=o.length-1;l<n;)a+='<li class="search-info__trends-item"><a class="link-blue" href="'+(r=o[l+=1]).url+'">'+s(r.key)+"</a></li>";a+="</ul></div>"}return a}},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a="";return e.seoTemplatesAvailable&&(a+='<div class="search-box__seo-text"><h2 class="search-box__seo-text-title">Картинки '+s(e.keyword)+':</h2><ul class="list list-grey"><li class="list-item">'+s(e.photosAvailable)+' доступно фото по запросу</li><li class="list-item">Каждый день просматриваются более '+s(e.dailyViews)+' фотографий</li><li class="list-item">За месяц скачивают более '+s(e.totalMonthDownloads)+" картинок</li></ul><p>Скачивайте красивые фото "+s(e.keyword)+" в высочайшем качестве!</p></div>"),a}},function(e,t,i){"use strict";var s=i(0),a=i(478),o=i(23),r=i(841);e.exports=a.extend({name:"SeoPromoText",el:!1,template:r,initialize:function(){this.listenTo(this.searchInfo,"change",this.render)},seoTemplatesAvailable:function(){return!s.isEmpty(this.searchInfo.get("seoTemplates"))},serialize:function(){return{seoTemplatesAvailable:this.seoTemplatesAvailable(),keyword:this.app.store.get("SearchQuery").get("query"),totalMonthDownloads:o.numberFormat(this.searchInfo.get("seoTemplates").totalMonthDownloads),dailyViews:o.numberFormat(this.searchInfo.get("seoTemplates").dailyViews),photosAvailable:o.numberFormat(this.collection.count)}}})},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="folder-header '+s(e.classes)+'"><div class="folder-header__cover"';return e.preferences.coverUrl&&(a+=' style="background-image: url('+s(e.preferences.coverUrl)+')"'),a+='><h1 class="folder-header__title _title">'+s(e.title)+"</h1>",e.searchAvailable&&(a+='<div class="folder-header__search"><div class="field-box input-search-box input-search-box_has-reset"><input class="folder-header__search-input input input-xl _query" type="text"placeholder="'+this.tr("Search within collection...")+'"',e.query&&(a+=' value="'+s(e.query)+'"'),a+=' /><a class="input-search-reset button-reset hidden _reset"></a><i class="input-search-btn _search"></i></div></div>'),e.preferences.coverUrl&&e.preferences.coverGradient&&(a+='<div class="folder-header__cover-gradient _cover-gradient"style="background: linear-gradient(rgba('+s(e.bgColor.r)+","+s(e.bgColor.g)+","+s(e.bgColor.b)+",.8),rgba("+s(e.bgColor.r)+","+s(e.bgColor.g)+","+s(e.bgColor.b)+",.9) 50%,rgba("+s(e.bgColor.r)+","+s(e.bgColor.g)+","+s(e.bgColor.b)+',1))"></div>'),e.preferences.coverUrl&&e.isEditableFolder&&(a+='<i class="folder-header__cover-remove _remove-cover" title="'+this.tr("Remove Cover")+'"></i>'),a+='</div><div class="folder-header__controls">',e.sortingAvailable&&(a+='<div class="folder-header__sorting _folder-sorting"></div>'),(e.preferences.useCounter||e.preferences.showAvatar)&&(a+='<div class="folder-header__info"><span class="folder-header__info-count',e.preferences.showAvatar&&e.allowedCurated&&e.preferences.curatedName.length&&(a+=" folder-header__info-count_avatar"),a+='">',e.preferences.useCounter&&(a+=""+this.tr("%s Files",[e.folderSize])),e.preferences.showAvatar&&e.allowedCurated&&(e.preferences.useCounter&&(a+='<span class="folder-header__info-bull">&bull;</span>'),e.isUsernameLink?a+=this.tr('Curated by <a class="%s" href="%s">%s</a>',["link-blue",e.portfolioLink,e.usernameForTitle])+'<a class="folder-header__info-avatar-box avatar-box avatar-box-m" href="'+e.portfolioLink+'"><img class="folder-header__info-avatar avatar avatar-m" src="'+e.ownerAvatar+'"></a>':a+=this.tr("Curated by %s",e.usernameForTitle)+'<span class="folder-header__info-avatar-box avatar-box avatar-box-m"><img class="folder-header__info-avatar avatar avatar-m" src="'+e.ownerAvatar+'"></span>'),a+="</span></div>"),a+='<div class="folder-header__actions"><div class="folder-header__users _users"></div><div class="folder-header__share',e.folderUsersCount>1&&(a+=" folder-header__share_counter"),a+=' _share"',e.folderUsersCount>1&&(a+=' data-users="'+s(e.folderUsersCount)+'"'),a+='><i class="folder-header__share-icon icon icon-collaborate"></i><i class="folder-header__share-icon folder-header__share-icon_hover icon icon-collaborate-hover"></i><span class="folder-header__share-title">',e.isShared?a+=""+this.tr("Collaborate"):a+=""+this.tr("Share"),a+="</span></div>",e.isEditableFolder&&(a+='<div class="folder-header__sep"></div><div class="folder-header__settings button-settings button-settings-hover _folder-settings"><i class="icon icon-settings"></i><i class="arrow arrow-black arrow-bottom"></i></div>'),a+="</div></div></div>"}},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<ul class="folder-sorting">',o=e.scheme;if(o)for(var r,l=-1,n=o.length-1;l<n;)(r=o[l+=1]).active?(a+='<li class="folder-sorting__item',r.isNew&&(a+=" folder-sorting__item_new"),a+=' folder-sorting__item_active _tab-active _tab" data-key="'+s(r.key)+'"><span class="folder-sorting__text">'+s(r.label)+"</span></li>"):(a+='<li class="folder-sorting__item',r.isNew&&(a+=" folder-sorting__item_new"),a+=' _tab" data-key="'+s(r.key)+'"><a class="folder-sorting__text" href="'+r.href+'">'+s(r.label)+"</a></li>");return a+='<li class="folder-sorting__menu-underline hidden _menu-underline"></li></ul>'}},function(e,t){e.exports=function(e){return'<div class="folder-sorting-box _tabs"></div>'}},function(e,t,i){"use strict";var s=i(1)(i(3)),a=i(0),o=i(478),r=i(495),l=i(481),n=i(845),c=i(844);e.exports=o.extend({name:"FolderSorting",el:!1,template:n,initialize:function(){this.listenTo(this.app.store.get("SearchQuery"),"change:sorting paramsArrived",this.render)},prepareRender:function(){var e=this.getSchema();e.length&&this.setView("._tabs",new r({name:"FolderSortingTabs",template:c,app:this.app,schema:e,preventDefaultAction:!0,menuUnderline:!0,changeTabCallback:this.changeTabCallback.bind(this),events:(0,s.default)({},r.prototype.events,{"contextmenu ._tab":"onCustomTabClick","mouseup ._tab":"onCustomTabClick"}),onTabClick:function(e){e.ctrlKey||e.shiftKey||e.metaKey?this.trackNewTabClick(e):r.prototype.onTabClick.call(this,e)},onCustomTabClick:function(e){[l.rightMouse,l.middleMouse].includes(e.which)&&this.trackNewTabClick(e)},trackNewTabClick:function(e){var t=this.schema.findWhere({key:e.currentTarget.getAttribute("data-key")});this.app.observer.broadcast("Track:UE:ContextMenu:Open",{source:"SearchSorting",target:{target:"search"},params:{type:"tab",sorting:t.get("label"),position:t.collection.indexOf(t)+1}})}}))},getSchema:function(){var e=this,t=a.map(this.collection.serialize(),function(t){return{href:"?sorting="+t.key,key:t.key,label:e.tr(t.label),active:e.app.store.get("SearchQuery").get("sorting")===t.key,isNew:"newest"===t.key}});return t.length&&!a.findWhere(t,{active:!0})&&(t[0].isDefault=!0),t},toTracking:function(){return this.getSchema()},changeTabCallback:function(e){this.app.observer.broadcast("Track:UE:Search:SortingClick",{sorting:e.get("label"),position:e.collection.indexOf(e)+1}),this.onSearchQueryChange({sorting:e.get("key")})},onSearchQueryChange:function(){}})},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="search-settings"><div class="_settings';e.isPaletteHidden||(a+=" hidden"),a+='">';var o=e.preferences;if(o)for(var r,l=-1,n=o.length-1;l<n;)"checkbox"===(r=o[l+=1]).type&&(a+='<label class="search-settings__item search-settings__item_hover '+s(r.selector)+'"><span class="search-settings__title">'+this.tr(r.label)+"</span><",r.switcher.tag?a+=""+s(r.switcher.tag):a+="label",a+=' class="switcher',r.switcher.disabled&&(a+=" disabled _switcher-disabled"),a+=" "+s(r.switcher.className||"")+'"><input class="switcher-checkbox '+s(r.switcher.inputClass||"")+'" type="checkbox" name="'+s(r.switcher.name)+'"',r.switcher.value&&(a+=' value="'+s(r.switcher.value)+'"'),r.switcher.checked&&(a+=' checked="checked"'),r.switcher.disabled&&(a+=" disabled"),a+=' /><span class="switcher-holder"><span class="switch-off"><span class="title">'+s(r.switcher.labelOff||"Off")+'</span></span><span class="switch-on"><span class="title">'+s(r.switcher.labelOn||"On")+'</span></span></span><i class="circle"></i></',r.switcher.tag?a+=""+s(r.switcher.tag):a+="label",a+="></label>"),"colorpicker"===r.type&&(a+='<div class="search-settings__item search-settings__item_hover '+s(r.selector)+'"><span class="search-settings__title">'+this.tr(r.label)+'</span><div class="search-settings__color-box"><i class="search-settings__edit-icon icon icon-pencil-solid"></i><i class="search-settings__color-value" style="background-color: #'+s(r.value)+'"></i></div></div>');return a+='</div><div class="_colors ',e.isPaletteHidden&&(a+=" hidden"),a+='"></div></div>'}},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="cmp-palette-rows"><div class="cmp-palette-rows__wrap">',o=e.palette;if(o)for(var r,l=-1,n=o.length-1;l<n;)r=o[l+=1],a+='<div class="cmp-palette-rows__item',e.currentColor&&r.hex===e.currentColor&&(a+=" cmp-palette-rows__item_active"),a+='"><i class="cmp-palette-rows__color _color" style="background-color: '+s(r.hex)+';" data-value="'+s(r.hex)+'"><i class="cmp-palette-rows__icon icon icon-ok-black"></i></i></div>';return a+="</div></div>"}},function(e,t){e.exports=function(e){return'<div class="color-tooltip"><div class="color-tooltip__header"><i class="color-tooltip__back _back"></i><span class="color-tooltip__title">'+this.tr("Background Color")+'</span></div><div class="color-tooltip__palette _color-palette"></div><button class="color-tooltip__save-btn button button-xl button-watery button-watery-thin button-text-big _save">'+this.tr("Save Changes")+"</button></div>"}},function(e,t,i){"use strict";e.exports.colors=[{hex:"#ffffff",id:1001},{hex:"#eef0f2",id:1002},{hex:"#ffeaea",id:1003},{hex:"#ffede8",id:1004},{hex:"#fff0dc",id:1005},{hex:"#fffbd8",id:1006},{hex:"#e7ffca",id:1007},{hex:"#e5fee7",id:1008},{hex:"#e1fcff",id:1009},{hex:"#e2f2ff",id:1010},{hex:"#e8edff",id:1011},{hex:"#f0e9ff",id:1012},{hex:"#f9e7ff",id:1013},{hex:"#ffe7f4",id:1014}]},function(e,t,i){"use strict";var s=i(1)(i(3)),a=i(478),o=i(655),r=i(23),l=i(850),n=i(849),c=i(848);e.exports=a.extend({name:"ColorPaletteBubbles",el:!1,template:n,type:"hex",events:{"click ._back":"onBackClick","click ._save":"onSaveClick"},initialize:function(){this.listenTo(this.model,"change",this.render)},prepareRender:function(){this.setView("._color-palette",new o({app:this.app,template:c,colors:l.colors,repeatedClickReset:!0,currentColor:this.getCurrentColor(),onChangeCallback:this.onColorChange.bind(this),onResetCallback:this.onColorReset.bind(this)}))},serialize:function(){var e=this.model.get("value");return{infoType:this.type,color:(0,s.default)({},r.hexToRgb(e),{hex:"#"+e})}},getCurrentColor:function(){var e=this.model.get("value");return e===this.model.defaults.value?null:"#"+e},onBackClick:function(){this.model.resetToLastSyncedValue(),this.backCallback()},onColorChange:function(e,t){var i=t.replace("#","");this.model.set({value:i})},onColorReset:function(){this.model.set({value:this.model.defaults.value})},onSaveClick:function(){},saveCallback:function(){},backCallback:function(){}})},function(e,t,i){"use strict";var s=i(1)(i(3)),a=i(478),o=i(851),r=i(847),l={coverGradient:{visible:!0,type:"checkbox"},color:{visible:!0,type:"colorpicker",selector:"_bg-color"},useCounter:{visible:!0,type:"checkbox"},showAvatar:{visible:!0,type:"checkbox"}};e.exports=a.extend({name:"FolderSettings",el:!1,template:r,events:{"click ._bg-color":"onBgColorClick","change ._switcher":"onSwitcherChange"},initialize:function(){this.listenTo(this.model.get("preferences"),"change",this.render)},prepareRender:function(){var e=this;this.setViews({"._colors":new o({app:this.app,model:this.model.get("preferences").get("color"),saveCallback:function(){return e.saveCallback()},backCallback:function(){return e.toggleColorPalette()},onSaveClick:function(){return e.saveColor()}})})},serialize:function(){var e=this.model.get("preferences").get("color").isChangedButNotSavedValue();return{preferences:this.getFolderPreferences(),isPaletteHidden:!e}},getFolderPreferences:function(){var e=this.model.get("preferences").serialize();return e.forEach(function(e){(0,s.default)(e,l[e.name]),"checkbox"===e.type&&(e.switcher={tag:"div",checked:e.value,name:e.name,inputClass:"_switcher",className:"search-settings__switcher"})}),e.filter(function(e){return e.visible&&e.editable})},onBgColorClick:function(){this.toggleColorPalette()},onSwitcherChange:function(e){var t=this;Backbone.$(e.currentTarget).next(".switcher-holder").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){return t.savePreference(e)})},savePreference:function(e){var t=this,i=e.currentTarget,s=i.name,a=i.checked,o=this.model.get("preferences").get(s);o.set({value:a});var r=this.model.save({},{wait:!0});r&&r.then(function(){t.saveCallback(),o.fakeNestedSaveLastSyncedAttrs()})},saveColor:function(){var e=this,t=this.model.get("preferences").get("color");if(t.isChangedButNotSavedValue()){var i=this.model.save({},{wait:!0});i&&i.then(function(){e.saveCallback(),t.fakeNestedSaveLastSyncedAttrs()})}else this.saveCallback()},toggleColorPalette:function(){this.$(" ._settings, ._colors").toggleClass("hidden")}})},function(e,t,i){"use strict";(function(t){var s=i(1)(i(3)),a=i(16),o=i(478),r=i(852),l=i(480),n=i(671),c=i(846),h=i(736),d=i(23),u=i(479),p=i(481),f=i(843);e.exports=o.extend({name:"SearchHeaderFolder",el:!1,template:f,events:{"keypress ._query":"onQueryKeyPress","input ._query":"onQueryInput","click ._search":"onSearchClick","click ._reset":"onResetClick","click ._share":"onShareClick","click ._folder-settings":"onFolderSettingsClick","click ._remove-cover":"onRemoveCoverClick"},initialize:function(){this.model=this.app.store.get("Folder"),this.searchQuery=this.app.store.get("SearchQuery"),this.permissions=this.app.store.get("FolderPermissions"),this.listenTo(this.model,"change",this.render),this.listenTo(this.model.get("preferences"),"change",this.applyFolderPreference),this.listenTo(this.permissions,"change update",this.render)},prepareRender:function(){this.getView("._users")&&this.getView("._users").remove(),this.model.get("isShared")&&this.setView("._users",new n({app:this.app,model:this.model,collection:this.permissions})),this.isSortingAvailable()&&this.setView("._folder-sorting",new c({app:this.app,collection:this.sortingCollection,onSearchQueryChange:this.onSearchQueryChange.bind(this)}))},serialize:function(){var e=this.model.serialize(),t=this.permissions.filter(function(e){return"link"!==e.get("type")}).length;return{classes:this.getHeaderClasses(),title:e.title,coverUrl:this.model.get("coverUrl"),coverGradient:this.model.get("coverGradient"),curatedName:this.model.get("curatedName"),ownerAvatar:this.model.get("ownerAvatar"),isShared:this.model.get("isShared"),folderUsersCount:Math.min(t,99),searchAvailable:this.isSearchAvailable(),sortingAvailable:this.isSortingAvailable(),query:this.searchQuery.get("folderQuery"),folderSize:d.numberFormat(this.model.get("count")),usernameForTitle:this.getUsernameForTitle(),isUsernameLink:this.isUsernameLink(),portfolioLink:this.model.get("userId")?this.app.makeUrl({route:"Search",seller:this.model.get("userId")}):null,allowedCurated:!0,isEditableFolder:"edit"===this.model.get("permission"),bgColor:this.getBgColor(),preferences:this.getFolderPreferences()}},getUsernameForTitle:function(){var e=this.model.get("preferences").get("curatedName");return e&&e.get("value").length?e.get("value"):this.model.get("userName")},isUsernameLink:function(){return this.model.get("ownerApprovedFilesCount")>0},getFolderPreferences:function(){return this.model.get("preferences").getPrefsAsHash()},clientAfterRender:function(){var e=this;this.setView("FolderSettingsTooltip",new l({params:u.FolderSettings,content:new r({model:this.model,app:this.app,saveCallback:function(){return e.getView("FolderSettingsTooltip").hide()}}),onHideCallback:function(){return e.resetFolderToSavedColor()}})),this.toggleReset(),this.setCoverIndicator()},resetFolderToSavedColor:function(){var e=this.model.get("preferences").get("color");e.isChangedButNotSavedValue()&&e.resetToLastSyncedValue()},applyFolderPreference:function(e){"color"===e.get("name")?this.setBackgroundColor():this.render()},getHeaderClasses:function(){var e={},t=[],i=this.getFolderPreferences();return this.isSearchAvailable()&&t.push("search"),i.coverUrl&&(t.push("cover"),i.coverGradient&&t.push("gradient")),t.length&&(e["folder-header_"+t.join("-")]=!0),(i.useCounter||i.showAvatar)&&(e["folder-header_has-info"]=!0),d.classNames(e)},isSearchAvailable:function(){return this.model.get("count")>=300},isSortingAvailable:function(){return this.sortingCollection.length>0},setQuery:function(){var e=this.$("._query").val().trim();this.app.observer.broadcast("Track:UE:SearchFolder:Submit",{query:e}),this.searchQuery.set({folderQuery:e})},toggleReset:function(){this.isSearchAvailable()&&this.$("._reset").toggleClass("hidden",0===this.$("._query").val().length)},getBgColor:function(){var e=this.model.get("preferences").getPrefsAsHash().color;return(0,s.default)({},d.hexToRgb(e),{hex:e})},onQueryInput:function(){this.toggleReset()},onQueryKeyPress:function(e){(e.which||e.keyCode)===p.enter&&this.setQuery()},onSearchClick:function(){this.setQuery()},onResetClick:function(){this.$("._query").val(""),this.toggleReset(),this.setQuery()},onShareClick:function(){this.setView("ShareFolder",new h({app:this.app,model:this.model,collection:this.collection,permissions:this.permissions})).show()},onFolderSettingsClick:function(e){this.getView("FolderSettingsTooltip").toggle(e)},onRemoveCoverClick:function(){this.model.save({coverCropData:{fileId:0}}),this.app.observer.fire("Folder:RemoveCover")},setBackgroundColor:function(e){if(void 0===e&&(e=this.model.get("preferences").getPrefsAsHash().color),t.browser){var i=d.hexToRgb(e),s="rgba("+i.r+","+i.g+","+i.b+",.8)",o="rgba("+i.r+","+i.g+","+i.b+",.9)",r="rgba("+i.r+","+i.g+","+i.b+",1)";a.$(".wrapper ._content").css("backgroundColor","#"+e),this.$("._cover-gradient").css({background:"linear-gradient("+s+", "+o+" 50%, "+r+")"})}},setCoverIndicator:function(){var e=this.model.get("coverId"),t=a.$(".file-box");t.find("._cover.active").removeClass("active"),e&&t.filter("[data-id="+e+"]").find("._cover").addClass("active")}})}).call(this,i(6))},function(e,t){e.exports=function(e){var t='<div class="search-header-enterprise">';return e.subfiltersEnabled&&(t+='<div class="search-header-enterprise__subfilters _search-subfilters"></div>'),e.settingsEnabled&&(t+='<div class="search-header-enterprise__settings _search-settings"></div>'),t+='<hr class="search-header-enterprise__separator">',e.sortingEnabled&&(t+='<div class="search-header-enterprise__sorting _search-sorting"></div>'),e.groupsEnabled&&(t+='<div class="search-header-enterprise__groups _search-groups"></div>'),e.filterIndicatorsEnabled&&(t+='<div class="search-header-enterprise__indicators _search-filter-indicators"></div>'),e.pagerEnabled&&(t+='<div class="search-header-enterprise__pager _search-pager"></div>'),e.countInfoEnabled&&(t+='<div class="search-header-enterprise__count-info _search-count-info"></div>'),t+="</div>"}},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="search-enterprise-groups-box';e.display||(a+=" hidden"),a+='"><div class="search-enterprise-groups-compact _search-enterprise-groups-compact">';var o=e.groups;if(o)for(var r=-1,l=o.length-1;r<l;)(c=o[r+=1]).active&&(a+='<span class="search-enterprise-groups-compact__current _sorting-menu"><span class="search-enterprise-groups-compact__current-title-box"><span class="search-enterprise-groups-compact__current-title">'+s(c.name)+'</span></span><i class="search-enterprise-groups-compact__arrow arrow arrow-black arrow-bottom"></i></span>');a+='<ul class="search-enterprise-groups-mobile__menu _groups-mobile-menu">';var n=e.groups;if(n)for(var c,h=-1,d=n.length-1;h<d;)(c=n[h+=1]).active?a+='<li class="search-enterprise-groups-mobile__item search-enterprise-groups-mobile__item_active"><i class="search-enterprise-groups-mobile__select icon icon-ok"></i><span class="search-enterprise-groups-mobile__title">'+s(c.name)+"</span></li>":a+='<li class="search-enterprise-groups-mobile__item"><a class="search-enterprise-groups-mobile__link _group-link" data-group-id='+s(c.id)+' href="'+c.href+'">'+s(c.name)+"</a></li>";return a+='<li class="search-enterprise-groups-mobile__item _sorting-menu"><span class="search-enterprise-groups-mobile__close">'+this.tr("Close")+"</span></li></ul></div></div>"}},function(e,t,i){"use strict";var s=i(16).$,a=i(486),o=i(478),r=i(635);e.exports=o.extend({el:!1,template:r,allGroups:!0,allGroupsTitle:null,groups:[],serialize:function(){return{allGroups:this.allGroups,allGroupsTitle:this.allGroupsTitle,groups:this.groups,selected:this.app.store.get("SearchQuery").get("enterpriseGroupId")||-1}},clientAfterRender:function(){a.initialize(s(this.el).find("._scrollable").get(0),{suppressScrollX:!0,wheelSpeed:.6})}})},function(e,t,i){"use strict";(function(t){var s=i(0),a=i(16).$,o=i(478),r=i(480),l=i(479).SortingMenuEnterprise,n=i(856),c=i(9),h=i(127);e.exports=o.extend({name:"SearchEnterpriseGroups",el:!1,template:i(855),events:{"click ._group-link":"onGroupClick","click ._sorting-menu":"onGroupsMenuClick"},globals:{"resize window":"onWindowResize"},initialize:function(){this.mobileWatcher=new c({isMobile:!1}),this.listenTo(this.app.store.get("SearchQuery"),"change:sorting paramsArrived",this.render),this.listenTo(this.collection,"update reset",this.render),this.listenTo(this.app.observer,"Responsive:CloseMobileMenu",this.observeCloseMobileMenu.bind(this)),this.listenTo(this.mobileWatcher,"change",this.render)},onWindowResize:function(){this.mobileWatcher.set({isMobile:h.mobileMode()}),this.setGroupsMenuHeight()},serialize:function(){return{display:this.shouldBeDisplayed(),groups:this.getGroupsList(),mobileMode:!!t.browser&&h.mobileMode()}},clientAfterRender:function(){this.initGroupsMenuTooltip(),this.onRenderCallback()},initGroupsMenuTooltip:function(){this.setView("tooltipGroupsMenu",new r({events:{"change ._group-selection":"onGroupSelectionChange"},params:l,content:new n({app:this.app,allGroupsTitle:this.getAllGroupsTitle(),groups:this.serializeGroups()}),onGroupSelectionChange:this.onGroupSelectionChange.bind(this)}))},getAllGroupsTitle:function(){return this.app.user.isEnterprise()?this.tr("All Divisions"):this.tr("All Groups")},getGroupsList:function(){return s.union([{id:-1,name:this.tr("All Divisions"),href:this.app.makeUrl(this.app.url,{query:{enterprise_group_id:-1}}),active:!this.app.store.get("SearchQuery").get("enterpriseGroupId")||-1===parseInt(this.app.store.get("SearchQuery").get("enterpriseGroupId"))}],this.serializeGroups())},serializeGroups:function(){var e=this;return this.collection.map(function(t){return s.extend(t.serialize(),{href:e.app.makeUrl(e.app.url,{query:{enterprise_group_id:t.get("id")}}),active:parseInt(e.app.store.get("SearchQuery").get("enterpriseGroupId"))===parseInt(t.get("id"))})})},shouldBeDisplayed:function(){return"purchased"===this.app.store.get("SearchQuery").get("dataSource")&&this.collection.length>1},onGroupsMenuClick:function(e){h.mobileMode()?(h.mobileMode()&&this.app.observer.fire("Responsive:CloseMobileMenu",{cid:this.cid}),this.$el.toggleClass("search-enterprise-groups-mobile_active"),this.setGroupsMenuHeight()):(e.preventDefault(),this.getView("tooltipGroupsMenu").toggle(e))},setGroupsMenuHeight:function(){var e=a(window).scrollTop()+window.innerHeight,t=a("footer").offset().top-a(window).scrollTop(),i=this.$el.find("._groups-mobile-menu").offset().top,o=e;e>t&&(o=a("footer").offset().top),s.throttle(this.$el.find("._groups-mobile-menu").css({maxHeight:o-i}),100)},onGroupSelectionChange:function(e){e.preventDefault(),this.updateUserGroupFilter(parseInt(e.currentTarget.value))},onGroupClick:function(e){e.preventDefault(),-1===e.currentTarget.parentNode.className.search("active")&&this.updateUserGroupFilter(parseInt(e.currentTarget.getAttribute("data-group-id")))},updateUserGroupFilter:function(e){this.getView("tooltipGroupsMenu")&&this.getView("tooltipGroupsMenu").hide(),this.onSearchQueryChange({enterpriseGroupId:e})},observeCloseMobileMenu:function(e){e.cid!==this.cid&&this.$el.removeClass("search-enterprise-groups-mobile_active")},onSearchQueryChange:s.noop,onRenderCallback:s.noop})}).call(this,i(6))},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="search-subfilters"><div class="search-subfilters__current _search-curated-current">',o=e.menuItems;if(o)for(var r=-1,l=o.length-1;r<l;)(c=o[r+=1]).active&&(a+='<span class="search-subfilters__cur-text">'+this.tr(c.title),c.star&&(a+='<i class="search-subfilters__cur-icon icon icon-star-admin"></i>'),a+='</span><i class="search-subfilters__arrow arrow arrow-black arrow-bottom"></i>');a+='</div><ul class="search-subfilters__menu _search-curated-menu">';var n=e.menuItems;if(n)for(var c,h=-1,d=n.length-1;h<d;)a+='<li class="search-subfilters__item _search-curated-item">',(c=n[h+=1]).active?(a+='<i class="search-subfilters__select icon icon-ok"></i><span class="search-subfilters__link search-subfilters__link_active">'+this.tr(c.title),c.star&&(a+='<i class="search-subfilters__icon icon icon-star-admin"></i>'),a+="</span>"):(a+='<a class="search-subfilters__link" data-value="'+s(c.key)+'">'+this.tr(c.title),c.star&&(a+='<i class="search-subfilters__icon icon icon-star-admin"></i>'),a+="</a>"),a+="</li>";return a+='<li class="search-subfilters__item search-subfilters__item_close _search-curated-item"><span class="search-subfilters__close">'+this.tr("Close")+"</span></li></ul></div>"}},function(e,t,i){"use strict";(function(t){var s=i(0),a=i(478),o=i(127),r=i(62),l=i(858);e.exports=a.extend({name:"SearchSubfilters",el:!1,template:l,events:{"click a":"onSearchCuratedClick","click ._search-curated-current":"onSearchCuratedItemClick","click ._search-curated-item":"onSearchCuratedItemClick"},initialize:function(){this.listenTo(this.app.store.get("SearchQuery"),"change paramsArrived",this.render),this.listenTo(r,"Responsive:CloseMobileMenu",this.observeCloseMobileMenu.bind(this))},serialize:function(){return{mobileMode:!!t.browser&&o.mobileMode(),menuItems:this.getMenuItems()}},clientAfterRender:function(){this.onRenderCallback()},getMenuItems:function(){var e=this;return s.map(this.generateMenuItems(),function(t){return t.active=e.app.store.get("SearchQuery").get("dataSource")===t.key,t})},generateMenuItems:function(){var e=[];return e.push({title:this.getMainTabTitle(),star:!1,key:"regular"}),this.app.user.isEnterprise()?(this.app.features.isFeatureOnValue("Show curated collection")&&e.push({title:this.getCuratedTabTitle(),star:!0,key:"enterprise"}),this.app.features.isFeatureOnValue("Show search in downloaded")&&e.push({title:this.tr("Already Licensed"),star:!1,key:"purchased"}),e):e},onSearchCuratedItemClick:function(){o.mobileMode()&&(r.fire("Responsive:CloseMobileMenu",{cid:this.cid}),this.$el.toggleClass("search-subfilters_active"))},onSearchCuratedClick:function(e){e.preventDefault(),this.storeCurrentSorting();var t=e.currentTarget.getAttribute("data-value");this.app.observer.broadcast("Track:UE:SearchSubfilters:Click",{value:t}),this.onSearchQueryChange(this.getSearchQueryParams(t))},storeCurrentSorting:function(){sessionStorage.setItem(this.app.store.get("SearchQuery").get("dataSource"),this.app.store.get("SearchQuery").get("sorting"))},getSearchQueryParams:function(e){var t={dataSource:e,sorting:this.app.store.get("SearchQuery").get("sorting"),offset:0};return"purchased"!==e&&(t.itemPermission=e),sessionStorage.getItem(e)?t.sorting=sessionStorage.getItem(e):"purchased"===e&&(t.sorting="best_match"),t},observeCloseMobileMenu:function(e){e.cid!==this.cid&&this.$el.removeClass("search-subfilters_active")},getCuratedTabTitle:function(){return this.app.user.isPremium()&&this.app.features.isFeatureOnValue("Premium collection for ES")?this.tr("Focused Collection"):this.tr("Curated Collection")},getMainTabTitle:function(){return this.app.user.isEnterprise()?this.tr("Main Collection"):this.tr("All Files")},onSearchQueryChange:s.noop,onRenderCallback:s.noop})}).call(this,i(6))},function(e,t,i){"use strict";var s=i(748),a=i(684),o=i(747),r=i(859),l=i(857),n=i(746),c=i(699),h=i(745),d=i(854),u=i(683);e.exports=s.extend({name:"SearchHeaderEnterprise",template:d,prepareRender:function(){var e=this;this.setView("._search-subfilters",new r({app:this.app,collection:this.collection,onSearchQueryChange:function(){return e.onSearchQueryChange.apply(e,arguments)},onRenderCallback:function(){return e.onRenderCallback.apply(e,arguments)}})),this.groupsEnabled()&&this.setView("._search-groups",new l({app:this.app,collection:this.groups,onSearchQueryChange:function(){return e.onSearchQueryChange.apply(e,arguments)}})),this.setView("._search-filter-indicators",new o({app:this.app,onIndicatorRemove:function(){return e.removeFilterIndicators.apply(e,arguments)},onIndicatorsReset:function(){return e.resetFilterIndicators.apply(e,arguments)}})),this.setView("._search-settings",new c({app:this.app,onSearchQueryChange:function(){return e.onSearchQueryChange.apply(e,arguments)},onSearchSettingsChange:function(){return e.onSearchSettingsChange.apply(e,arguments)},collection:this.collection})),this.collection.length&&(this.setView("._search-sorting",new n({app:this.app,sortingCollection:this.sortingCollection,isPurchasedTabActive:this.isPurchasedTabActive(),isCompact:!0,onSearchQueryChange:function(){return e.onSearchQueryChange.apply(e,arguments)}})),this.setView("._search-count-info",new h({app:this.app,pagerModel:this.pagerModel,collection:this.collection})),this.setView("._search-pager",new a({app:this.app,template:u,model:this.pagerModel,searchAuthor:this.searchAuthor,searchInfo:this.searchInfo,collection:this.collection})))},isPurchasedTabActive:function(){return"purchased"===this.app.store.get("SearchQuery").get("dataSource")},sortingEnabled:function(){return this.collection.length},groupsEnabled:function(){return this.app.user.isEnterprise()&&this.isPurchasedTabActive()},serialize:function(){return{subfiltersEnabled:!0,settingsEnabled:!0,sortingEnabled:this.sortingEnabled(),filterIndicatorsEnabled:this.filterIndicatorsEnabled(),groupsEnabled:this.groupsEnabled(),pagerEnabled:this.collection.length,countInfoEnabled:this.collection.length}}})},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="search-box__info search-info';if(e.isFiltered&&(a+=" search-box__info_with-filters"),e.isSortingEnabled||(a+=" search-box__info_without-sorting"),a+='">',e.info.suggestions.length||e.info.correction.length){if(a+='<div class="search-info__suggestions-box"><span class="search-info__suggestions">',e.fuzzyCorrection?a+=""+this.tr("Your search request returned too few results, so we extended it."):a+=""+this.tr("Showed results for: <b>%s</b>.",e.capitalize(e.info.query)),a+="</span>",(e.fuzzyCorrection||e.info.original!==e.info.query)&&(a+='<span class="search-info__suggestions">'+this.tr('Search instead for <a class="%s" href="%s">%s</a>',["search-info__instead-link link-blue _instead",e.info.originalUrl,e.capitalize(e.info.original)])+"</span>"),e.info.suggestions.length){a+='<span class="search-info__suggestions">'+this.tr("Did you mean")+":";var o=e.info.suggestions;if(o)for(var r,l=-1,n=o.length-1;l<n;)a+='<a class="search-info__mean-link link-blue" href="'+(r=o[l+=1]).url+'">'+s(e.capitalize(r.key))+"</a>";a+="</span>"}a+="</div>"}if(e.info.count||e.info.relatedItem||e.title.folderName)if(e.info.relatedItem)a+='<a class="search-info__related-file',e.info.relatedItem.attributes.width>e.info.relatedItem.attributes.height?a+=" search-info__related-file_horizontal":a+=" search-info__related-file_vertical",a+='" href="'+e.info.relatedItem.attributes.url+'"><span class="search-info__related-file-wrap"><span class="search-info__related-file-box"><img class="search-info__related-file-image" src="'+e.info.relatedItem.attributes.thumbs.normal+'" /></span></span></a><h1 class="search-info__related-box">'+e.info.meta.h1.replace(/\<a\s/g,'<a class="link-blue _link" ')+"</h1>";else if(a+='<h1 class="search-info__title',e.isCategory&&(a+=" search-info__title_category"),a+='">',e.isPremium?a+='<span class="search-info__premium-title"><i class="search-info__premium-icon icon icon-premium-collection-large"></i>'+s(e.searchParams.query)+" - "+this.tr("Premium Collection")+"</span>":e.searchAuthor.level&&""===e.searchParams.query?a+='<i class="search-info__level icon icon-level-'+s(e.searchAuthor.level)+' _level-tooltip"></i><strong>'+s(e.searchAuthor.username)+"</strong> "+this.tr("portfolio"):a+=""+e.info.meta.h1,a+="</h1>",e.info.hints.length){a+='<span class="search-info__related-title">'+this.tr(e.title.relatedKeywordsTitle)+':</span><ul class="search-info__related _related-box-text">';var c=e.info.hints;if(c)for(var h,d=-1,u=c.length-1;d<u;)(h=c[d+=1])&&h.url&&h.key&&(a+='<li class="search-info__related-item _related-item"><a class="link-blue _related-hint _related-link" href="'+h.url+'">'+this.tr(h.key)+"</a></li>");a+="</ul>"}return a+="</div>"}},function(e,t){e.exports=function(e){var t="";return e.headerEnabled&&(t+='<div class="search-header',e.isCategoryView&&(t+=" search-header_category"),e.isFolderView&&(t+=" search-header_folder"),e.isSimilarView&&(t+=" search-header_similar"),e.isSearchView&&(t+=" search-header_search"),e.isPremiumView&&(t+=" search-header_premium"),t+='">',e.filterIndicatorsEnabled&&(t+='<div class="search-header__indicators _search-filter-indicators"></div>'),t+='<div class="search-header__info _search-info',e.infoEnabled||(t+=" hidden"),t+='"></div><div class="search-header__settings _search-settings"></div><hr class="search-header__separator"><div class="search-header__related _search-related"></div>',e.sortingEnabled&&(t+='<div class="search-header__sorting _search-sorting"></div>'),e.isPremiumView?t+='<div class="search-header__right-box"><div class="search-header__count-info _search-count-info"></div><div class="search-header__pager _search-pager"></div></div>':t+='<div class="search-header__pager _search-pager"></div><div class="search-header__count-info _search-count-info"></div>',t+="</div>"),t}},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="search-related search-related_count'+s(e.links.length)+'">';if(e.links.length){var o=e.links;if(o)for(var r,l=-1,n=o.length-1;l<n;)if((r=o[l+=1])&&r.thumbs){a+='<div class="search-related__item-box _related-item-box"><div class="search-related__item"><div class="search-related__poster search-related__poster_count'+s(r.thumbs.length)+'">';var c=r.thumbs;if(c)for(var h=-1,d=c.length-1;h<d;)a+='<div class="search-related__bg-item" style="background-image: url('+s(c[h+=1])+');"></div>';a+='</div><div class="search-related__link-box">',r.pseudolink?a+='<span class="search-related__link _related-link _pseudolink" data-url="'+s(r.url)+'" data-group="phrase">':a+='<a class="search-related__link _related-link" href="'+r.url+'" data-group="phrase">',r.isBackBtn?a+='<span class="search-related__link-inner"><i class="search-related__link-arrow icon icon-arrow-back"></i><span class="search-related__link-text">'+s(r.title)+'</span><span class="search-related__link-title"><span class="search-related__link-content">'+s(r.phrase)+"</span></span></span>":(r.title&&(a+='<span class="search-related__link-content',r.phrase&&(a+=" search-related__link-content_line"),a+='">'+s(r.title)+"</span>"),r.phrase&&(a+='<span class="search-related__link-content',r.title&&(a+=" search-related__link-content_line"),a+='">'+s(r.phrase)+"</span>")),r.pseudolink?a+="</span>":a+="</a>",a+="</div>",r.icon&&(a+='<i class="search-related__tag icon icon-'+s(r.icon)+'-tag"></i>'),a+="</div></div>"}}return a+="</div>"}},function(e,t,i){"use strict";var s=i(1)(i(3)),a=i(478),o=i(523),r=i(147),l=i(103),n=i(11),c=i(481),h=i(863);e.exports=a.extend({name:"SearchRelated",el:!1,template:h,searchInfo:null,searchCollection:null,links:[],events:{"mouseover ._pseudolink":"transformLink","click ._related-link":"onRelatedLinkClick","contextmenu ._related-link":"onCustomRelatedLinkClick","mouseup ._related-link":"onCustomRelatedLinkClick"},initialize:function(){this.stack=new r({storageKey:"SearchRelated"}),this.once("clientAfterRender",this.trackInfo),this.listenTo(this.searchInfo,"change",this.render),this.titles={"Premium Collection":this.tr("Premium Collection"),"Treasure Collection":this.tr("Treasure Collection"),"People Only":this.tr("People Only"),"Exclude People":this.tr("Exclude People"),Vectors:this.tr("Vectors"),Indoor:this.tr("Indoor"),Outdoor:this.tr("Outdoor"),Photos:this.tr("Photos"),Isolated:this.tr("Isolated")}},serialize:function(){this.links=this.getLinks();var e=this.getBackBtn();return e&&this.links.unshift(e),{links:this.links}},clientAfterRender:function(){this.checkSearchType()},getLinks:function(){var e=this;return this.searchInfo.get("hintsExtended").map(function(t){return(0,s.default)({},t,{title:e.titles[t.title]||t.title,pseudolink:!!t.tag&&["premium","treasure"].includes(t.tag),url:t.url})})},getBackBtn:function(){var e=this.stack.get({},{remove:!0});if(!e)return null;var t=n.sortings.find(function(t){return t.key===e.sorting});return t||(t=n.sortings.find(function(e){return e.key===l.defaults.sorting})),{isBackBtn:!0,url:this.app.makeUrl({route:"Search",query:e.query},{query:{sorting:e.sorting}}),title:t.value,phrase:e.query,thumbs:e.thumbs,tag:e.tag}},transformLink:function(e){o.transformOrRedirect(this.app,e.currentTarget,e.currentTarget.getAttribute("data-url"))},trackInfo:function(){this.app.observer.broadcast("Track:UE:Search:Related",{action:"show",view:this.name})},checkSearchType:function(){var e=this.links[0];e&&e.isBackBtn&&"vector"===e.tag&&setTimeout(function(){var e=Backbone.$("._search-types");e.length&&(e.addClass("search-bar-type_flash"),setTimeout(function(){e.removeClass("search-bar-type_flash")},1e3))},1e3)},toTracking:function(){return{links:this.links,visible:this.$("._related-item-box:visible").length}},getSearchThumbs:function(){if(!this.searchCollection)return[];for(var e=[],t=0;t<3;t++)e.push(this.searchCollection.models[t].get("thumbs").big);return e},onRelatedLinkClick:function(e){if(e.ctrlKey||e.shiftKey||e.metaKey)this.trackNewTabClick(e);else{var t=this.$(e.currentTarget).closest("._related-item-box").index(),i=this.links[t];if(i)if(this.app.observer.broadcast("Track:UE:Search:Related",{action:"click",group:e.currentTarget.getAttribute("data-group"),position:t+1,text:((i.title||"")+" "+(i.phrase||"")).trim(),qualities:i.isBackBtn?{backBtn:!0}:i.qualities,view:this.name}),i.isBackBtn)this.app.router.redirect(e.currentTarget.getAttribute("href"));else{e.preventDefault();var s=this.app.store.get("SearchQuery");this.stack.add({sorting:s.get("sorting"),query:s.get("query"),thumbs:this.getSearchThumbs(),tag:i.tag},{toLocal:!0}),this.app.router.redirect(e.currentTarget.getAttribute("href"))}}},onCustomRelatedLinkClick:function(e){[c.rightMouse,c.middleMouse].includes(e.which)&&this.trackNewTabClick(e)},trackNewTabClick:function(e){var t=this.$(e.currentTarget).closest("._related-item-box").index(),i=this.links[t];if(i){var a=i.isBackBtn?{backBtn:!0}:i.qualities;this.app.observer.broadcast("Track:UE:ContextMenu:Open",{source:this.name,target:{target:"search"},params:(0,s.default)({},a,{position:t+1,text:((i.title||"")+" "+(i.phrase||"")).trim(),type:"banner"})})}}})},function(e,t){e.exports=function(e){var t='<div class="search-box__count-info">';return e.count&&(t+='<span class="search-box__count-info-text">'+this.tr("<span>%1$s-%2$s</span> of <span>%3$s</span>",[e.countFrom,e.countTo,e.countTotal])+"</span>"),t+="</div>"}},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<ul class="sorting-menu">',o=e.sortings;if(o)for(var r,l=-1,n=o.length-1;l<n;)(r=o[l+=1]).enabled&&(r.active?(a+='<li class="sorting-menu__item sorting-menu__item_active"><i class="sorting-menu__icon icon icon-ok"></i><span class="sorting-menu__title">'+s(r.label)+"</span>",r.isNew&&(a+='<i class="sorting-menu__new label label-new-block-medium"></i>'),a+="</li>"):(a+='<li class="sorting-menu__item"><a class="sorting-menu__link" data-sorting='+s(r.key)+' href="'+r.href+'">'+s(r.label),r.isNew&&(a+='<i class="sorting-menu__new label label-new-block-medium"></i>'),a+="</a></li>"));return a+="</ul>"}},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="search-sorting-box">';if(e.compactMode){a+='<div class="search-sorting-mobile">';var o=e.sortings;if(o)for(var r=-1,l=o.length-1;r<l;)((u=o[r+=1]).active||u.isDefault)&&(a+='<span class="search-sorting-mobile__current _sorting-menu"><span class="search-sorting-mobile__current-title">'+s(u.label)+'</span><i class="search-sorting-mobile__arrow arrow arrow-black arrow-bottom"></i>',u.isNew&&(a+='<i class="search-sorting-mobile__new label label-new-block-medium"></i>'),a+="</span>");a+='<ul class="search-sorting-mobile__menu">';var n=e.sortings;if(n)for(var c=-1,h=n.length-1;c<h;)(u=n[c+=1]).enabled&&(u.active?(a+='<li class="search-sorting-mobile__item search-sorting-mobile__item_active"><i class="search-sorting-mobile__select icon icon-ok"></i><span class="search-sorting-mobile__title">'+s(u.label)+"</span>",u.isNew&&(a+='<i class="search-sorting-mobile__new label label-new-block-medium"></i>'),a+="</li>"):(a+='<li class="search-sorting-mobile__item"><a class="search-sorting-mobile__link" data-sorting='+s(u.key)+' href="'+u.href+'">'+s(u.label)+"</a>",u.isNew&&(a+='<i class="search-sorting-mobile__new label label-new-block-medium"></i>'),a+="</li>"));a+='<li class="search-sorting-mobile__item _sorting-menu"><span class="search-sorting-mobile__close">'+this.tr("Close")+"</span></li></ul></div>"}if(!e.mobileMode){a+='<ul class="search-sorting">';var d=e.sortings;if(d)for(var u,p=-1,f=d.length-1;p<f;)(u=d[p+=1]).enabled&&(u.active?(a+='<li class="search-sorting__item search-sorting__item_active"><span class="search-sorting__title">'+s(u.label)+"</span>",u.isNew&&(a+='<i class="search-sorting__new label label-new-block-medium"></i>'),a+="</li>"):(a+='<li class="search-sorting__item"><a class="search-sorting__link" data-sorting='+s(u.key)+' href="'+u.href+'">'+s(u.label)+"</a>",u.isNew&&(a+='<i class="search-sorting__new label label-new-block-medium"></i>'),a+="</li>"));a+="</ul>"}return a+="</div>"}},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="search-sorting-box search-sorting-box_compact"><div class="search-sorting-compact _search-sorting-compact">',o=e.sortings;if(o)for(var r=-1,l=o.length-1;r<l;)(c=o[r+=1]).active&&(a+='<span class="search-sorting-compact__current _sorting-menu _sorting-menu-compact"><span class="search-sorting-compact__current-title-box">'+this.tr("Sort by")+':<span class="search-sorting-compact__current-title">'+s(c.label)+'</span></span><i class="search-sorting-compact__arrow arrow arrow-black arrow-bottom"></i>',c.isNew&&(a+='<i class="search-sorting-compact__new label label-new-block-medium"></i>'),a+="</span>");a+='<ul class="search-sorting-mobile__menu">';var n=e.sortings;if(n)for(var c,h=-1,d=n.length-1;h<d;)(c=n[h+=1]).enabled&&(c.active?(a+='<li class="search-sorting-mobile__item search-sorting-mobile__item_active"><i class="search-sorting-mobile__select icon icon-ok"></i><span class="search-sorting-mobile__title">'+s(c.label)+"</span>",c.isNew&&(a+='<i class="search-sorting-mobile__new label label-new-block-medium"></i>'),a+="</li>"):(a+='<li class="search-sorting-mobile__item"><a class="search-sorting-mobile__link" data-sorting='+s(c.key)+' href="'+c.href+'">'+s(c.label)+"</a>",c.isNew&&(a+='<i class="search-sorting-mobile__new label label-new-block-medium"></i>'),a+="</li>"));return a+='<li class="search-sorting-mobile__item _sorting-menu"><span class="search-sorting-mobile__close">'+this.tr("Close")+"</span></li></ul></div></div>"}},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="search-filters-indicator">';if(e.schema){var o=e.keys;if(o)for(var r,l=-1,n=o.length-1;l<n;)r=o[l+=1],e.schema[r]&&(a+='<div class="search-filters-indicator__item filter-item _item" data-name="'+s(r)+'">',"accuracy"===r?a+='<span class="filter-item__name">'+this.tr("Accuracy: %s",e.schema[r])+"</span>":"orientation"===r?a+='<i class="filter-item__icon icon icon-orientation icon-orientation-'+s(e.schema[r])+'"></i>':"editorial_only"===r?a+='<span class="filter-item__name">'+this.tr("Editorial Only")+"</span>":"editorial_exclude"===r?a+='<span class="filter-item__name">'+this.tr("Exclude Editorial")+"</span>":"mr_property_only"===r?a+='<span class="filter-item__name">'+this.tr("People Only")+"</span>":"mr_property_exclude"===r?a+='<span class="filter-item__name">'+this.tr("Exclude People")+"</span>":"mr_release_quantity"===r?a+='<span class="filter-item__name">'+s(e.schema[r])+"</span>":"resolution"===r?a+='<span class="filter-item__name">'+this.tr("Resolution: %s",e.schema[r])+"</span>":"min_width"===r?a+='<span class="filter-item__name">'+this.tr("Min. Width %s %s",[e.schema[r],e.size])+"</span>":"min_height"===r?a+='<span class="filter-item__name">'+this.tr("Min. Height %s %s",[e.schema[r],e.size])+"</span>":"color"===r?(a+='<i class="filter-item__icon color-icon',"#ffffff"===e.schema[r]&&(a+=" color-icon-white"),a+='" style="background-color: '+s(e.schema[r])+';"></i>'):a+='<span class="filter-item__name">'+s(e.schema[r])+"</span>",a+='<i class="filter-item__reset button-reset"></i></div>');a+='<div class="search-filters-indicator__item control-item _reset"><a class="filter-item__clear">'+this.tr("Clear")+"</a></div>"}return a+="</div>"}},function(e,t,i){"use strict";var s=i(0),a=i(478),o=i(791),r=i(684),l=i(749),n=i(788),c=i(748),h=i(860),d=i(853),u=i(842),p=i(698),f=i(840),g=i(683),m=i(839),b=i(800);e.exports=a.extend({name:"SearchResult",el:!1,template:p,banners:[],topKeywords:[],initialize:function(){var e=this;this.listenTo(this.collection,"update reset",function(){e.collection.length||e.findView("SearchNoResult")||e.render()})},prepareRender:function(){this.enabledFolderSearch()?(this.initializeHeaderFolder(),this.initializeContent(),this.initializeFooterFolder()):(this.initializeHeader(),this.initializeContent(),this.initializeFooter())},serialize:function(){return{hasResult:!!this.collection.length,isCategory:this.app.store.get("SearchQuery").isCategory(),isEnabledFolderSearch:this.enabledFolderSearch()}},initializeHeader:function(){this.isSubFiltersEnabled?this.initializeHeaderEnterprise():this.initializeHeaderDefault()},initializeHeaderEnterprise:function(){this.setView("._search-header",new h({app:this.app,collection:this.collection,onSearchQueryChange:this.onSearchQueryChange.bind(this),onSearchSettingsChange:this.onSearchSettingsChange.bind(this),sortingCollection:this.sortingCollection,groups:this.enterpriseGroups,removeFilterIndicators:this.removeFilterIndicators.bind(this),resetFilterIndicators:this.resetFilterIndicators.bind(this),pagerModel:this.pagerModel,searchAuthor:this.searchAuthor,searchInfo:this.searchInfo,onRenderCallback:this.onRenderCallback.bind(this)}))},initializeHeaderDefault:function(){this.setView("._search-header",new c({app:this.app,collection:this.collection,onSearchQueryChange:this.onSearchQueryChange.bind(this),onSearchSettingsChange:this.onSearchSettingsChange.bind(this),sortingCollection:this.sortingCollection,removeFilterIndicators:this.removeFilterIndicators.bind(this),resetFilterIndicators:this.resetFilterIndicators.bind(this),pagerModel:this.pagerModel,searchAuthor:this.searchAuthor,searchInfo:this.searchInfo,onRenderCallback:this.onRenderCallback.bind(this)}))},initializeHeaderFolder:function(){this.setViews({"._search-header":new d({app:this.app,collection:this.collection,sortingCollection:this.sortingCollection,searchInfo:this.searchInfo,onSearchQueryChange:this.onSearchQueryChange.bind(this),onSearchSettingsChange:this.onSearchSettingsChange.bind(this)})})},initializeContent:function(){this.collection.length?this.setView("._search-content",new o({app:this.app,collection:this.collection,pagerModel:this.pagerModel,searchAuthor:this.searchAuthor,defaultLayout:this.enabledFolderSearch()?"wide":null})):this.setView("._search-content",new n({app:this.app,banners:this.banners,topKeywords:this.topKeywords,searchInfo:this.searchInfo,collection:this.latestCollections}))},initializeFooter:function(){this.collection.length&&(this.setViews({"._search-footer":[new l({template:f,app:this.app,searchInfo:this.searchInfo,searchAuthor:this.searchAuthor,collection:this.collection,sortingCollection:this.sortingCollection,onSearchQueryChange:this.onSearchQueryChange.bind(this)}),new r({app:this.app,template:g,className:"pager pager_location-search",model:this.pagerModel,searchAuthor:this.searchAuthor,searchInfo:this.searchInfo,collection:this.collection}),new l({app:this.app,isFooter:!0,template:m,searchInfo:this.searchInfo,searchAuthor:this.searchAuthor,collection:this.collection,sortingCollection:this.sortingCollection,onSearchQueryChange:this.onSearchQueryChange.bind(this)})]}),this.app.features.isFeatureOnValue("Search template texts")&&this.setViews({"._search-seo-text":new u({app:this.app,collection:this.collection,searchInfo:this.searchInfo})}))},initializeFooterFolder:function(){this.setViews({"._search-footer":new r({app:this.app,template:b,className:"pager pager_big pager_location-folder",placeholder:"...",model:this.pagerModel,searchAuthor:this.searchAuthor,searchInfo:this.searchInfo,collection:this.collection})})},onPageChange:s.noop,onSearchQueryChange:s.noop,onSearchSettingsChange:s.noop,enabledFolderSearch:s.noop})},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="filter-box__item">',o=e.colors;if(o)for(var r,l=-1,n=o.length-1;l<n;)a+='<i class="filter-box__btn-color button-color button-color-medium',"#fff"!==(r=o[l+=1]).hex&&"#ffffff"!==r.hex||(a+=" button-color-is-white"),e.currentColor===r.hex&&(a+=" active"),a+=' _color" data-value="'+s(r.hex)+'"data-vcolor="'+s(r.hex)+'"style="background-color: '+s(r.hex)+'"></i>';return a+='<input type="hidden" name="color" value="" /></div>'}},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})});return'<div class="filter-box filter-box_with-help"><i class="filter-box__help icon icon-help '+s(e.classNames.helpIcon)+'"></i><div class="filter-box__content filter-box__content_table"><label class="filter-box__input-box field-box input-box input-box-s"><input class="filter-box__input input input-s _field" type="text" name="'+s(e.name)+'" value="'+s(e.value)+'" placeholder="'+s(e.placeholder)+'" autocomplete="off" /></label><button class="filter-box__input-apply button button-s button-grey _search">'+this.tr("Apply")+"</button></div></div>"}},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="search-filters-mobile"><form method="GET" action="" class="search-filters-mobile__form"><input type="submit" class="search-filters-mobile__submit" /><input type="hidden" name="sorting" value="" /><div class="search-filters-mobile__item _filter-item';if(e.opened.accuracy&&(a+=" search-filters-mobile__item_opened"),a+='" data-key="accuracy"><div class="filter-title-box _toggle-filter',e.changed.accuracy&&(a+=" filter-title-box_has-value"),a+='"><span class="filter-title-box__title">'+this.tr("Accuracy")+'</span><span class="filter-value"><span class="filter-value__title"></span><span class="filter-value__content">'+e.labels.accuracy+'</span></span><i class="filter-title-box__arrow arrow arrow-black arrow-',e.opened.accuracy?a+="top":a+="bottom",a+='"></i><i class="filter-title-box__reset button-reset _button-reset"></i></div><div class="filter-box',e.nonDefaults.seller&&(a+=" filter-box_disabled"),a+='"><div id="slider-accuracy-mobile" class="filter-box__slider ui-slider-block"></div></div></div><div class="search-filters-mobile__item _filter-item',e.opened.category&&(a+=" search-filters-mobile__item_opened"),a+='" data-key="category"><div class="filter-title-box _toggle-filter',e.changed.category&&(a+=" filter-title-box_has-value"),a+='"><span class="filter-title-box__title">'+this.tr("Category")+'</span><span class="filter-value"><span class="filter-value__title"></span><span class="filter-value__content">'+e.labels.category+'</span></span><i class="filter-title-box__arrow arrow arrow-black arrow-',e.opened.category?a+="top":a+="bottom",a+='"></i><i class="filter-title-box__reset button-reset _button-reset"></i></div><div class="filter-box filter-box_with-scroll _categories"></div></div><div class="search-filters-mobile__item _filter-item',e.opened.seller&&(a+=" search-filters-mobile__item_opened"),a+='" data-key="seller"><div class="filter-title-box _toggle-filter',e.changed.seller&&(a+=" filter-title-box_has-value"),a+='"><span class="filter-title-box__title">'+this.tr("Contributor")+'</span><span class="filter-value"><span class="filter-value__title"></span><span class="filter-value__content">'+e.labels.seller+'</span></span><i class="filter-title-box__arrow arrow arrow-black arrow-',e.opened.seller?a+="top":a+="bottom",a+='"></i><i class="filter-title-box__reset button-reset _button-reset"></i></div><div class="_contributor"></div></div><div class="search-filters-mobile__item _filter-item',e.opened.exclude_keywords&&(a+=" search-filters-mobile__item_opened"),a+='" data-key="exclude_keywords"><div class="filter-title-box _toggle-filter',e.changed.exclude_keywords&&(a+=" filter-title-box_has-value"),a+='"><span class="filter-title-box__title">'+this.tr("Exclude Keywords")+'</span><span class="filter-value"><span class="filter-value__title"></span><span class="filter-value__content">'+e.labels.exclude_keywords+'</span></span><i class="filter-title-box__arrow arrow arrow-black arrow-',e.opened.exclude_keywords?a+="top":a+="bottom",a+='"></i><i class="filter-title-box__reset button-reset _button-reset"></i></div><div class="_exclude-keywords"></div></div>',e.needToShowPhotoFilters){a+='<div class="search-filters-mobile__item _filter-item',e.opened.orientation&&(a+=" search-filters-mobile__item_opened"),a+='" data-key="orientation"><div class="filter-title-box _toggle-filter',e.changed.orientation&&(a+=" filter-title-box_has-value"),a+='"><span class="filter-title-box__title">'+this.tr("Orientation")+'</span><span class="filter-value"><span class="filter-value__title"></span><span class="filter-value__content">'+e.labels.orientation+'</span></span><i class="filter-title-box__arrow arrow arrow-black arrow-',e.opened.orientation?a+="top":a+="bottom",a+='"></i><i class="filter-title-box__reset button-reset _button-reset"></i></div><div class="filter-box _orientation">';var o=e.orientations;if(o)for(var r=-1,l=o.length-1;r<l;)a+='<label class="filter-box__item-orientation field-box radio-box orientation-box orientation-box-wide"><input class="radio" type="radio" name="orientation" value="'+s((c=o[r+=1]).key)+'"',c.key===e.attrs.orientation&&(a+=' checked="checked"'),a+=' /><i class="icon icon-orientation icon-orientation-'+s(c.value)+'"></i><i class="orientation-bg"></i></label>';a+="</div></div>"}if(e.displayEditorial&&(a+='<div class="search-filters-mobile__item _filter-item',e.opened.editorial&&(a+=" search-filters-mobile__item_opened"),a+='" data-key="editorial"><div class="filter-title-box _toggle-filter',e.changed.editorial&&(a+=" filter-title-box_has-value"),a+='"><span class="filter-title-box__title">'+this.tr("Editorial")+'</span><span class="filter-value"><span class="filter-value__title"></span><span class="filter-value__content">'+e.labels.editorial+'</span></span><i class="filter-title-box__arrow arrow arrow-black arrow-',e.opened.editorial?a+="top":a+="bottom",a+='"></i><i class="filter-title-box__reset button-reset _button-reset" data-key="',e.attrs.editorial_only&&(a+="editorial_only"),e.attrs.editorial_exclude&&(a+="editorial_exclude"),a+='"></i></div><div class="filter-box"><label class="filter-box__item field-box checkbox-box checkbox-box-l"><input class="checkbox" type="checkbox" name="editorial_only"',e.attrs.editorial_only&&(a+=' checked="checked"'),a+=' /><i class="icon icon-checkbox icon-checkbox-l"></i><span class="checkbox-text">'+this.tr("Editorial Only")+'</span></label><label class="filter-box__item field-box checkbox-box checkbox-box-l"><input class="checkbox" type="checkbox" name="editorial_exclude"',e.attrs.editorial_exclude&&(a+=' checked="checked"'),a+=' /><i class="icon icon-checkbox icon-checkbox-l"></i><span class="checkbox-text">'+this.tr("Exclude Editorial")+"</span></label></div></div>"),a+='<div class="search-filters-mobile__item _filter-item',e.opened.people&&(a+=" search-filters-mobile__item_opened"),a+='" data-key="people"><div class="filter-title-box _toggle-filter',e.changed.people&&(a+=" filter-title-box_has-value"),a+='"><span class="filter-title-box__title"><span>'+this.tr("People")+'</span><i class="filter-title-box__new label label-new-text">NEW!</i></span><span class="filter-value"><span class="filter-value__title"></span><span class="filter-value__content">'+e.labels.people+'</span></span><i class="filter-title-box__arrow arrow arrow-black arrow-',e.opened.people?a+="top":a+="bottom",a+='"></i><i class="filter-title-box__reset button-reset _button-reset"></i></div><div class="filter-box"><div class="filter-box__item"><div class="filter-people-mobile _people"></div></div></div></div>',e.needToShowPhotoFilters)a+='<div class="search-filters-mobile__item _filter-item',e.opened.sizes&&(a+=" search-filters-mobile__item_opened"),a+='" data-key="sizes"><div class="filter-title-box _toggle-filter',e.changed.sizes&&(a+=" filter-title-box_has-value"),a+='"><span class="filter-title-box__title">'+this.tr("Image Size")+'</span><span class="filter-value"><span class="filter-value__title"></span><span class="filter-value__content">'+e.labels.sizes+'</span></span><i class="filter-title-box__arrow arrow arrow-black arrow-',e.opened.sizes?a+="top":a+="bottom",a+='"></i><i class="filter-title-box__reset button-reset _button-reset"></i></div><div class="filter-box"><div class="filter-box__item"><div class="filter-size-mobile _image-size"></div></div></div></div>';else{a+='<div class="search-filters-mobile__item _filter-item',e.opened.resolution&&(a+=" search-filters-mobile__item_opened"),a+='" data-key="resolution"><div class="filter-title-box _toggle-filter',e.changed.resolution&&(a+=" filter-title-box_has-value"),a+='"><span class="filter-title-box__title">'+this.tr("Resolution")+'</span><span class="filter-value"><span class="filter-value__title"></span><span class="filter-value__content">'+e.labels.resolution+'</span></span><i class="filter-title-box__arrow arrow arrow-black arrow-',e.opened.resolution?a+="top":a+="bottom",a+='"></i><i class="filter-title-box__reset button-reset _button-reset"></i></div><div class="filter-box"><div class="filter-box__item radio-group">';var n=e.resolutions;if(n)for(var c,h=-1,d=n.length-1;h<d;)a+='<label class="filter-box__item-resolution field-box radio-box resolution-box resolution-box-wide"><input class="radio" type="radio" name="resolution" value="'+s((c=n[h+=1]).key)+'"',c.key===e.attrs.resolution&&(a+=' checked="checked"'),a+=' /><i class="resolution-size resolution-size-'+s(c.modifier)+'">'+this.tr(c.value)+'</i><i class="resolution-bg"></i></label>';a+="</div></div></div>"}return a+='<div class="search-filters-mobile__item _filter-item',e.opened.color&&(a+=" search-filters-mobile__item_opened"),a+='" data-key="color"><div class="filter-title-box _toggle-filter',e.changed.color&&(a+=" filter-title-box_has-value"),a+='"><span class="filter-title-box__title">'+this.tr("Color")+'</span><span class="filter-value"><span class="filter-value__title"></span><span class="filter-value__content">',e.changed.color&&(a+='<i class="filter-box__btn-color button-color button-color-medium',"#fff"!==e.labels.color.hex&&"#ffffff"!==e.labels.color.hex||(a+=" button-color-is-white"),a+='" data-value="'+e.labels.color.hex+'" data-vcolor="'+e.labels.color.hex+'" style="background-color: '+e.labels.color.hex+'"></i>'),a+='</span></span><i class="filter-title-box__arrow arrow arrow-black arrow-',e.opened.color?a+="top":a+="bottom",a+='"></i><i class="filter-title-box__reset button-reset _button-reset"></i></div><div class="filter-box filter-box_color _colors"></div></div><div class="search-filters-mobile__item"><div class="filter-title-box _toggle-filter _reset-all"><span class="filter-title-box__reset-title">'+this.tr("Reset All Filters")+'</span></div></div><div class="search-filters-mobile__item"><span class="filter-close-box _close">'+this.tr("Close")+"</span></div></form></div>"}},function(e,t,i){"use strict";(function(t){var s=i(0),a=i(478),o=i(11),r=o.categories,l=o.orientations,n=o.resolutions,c=i(142).colors,h=i(691),d=i(690),u=i(689),p=i(688),f=i(687),g=i(655),m=i(11).sizes,b=i(11).sizesVariables,_=i(633),v=i(480),w=i(479).SearchFilter,y=i(128),k=i(23),x=i(127),C=i(873),S=i(872),T=i(871),M=i(686),F=i(685);e.exports=h.extend({name:"SearchFilterMobile",el:!1,template:C,events:{"click ._toggle-filter":"onFilterBoxClick","click ._reset-all":"onResetAllClick","click ._close":"onCloseClick","click ._button-reset":"onFilterResetSingleClick","change ._orientation input:radio":"onRegularFieldChange","change input[name=editorial_only]":"onRegularCheckboxChange","change input[name=editorial_exclude]":"onRegularCheckboxChange","change input[name=resolution]":"onTypifyFieldChange","mouseenter ._contributor-hint":function(e){this.tooltip(e,"show","contributorToolTip")},"mouseleave ._contributor-hint":function(e){this.tooltip(e,"hide","contributorToolTip")},"mouseenter ._keywords-hint":function(e){this.tooltip(e,"show","keywordsToolTip")},"mouseleave ._keywords-hint":function(e){this.tooltip(e,"hide","keywordsToolTip")}},globals:{"resize window":"onWindowResize"},opened:{accuracy:!1,category:!1,seller:!1,exclude_keywords:!1,orientation:!1,editorial:!1,people:!1,sizes:!1,resolution:!1,color:!1},complexFields:["people","sizes"],mobileMode:!1,initialize:function(){this.model=this.app.store.get("SearchQuery"),this.listenToTheModel(),this.listenTo(this.app.observer,{"Search:ToggleMobileFilter":this.toggle,"Responsive:CloseMobileMenu":this.observeCloseMobileMenu})},prepareRender:function(){return!!this.shouldBeDisplayed()&&(this.setViews({"._categories":new f({model:this.model,scrollable:!0,onCategoryChangeCallback:this.onCategoryChange.bind(this)}),"._contributor":new u({template:S,name:"seller",type:"seller",placeholder:this.tr(y.EnterName),model:this.model,mode:"compact",classNames:{helpIcon:"_contributor-hint"},onChangeCallback:this.onSubFilterChange.bind(this),onResetCallback:this.onSubFilterResetSingle.bind(this)}),"._exclude-keywords":new u({template:S,name:"exclude_keywords",placeholder:this.tr(y.EnterKeywords),model:this.model,mode:"compact",classNames:{helpIcon:"_keywords-hint"},enabled:!1,onChangeCallback:this.onSubFilterChange.bind(this),onResetCallback:this.onSubFilterResetSingle.bind(this)}),"._people":new d({autoSubmit:!1,model:this.model,onChangeCallback:this.onSubFilterChange.bind(this),onResetCallback:this.onSubFilterResetSingle.bind(this)}),"._image-size":new p({autoSubmit:!1,model:this.model,onChangeCallback:this.onSubFilterChange.bind(this),onResetCallback:this.onSubFilterResetSingle.bind(this)}),"._colors":new g({template:T,model:this.model,mode:"mobile",onChangeCallback:this.onSubFilterChange.bind(this),onResetCallback:this.onSubFilterResetSingle.bind(this)}),"#slider-accuracy-mobile":new _({model:this.model,name:"accuracy",labels:{footer:[this.tr(y.Relevance),this.tr(y.Quality)]},onSlideCallback:this.onSlideCallback.bind(this),onStopCallback:this.onStopCallback.bind(this)}),contributorToolTip:new v({params:w,content:new a({el:!1,template:M})}),keywordsToolTip:new v({params:w,content:new a({el:!1,template:F})})}),!0)},serialize:function(){return{displayEditorial:this.model.getRestrictions().get("editorial"),nonDefaults:s.clone(this.model.getNonDefaults()),attrs:this.model.serialize(),needToShowPhotoFilters:!this.model.get("video")||this.model.get("video")&&this.model.get("photo")||this.model.get("video")&&this.model.get("vector"),orientations:l,resolutions:n,categories:r,opened:this.opened,changed:this.defineChanged(),labels:this.defineLabels()}},updateOpened:function(e,t){var i=!!t,a=e,o=function(e,t){return-1!==e.indexOf(t)||!!s.intersection(e,s.keys(t)).length};o(this.model.mutable.editorial,e)&&(a="editorial"),o(this.model.mutable.people,e)&&(a="people"),o(this.model.mutable.sizes,e)&&(a="sizes"),this.opened[a]=i},defineChanged:function(){var e=this.model.getNonDefaults(),t=function(e,t){return s.intersection(e,t).length>0};return{accuracy:!!e.accuracy,category:!!e.category,seller:!!e.seller,exclude_keywords:!!e.exclude_keywords,orientation:!!e.orientation,editorial:t(s.keys(e),this.model.mutable.editorial),people:t(s.keys(e),this.model.mutable.people),sizes:t(s.keys(e),["min_width","min_height"]),resolution:!!e.resolution,color:!!e.color}},defineLabels:function(){var e=this.model.getNonDefaults(),t=this.model.get("editorial_exclude")?this.tr(y.EditorialExclude):"";return{accuracy:this.model.get("accuracy"),category:this.makeLabel("category",this.model.get("category")),seller:this.model.get("seller"),exclude_keywords:this.model.get("exclude_keywords"),orientation:s.findWhere(l,{key:this.model.get("orientation")}).label,editorial:this.model.get("editorial_only")?this.tr(y.EditorialOnly):t,people:this.makeComplexLabel(e,this.model.mutable.people),sizes:this.makeComplexLabel(e,["min_width","min_height"]),resolution:s.findWhere(n,{key:this.model.get("resolution")}).value,color:s.findWhere(c,{hex:this.model.get("color")})}},makeComplexLabel:function(e,t){return s.map(s.pick(e,t),function(e,t){return this.makeLabel(t,e)},this).join(", ")},makeLabel:function(e,t){return-1!==this.model.mutable.sizes.indexOf(e)?this.makeSizeLabel(e,t):k.makeIndicatorText(e,t)},makeSizeLabel:function(e,t){var i=s.findWhere(b,{key:e}),a=s.findWhere(m,{key:this.model.get("size_unit")});return i.value+": "+t+a.value},open:function(){this.$el.slideDown(300)},close:function(){this.$el.slideUp(300)},toggle:function(){x.mobileMode()&&this.app.observer.fire("Responsive:CloseMobileMenu",{cid:this.cid}),this.$el.slideToggle(300)},onFilterBoxClick:function(e){var t=this.$(e.currentTarget).closest("._filter-item"),i=t.attr("data-key");this.updateOpened(i,!t.hasClass("search-filters-mobile__item_opened")),t.toggleClass("search-filters-mobile__item_opened",this.opened[i]),t.find(".filter-title-box__arrow").removeClass("arrow-bottom arrow-top").addClass(this.opened[i]?"arrow-top":"arrow-bottom"),"category"===i&&this.opened[i]&&this.getView("._categories").updateScroll()},onResetAllClick:function(){this.model.clearSearchFiltration()},onCloseClick:function(){this.close()},onFilterResetSingleClick:function(e){e.stopPropagation();var t=this.$(e.currentTarget).attr("data-key")||this.$(e.currentTarget).closest("._filter-item").attr("data-key");this.updateOpened(t,!1),-1!==this.complexFields.indexOf(t)&&(t=this.model.mutable[t]),this.onSubFilterResetSingle(t)},onCategoryChange:function(e){this.updateOpened(e.currentTarget.name,!1),this.onTypifyFieldChange(e)},onSubFilterChange:function(e,t){this.updateOpened(e,!1),h.prototype.onSubFilterChange.call(this,e,t)},onSlideCallback:function(e,t){this.getView("#slider-accuracy-mobile").$(".ui-slider-scale").attr("data-value",t.value)},onStopCallback:function(e,t){this.onSubFilterChange("accuracy",t.value)},onWindowResize:s.throttle(function(){var e=t.browser?x.shouldEnableMobileLayout():this.mobileMode;e!==this.mobileMode&&(this.mobileMode=e,this.render())},10),tooltip:function(e,t,i){this.getView(i)[t](e)},observeCloseMobileMenu:function(e){e.cid!==this.cid&&this.close()},shouldBeDisplayed:function(){return t.browser&&x.shouldEnableMobileLayout()&&this.isSearchFormsVisible()},isSearchFormsVisible:function(){return!this.model.get("relatedTo")}})}).call(this,i(6))},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})});return'<div class="filter-compact__box filter-compact__box_table"><label class="filter-compact__input-box field-box input-box input-box-s"><input class="filter-compact__input input input-s _field" type="text" name="'+s(e.name)+'" value="'+s(e.value)+'" placeholder="'+s(e.placeholder)+'" autocomplete="off" /></label><button class="filter-compact__input-apply button button-s button-grey _search">'+this.tr("Apply")+"</button></div>"}},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="search-filters-compact';if(e.activeForm&&(a+=" search-filters-compact_active"),a+=" ",e.openedBlock||(a+="search-filters-compact_closed"),a+='"><form method="GET" action="" class="search-filters-compact__form"><input type="hidden" name="sorting" value="'+s(e.attrs.sorting)+'"/><div class="search-filters-compact__filter search-filters-compact__filter-menu _toggle-filter"><i class="search-filters-compact__button icon icon-filter icon-filter-menu"></i></div><div class="search-filters-compact__filter" title="'+this.tr("Accuracy")+'"><i class="search-filters-compact__button icon icon-filter icon-filter-accuracy _filter-item',e.blocked.accuracy&&(a+=" hovered"),a+='" data-key="accuracy"></i><div class="filter-compact"><div class="filter-compact__title-box"><span class="filter-compact__title">'+this.tr("Accuracy")+'</span></div><div class="filter-compact__box filter-compact__box_accuracy',e.nonDefaults.seller&&(a+=" filter-compact__box_disabled"),a+='"><div class="filter-compact__slider ui-slider-block _accuracy"></div></div><i class="filter-compact__triangle"></i></div></div><div class="search-filters-compact__filter" title="'+this.tr("Category")+'"><i class="search-filters-compact__button icon icon-filter icon-filter-category _filter-item',e.blocked.category&&(a+=" hovered"),a+='" data-key="category"></i><div class="filter-compact"><div class="filter-compact__title-box"><span class="filter-compact__title">'+this.tr("Category")+'</span></div><div class="filter-compact__box filter-compact__box_with-scroll _category"></div><i class="filter-compact__triangle"></i></div></div><div class="search-filters-compact__filter" title="'+this.tr("Contributor")+'"><i class="search-filters-compact__button icon icon-filter icon-filter-contributor _filter-item',e.blocked.seller&&(a+=" hovered"),a+='" data-key="seller"></i><div class="filter-compact"><div class="filter-compact__title-box"><span class="filter-compact__title">'+this.tr("Contributor")+'</span><i class="filter-compact__help icon icon-help _contributor-tooltip"></i></div><div class="_seller"></div><i class="filter-compact__triangle"></i></div></div><div class="search-filters-compact__filter" title="'+this.tr("Exclude Keywords")+'"><i class="search-filters-compact__button icon icon-filter icon-filter-exclude _filter-item',e.blocked.exclude_keywords&&(a+=" hovered"),a+='" data-key="exclude_keywords"></i><div class="filter-compact"><div class="filter-compact__title-box"><span class="filter-compact__title">'+this.tr("Exclude Keywords")+'</span><i class="filter-compact__help icon icon-help _keywords-tooltip"></i></div><div class="_exclude_keywords"></div><i class="filter-compact__triangle"></i></div></div>',e.needToShowPhotoFilters){a+='<div class="search-filters-compact__filter" title="'+this.tr("Orientation")+'"><i class="search-filters-compact__button icon icon-filter icon-filter-orientation _filter-item',e.blocked.orientation&&(a+=" hovered"),a+='" data-key="orientation"></i><div class="filter-compact"><div class="filter-compact__title-box"><span class="filter-compact__title">'+this.tr("Orientation")+'</span></div><div class="filter-compact__box _orientation">';var o=e.orientations;if(o)for(var r=-1,l=o.length-1;r<l;)a+='<label class="filter-compact__list-item filter-list-item filter-list-item_orientation field-box radio-box"><input class="filter-list-item__radio radio" type="radio" name="orientation" value="'+s((c=o[r+=1]).key)+'" ',c.key===e.attrs.orientation&&(a+=' checked="checked"'),a+=' /><i class="filter-list-item__icon filter-list-item__icon_active orientation-box orientation-box-normal active"><i class="icon icon-orientation icon-orientation-'+s(c.value)+'"></i></i><i class="filter-list-item__icon orientation-box orientation-box-normal"><i class="icon icon-orientation icon-orientation-'+s(c.value)+'"></i></i><span class="filter-list-item__text radio-text">'+this.tr(c.label)+"</span></label>";a+='</div><i class="filter-compact__triangle"></i></div></div>'}if(e.displayEditorial&&(a+='<div class="search-filters-compact__filter" title="'+this.tr("Editorial")+'"><i class="search-filters-compact__button icon icon-filter icon-filter-editorial _filter-item',e.blocked.editorial&&(a+=" hovered"),a+='" data-key="editorial"></i><div class="filter-compact"><div class="filter-compact__title-box"><span class="filter-compact__title">'+this.tr("Editorial")+'</span></div><div class="filter-compact__box"><label class="filter-compact__list-item filter-list-item field-box checkbox-box checkbox-box-l"><input class="filter-list-item__checkbox checkbox" type="checkbox" name="editorial_only" ',e.attrs.editorial_only&&(a+=' checked="checked"'),a+=' /><i class="filter-list-item__icon icon icon-checkbox icon-checkbox-l"></i><span class="filter-list-item__text checkbox-text">'+this.tr("Editorial Only")+'</span></label><label class="filter-compact__list-item filter-list-item field-box checkbox-box checkbox-box-l"><input class="filter-list-item__checkbox checkbox" type="checkbox" name="editorial_exclude" ',e.attrs.editorial_exclude&&(a+=' checked="checked"'),a+=' /><i class="filter-list-item__icon icon icon-checkbox icon-checkbox-l"></i><span class="filter-list-item__text checkbox-text">'+this.tr("Exclude Editorial")+'</span></label></div><i class="filter-compact__triangle"></i></div></div>'),a+='<div class="search-filters-compact__filter" title="'+this.tr("People")+'"><span class="search-filters-compact__new label label-new-text">NEW!</span><i class="search-filters-compact__button icon icon-filter icon-filter-people _filter-item',e.blocked.people&&(a+=" hovered"),a+='" data-key="people"></i><div class="filter-compact"><div class="filter-compact__title-box"><span class="filter-compact__title">'+this.tr("People")+'</span></div><div class="filter-compact__box filter-compact__box_people filter-people _block _people"></div><i class="filter-compact__triangle"></i></div></div>',e.needToShowPhotoFilters)a+='<div class="search-filters-compact__filter" title="'+this.tr("Image Size")+'"><i class="search-filters-compact__button icon icon-filter icon-filter-size _filter-item',e.blocked.size&&(a+=" hovered"),a+='" data-key="size"></i>\x3c!--<span class="search-filters-compact__new label label-new-text">NEW!</span>--\x3e<div class="filter-compact"><div class="filter-compact__title-box"><span class="filter-compact__title">'+this.tr("Image Size")+'</span></div><div class="filter-compact__box filter-compact__box_size filter-size _block _size"></div><i class="filter-compact__triangle"></i></div></div>';else{a+='<div class="search-filters-compact__filter" title="'+this.tr("Resolution")+'"><i class="search-filters-compact__button icon icon-filter icon-filter-resolution _filter-item',e.blocked.resolution&&(a+=" hovered"),a+='" data-key="resolution"></i>\x3c!--<span class="search-filters-compact__new label label-new-text">NEW!</span>--\x3e<div class="filter-compact"><div class="filter-compact__title-box"><span class="filter-compact__title">'+this.tr("Resolution")+'</span></div><div class="filter-compact__box filter-compact_min-width"><div class="filter-compact__item filter-compact__item-resolution radio-group">';var n=e.resolutions;if(n)for(var c,h=-1,d=n.length-1;h<d;)a+='<label class="filter-full__item-resolution field-box radio-box resolution-box resolution-box-wide"><input class="radio" type="radio" name="resolution" value="'+s((c=n[h+=1]).key)+'" ',c.key===e.attrs.resolution&&(a+=' checked="checked"'),a+=' /><i class="resolution-size resolution-size-'+s(c.modifier)+'">'+this.tr(c.value)+'</i><i class="resolution-bg"></i></label>';a+='</div></div><i class="filter-compact__triangle"></i></div></div>'}return a+='<div class="search-filters-compact__filter" title="'+this.tr("Color")+'"><i class="search-filters-compact__button icon icon-filter icon-filter-color _filter-item',e.blocked.color&&(a+=" hovered"),a+='" data-key="color"></i><div class="filter-compact"><div class="filter-compact__title-box"><span class="filter-compact__title">'+this.tr("Color")+'</span></div><div class="filter-compact__box filter-compact__box_color _color"></div><i class="filter-compact__triangle"></i></div></div></form></div>'}},function(e,t,i){"use strict";var s=i(0),a=i(16),o=i(478),r=i(691),l=i(690),n=i(689),c=i(688),h=i(687),d=i(655),u=i(480),p=i(633),f=i(11),g=i(479),m=i(128),b=i(876),_=i(875),v=i(750),w=i(686),y=i(685);e.exports=r.extend({name:"SearchFilterCompact",el:!1,template:b,events:{"click ._toggle-filter":"onToggleFilterClick","click ._filter-item":"onFilterItemClick","mouseenter ._filter-item":"onFilterItemMouseEnter","change ._orientation input:radio":"onRegularFieldChange","change input[name=editorial_only]":"onRegularCheckboxChange","change input[name=editorial_exclude]":"onRegularCheckboxChange","change input[name=resolution]":"onTypifyFieldChange","mouseenter ._contributor-tooltip":"showContributorToolTip","mouseleave ._contributor-tooltip":"hideContributorToolTip","mouseenter ._keywords-tooltip":"showKeywordsToolTip","mouseleave ._keywords-tooltip":"hideKeywordsToolTip"},globals:{mousedown:"onBodyClick"},initialize:function(){this.model=this.app.store.get("SearchQuery"),this.listenToTheModel()},serialize:function(){return{displayEditorial:this.model.getRestrictions().get("editorial"),nonDefaults:s.clone(this.model.getNonDefaults()),openedBlock:this.opened,blocked:this.blocked,attrs:this.model.serialize(),needToShowPhotoFilters:!this.model.get("video")||this.model.get("video")&&this.model.get("photo")||this.model.get("video")&&this.model.get("vector"),activeForm:-1!==s.values(this.blocked).indexOf(!0),categories:f.categories,orientations:f.orientations,resolutions:f.resolutions}},clientAfterRender:function(){this.setNotExistView("._accuracy",p,{model:this.model,name:"accuracy",labels:{footer:[this.tr(m.Relevance),this.tr(m.Quality)]},onSlideCallback:this.onSlideCallback.bind(this),onStopCallback:this.onStopCallback.bind(this)}),this.setNotExistView("._category",h,{model:this.model,scrollable:!0,onCategoryChangeCallback:this.onTypifyFieldChange.bind(this)}),this.setNotExistView("._seller",n,{template:_,name:"seller",type:"seller",placeholder:this.tr(m.EnterName),model:this.model,mode:"compact",onChangeCallback:this.onAutoCompleteChange.bind(this),onResetCallback:this.onSubFilterResetSingle.bind(this)}),this.setNotExistView("._exclude_keywords",n,{template:_,name:"exclude_keywords",placeholder:this.tr(m.EnterKeywords),model:this.model,mode:"compact",enabled:!1,onChangeCallback:this.onAutoCompleteChange.bind(this),onResetCallback:this.onSubFilterResetSingle.bind(this)}),this.setNotExistView("._people",l,{autoSubmit:!1,model:this.model,onChangeCallback:this.onSubFilterChange.bind(this),onResetCallback:this.onSubFilterResetSingle.bind(this),onApplyCallback:this.toggleActivity.bind(this,!1)}),this.setNotExistView("._size",c,{autoSubmit:!1,model:this.model,onChangeCallback:this.onSubFilterChange.bind(this),onResetCallback:this.onSubFilterResetSingle.bind(this),onApplyCallback:this.toggleActivity.bind(this,!1)}),this.setNotExistView("._color",d,{template:v,model:this.model,mode:"compact",onChangeCallback:this.onSubFilterChange.bind(this),onResetCallback:this.onSubFilterResetSingle.bind(this),onApplyCallback:this.toggleActivity.bind(this,!1)}),this.setNotExistView("contributorToolTip",u,{params:g.SearchFilter,content:new o({el:!1,template:w})}),this.setNotExistView("keywordsToolTip",u,{params:g.SearchFilter,content:new o({el:!1,template:y})})},toggleActivity:function(e){var t=e;s.isUndefined(t)&&(t=!this.$el.hasClass("search-filters-compact_active")),this.$el.toggleClass("search-filters-compact_active",t),t||s.each(this.blocked,function(e,t,i){e&&(i[t]=!1)})},onToggleFilterClick:function(e){e.stopPropagation(),this.onToggleFilterClickCallback("compact")},onFilterItemClick:function(){this.toggleActivity(),this.updateCategoryScroll()},onFilterItemMouseEnter:function(e){var t=this.$("._filter-item.hovered"),i=a.$(e.currentTarget),s=this.getView("._"+i.attr("data-key"));s&&!s.hasRendered&&s.render(),this.blocked[t.attr("data-key")]=!1,this.blocked[i.attr("data-key")]=!0,t.removeClass("hovered"),i.addClass("hovered"),this.updateCategoryScroll()},onBodyClick:function(e){this.el.contains(e.target)||this.toggleActivity(!1)},onRegularFieldChange:function(e){this.toggleActivity(!1),r.prototype.onRegularFieldChange.call(this,e)},onTypifyFieldChange:function(e){this.toggleActivity(!1),r.prototype.onTypifyFieldChange.call(this,e)},onRegularCheckboxChange:function(e){this.toggleActivity(!1),r.prototype.onRegularCheckboxChange.call(this,e)},onAutoCompleteChange:function(e,t){this.toggleActivity(!1),this.onSubFilterChange(e,t)},showContributorToolTip:function(e){this.getView("contributorToolTip").show(e)},hideContributorToolTip:function(e){this.getView("contributorToolTip").hide(e)},showKeywordsToolTip:function(e){this.getView("keywordsToolTip").show(e)},hideKeywordsToolTip:function(e){this.getView("keywordsToolTip").hide(e)},onSlideCallback:function(e,t){this.getView("._accuracy").$(".ui-slider-scale").attr("data-value",t.value)},onStopCallback:function(e,t){this.onSubFilterChange("accuracy",t.value)},open:function(e){this.opened=!0,this.$el.removeClass("search-filters-compact_closed close-animation").addClass("open-animation"),s.delay(s.bind(function(){e.apply(this)},this),100)},close:function(e){this.opened=!1,this.toggleActivity(!1),this.$el.removeClass("open-animation").addClass("close-animation"),s.delay(s.bind(function(){e.apply(this)},this),100)},updateCategoryScroll:function(){if(this.$(".filter-compact__box._category").is(":visible")){var e=this.getView("._category");e.hasRendered?e.updateScroll():e.once("clientAfterRender",e.updateScroll)}},onToggleFilterClickCallback:s.noop})},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<label class="filter-full__item field-box input-box input-box-s"><input class="input input-s _field" type="text" name="'+s(e.name)+'" value="'+s(e.value)+'" placeholder="'+s(e.placeholder)+'" autocomplete="off" /><i data-key="'+s(e.name)+'" class="filter-full__btn-quick hidden button-quick-search _search"></i><i data-key="'+s(e.name)+'" class="filter-full__btn-reset';return e.value.length||(a+=" hidden"),a+=' button-reset _reset"></i></label>'}},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="filter-full__select field-box select-box select-box-s"><i class="arrow arrow-black arrow-bottom"></i><select name="category" class="select select-s _category"><option value="0">'+this.tr("All Categories")+"</option>",o=e.categories;if(o)for(var r,l=-1,n=o.length-1;l<n;)a+='<option value="'+s((r=o[l+=1]).id)+'" ',e.model.category==r.id&&(a+=' selected="selected"'),a+=">"+this.tr(r.name)+"</option>";return a+="</select></div>"}},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="search-filters-full ';if(e.openedBlock||(a+="search-filters-full_closed"),a+='"><form method="GET" action="" class="search-filters-full__form"><input type="hidden" name="sorting" value="'+s(e.attrs.sorting)+'"/><div data-name="accuracy" class="search-filters-full__filter filter-full ',"accuracy"===e.hoveredFilterName&&(a+="hover"),a+='"><div class="filter-full__title-box"><span class="filter-full__title">'+this.tr("Accuracy")+':</span></div><div class="filter-full__item',e.nonDefaults.seller&&(a+=" filter-full__item_disabled"),a+='"><div id="slider-accuracy" class="filter-full__slider ui-slider-block"></div>',e.attrs.accuracy&&(a+='<i data-key="accuracy" class="filter-full__btn-reset filter-full__btn-reset_accuracy button-reset _button-reset"></i>'),a+='</div></div><div data-name="category" class="search-filters-full__filter filter-full ',"category"===e.hoveredFilterName&&(a+="hover"),a+='"><div class="filter-full__title-box"><span class="filter-full__title">'+this.tr("Category")+':</span></div><div class="filter-full__item"><div class="_categories"></div>',e.attrs.category.length&&(a+='<i data-key="category" class="filter-full__btn-reset button-reset _button-reset"></i>'),a+='</div></div><div data-name="contributor" class="search-filters-full__filter filter-full ',"contributor"===e.hoveredFilterName&&(a+="hover"),a+='"><div class="filter-full__title-box"><span class="filter-full__title">'+this.tr("Contributor")+':</span><i class="filter-full__help icon icon-help _contributor-tooltip"></i></div><div class="_contributor"></div></div><div data-name="exclude-keywords" class="search-filters-full__filter filter-full ',"exclude-keywords"===e.hoveredFilterName&&(a+="hover"),a+='"><div class="filter-full__title-box"><span class="filter-full__title">'+this.tr("Exclude Keywords")+':</span><i class="filter-full__help icon icon-help _keywords-tooltip"></i></div><div class="_exclude-keywords"></div></div>',e.needToShowPhotoFilters){a+='<div data-name="orientation" class="search-filters-full__filter filter-full ',"orientation"===e.hoveredFilterName&&(a+="hover"),a+='"><div class="filter-full__title-box"><span class="filter-full__title">'+this.tr("Orientation")+':</span></div><div class="filter-full__item radio-group _orientation">';var o=e.orientations;if(o)for(var r=-1,l=o.length-1;r<l;)a+='<label class="filter-full__item-orientation field-box radio-box orientation-box orientation-box-wide"><input class="radio" type="radio" name="orientation" value="'+s((c=o[r+=1]).key)+'" ',c.key===e.attrs.orientation&&(a+=' checked="checked"'),a+=' /><i class="icon icon-orientation icon-orientation-'+s(c.value)+'"></i><i class="orientation-bg"></i></label>';"all"!==e.attrs.orientation&&(a+='<i data-key="orientation" class="filter-full__btn-reset button-reset _button-reset"></i>'),a+="</div></div>"}if(e.displayEditorial&&(a+='<div data-name="editorial" class="search-filters-full__filter filter-full ',"editorial"===e.hoveredFilterName&&(a+="hover"),a+='"><div class="filter-full__title-box"><span class="filter-full__title">'+this.tr("Editorial")+':</span></div><label class="filter-full__item field-box checkbox-box checkbox-box-m"><input class="checkbox" type="checkbox" name="editorial_only"',e.attrs.editorial_only&&(a+=' checked="checked"'),a+=' /><i class="icon icon-checkbox icon-checkbox-m"></i><span class="filter-full__item-text_hover-underline checkbox-text">'+this.tr("Editorial Only")+"</span>",e.attrs.editorial_only&&(a+='<i data-key="editorial_only" class="filter-full__btn-reset button-reset _button-reset"></i>'),a+='</label><label class="filter-full__item field-box checkbox-box checkbox-box-m"><input class="checkbox" type="checkbox" name="editorial_exclude" ',e.attrs.editorial_exclude&&(a+=' checked="checked"'),a+=' /><i class="icon icon-checkbox icon-checkbox-m"></i><span class="checkbox-text filter-full__item-text_hover-underline">'+this.tr("Exclude Editorial")+"</span>",e.attrs.editorial_exclude&&(a+='<i data-key="editorial_exclude" class="filter-full__btn-reset button-reset _button-reset"></i>'),a+="</label></div>"),a+='<div data-name="people" class="search-filters-full__filter filter-full ',"people"===e.hoveredFilterName&&(a+="hover"),a+='"><div class="filter-full__title-box filter-full__title-box_pointer _toggle-block"><span class="filter-full__title">'+this.tr("People")+':</span><span class="filter-full__new label label-new-block"></span></div><div class="filter-people _block _people ',e.opened.people||(a+="hidden"),a+='" data-field="people"></div><i class="filter-full__arrow arrow arrow-black arrow-block-2',e.opened.people?a+=" arrow-top":a+=" arrow-bottom",a+=' _arrow"></i></div>',e.needToShowPhotoFilters)a+='<div data-name="size" class="search-filters-full__filter search-filters-full__filter-image-size filter-full ',"size"===e.hoveredFilterName&&(a+="hover"),a+='"><div class="filter-full__title-box filter-full__title-box_pointer _toggle-block"><span class="filter-full__title">'+this.tr("Image Size")+':</span></div><div class="filter-size _block _image-size ',e.opened.sizes||(a+="hidden"),a+='" data-field="sizes"></div><i class="filter-full__arrow arrow arrow-black arrow-block-2',e.opened.sizes?a+=" arrow-top":a+=" arrow-bottom",a+=' _arrow"></i></div>';else{a+='<div data-name="resolution" class="search-filters-full__filter search-filters-full__filter-resolution filter-full ',"_category"===e.hoveredFilterName&&(a+="resolution"),a+='"><div class="filter-full__title-box filter-full__title-box_pointer _toggle-block"><span class="filter-full__title">'+this.tr("Resolution")+':</span></div><div class="filter-full__item radio-group _block ',e.opened.resolution||(a+="hidden"),a+='" data-field="resolution">';var n=e.resolutions;if(n)for(var c,h=-1,d=n.length-1;h<d;)a+='<label class="filter-full__item-resolution field-box radio-box resolution-box resolution-box-wide"><input class="radio" type="radio" name="resolution" value="'+s((c=n[h+=1]).key)+'" ',c.key===e.attrs.resolution&&(a+=' checked="checked"'),a+=' /><i class="resolution-size resolution-size-'+s(c.modifier)+'">'+this.tr(c.value)+'</i><i class="resolution-bg"></i></label>';0!==e.attrs.resolution&&(a+='<i data-key="resolution" class="filter-full__btn-reset button-reset _button-reset"></i>'),a+='</div><i class="filter-full__arrow arrow arrow-black arrow-block-2',e.opened.resolution?a+=" arrow-top":a+=" arrow-bottom",a+=' _arrow"></i></div>'}return a+='<div data-name="color" class="search-filters-full__filter search-filters-full__filter-color filter-full ',"color"===e.hoveredFilterName&&(a+="hover"),a+='"><div class="filter-full__title-box filter-full__title-box_pointer _toggle-block"><span class="filter-full__title">'+this.tr("Color")+':</span></div><div class="filter-color _block _color ',e.opened.color||(a+="hidden"),a+=' _colors" data-field="color"></div><i class="filter-full__arrow arrow arrow-black arrow-block-2',e.opened.color?a+=" arrow-top":a+=" arrow-bottom",a+=' _arrow"></i></div><div class="search-filters-full__buttons">\x3c!--<input type="submit" class="search-filters-full__btn-submit button button-m button-green" />--\x3e<button class="search-filters-full__btn-clear button button-m button-white _reset-all">'+this.tr("Clear Filters")+'</button></div></form><i class="search-filters-full__arrow arrow arrow-left arrow-block-round _toggle-filter"></i><i class="search-filters-full__shadow"></i></div>'}},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="cmp-palette">';e.currentColor&&(a+='<div class="cmp-palette__selected"><i class="cmp-palette__selected-color button-color-hexagon"style="background-color: '+s(e.currentColor)+"; border-color: "+s(e.currentColor)+';"><i class="hexgon-edge hexgon-edge_0"></i><i class="hexgon-edge hexgon-edge_60"></i><i class="hexgon-edge hexgon-edge_120"></i><i class="hexgon-edge hexgon-edge_180"></i><i class="hexgon-edge hexgon-edge_240"></i><i class="hexgon-edge hexgon-edge_300"></i></i><i class="cmp-palette__selected-reset button-reset _button-reset" data-key="color"></i></div>'),a+='<div class="cmp-palette__wrap"><img class="cmp-palette__img" src="" usemap="#pallette" /><map name="pallette">';var o=e.paletteCoordinates;if(o)for(var r=-1,l=o.length-1;r<l;)a+='<area class="_color _color-hover" shape="poly" coords="'+s((u=o[r+=1]).coor.join())+'" data-value="'+s(u.hex)+'" style="cursor: pointer;" />';a+='</map><div class="cmp-palette__line">';var n=e.palette;if(n)for(var c=-1,h=n.length-1;c<h;)a+='<i class="cmp-palette__item button-color-hexagon _color-icon" data-value="'+s((u=n[c+=1]).hex)+'"style="background-color: '+s(u.hex)+"; border-color: "+s(u.hex)+';"><i class="cmp-palette__hover-box',e.currentColor&&u.hex===e.currentColor&&(a+=" cmp-palette__hover-box_shadow"),a+='"><i class="cmp-palette__edge cmp-palette__edge_0"></i><i class="cmp-palette__edge cmp-palette__edge_60"></i><i class="cmp-palette__edge cmp-palette__edge_120"></i><i class="cmp-palette__edge cmp-palette__edge_180"></i><i class="cmp-palette__edge cmp-palette__edge_240"></i><i class="cmp-palette__edge cmp-palette__edge_300"></i></i></i>',u.br&&(a+='</div><div class="cmp-palette__line">');a+='</div></div><div class="cmp-palette__adjective">';var d=e.line;if(d)for(var u,p=-1,f=d.length-1;p<f;)a+='<i class="cmp-palette__adjective-color button-color-hexagon _color _color-hover _color-icon',"#ffffff"===(u=d[p+=1]).hex&&(a+=" button-color-hexagon_white"),a+='"data-value="'+s(u.hex)+'" style="background-color: '+s(u.hex)+"; border-color: "+s(u.hex)+';"><i class="cmp-palette__hover-box cmp-palette__hover-box_border',e.currentColor&&u.hex===e.currentColor&&(a+=" cmp-palette__hover-box_active"),a+='"><i class="cmp-palette__edge cmp-palette__edge_0"></i><i class="cmp-palette__edge cmp-palette__edge_60"></i><i class="cmp-palette__edge cmp-palette__edge_120"></i><i class="cmp-palette__edge cmp-palette__edge_180"></i><i class="cmp-palette__edge cmp-palette__edge_240"></i><i class="cmp-palette__edge cmp-palette__edge_300"></i></i>',"#fff"!==u.hex&&"#ffffff"!==u.hex||(a+='<i class="hexgon-edge hexgon-edge_0"></i><i class="hexgon-edge hexgon-edge_60"></i><i class="hexgon-edge hexgon-edge_120"></i><i class="hexgon-edge hexgon-edge_180"></i><i class="hexgon-edge hexgon-edge_240"></i><i class="hexgon-edge hexgon-edge_300"></i>'),a+="</i>";return a+="</div></div>"}},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<div class="filter-compact__list-container"><label class="filter-compact__list-item filter-list-item filter-list-item_category"><input class="filter-list-item__radio _category" type="radio" name="category" value="0" ';0===e.model.category&&(a+=' checked="checked"'),a+=' /><i class="filter-list-item__icon icon icon-ok"></i><span class="filter-list-item__text">'+this.tr("All Categories")+"</span></label>";var o=e.categories;if(o)for(var r,l=-1,n=o.length-1;l<n;)a+='<label class="filter-compact__list-item filter-list-item filter-list-item_category"><input class="filter-list-item__radio _category" type="radio" name="category" value="'+s((r=o[l+=1]).id)+'" ',e.model.category===r.id&&(a+=' checked="checked"'),a+=' /><i class="filter-list-item__icon icon icon-ok"></i><span class="filter-list-item__text">'+this.tr(r.name)+"</span></label>";return a+="</div>"}},function(e,t){e.exports=function(e){var t='<div class="filter-size__item"><ul class="select-list"><li class="select-list__item"><label class="select-list__item-inner"><input id="size-unit-px" class="select-list__radio _size-unit" type="radio" name="size_unit" value="px" ';return"px"===e.model.size_unit&&(t+=' checked="checked"'),t+=' /><span class="select-list__title">'+this.tr("Px")+'</span></label></li><li class="select-list__item"><label class="select-list__item-inner"><input id="size-unit-inch" class="select-list__radio _size-unit" type="radio" name="size_unit" value="inch" ',"inch"===e.model.size_unit&&(t+=' checked="checked"'),t+=' /><span class="select-list__title">'+this.tr("Inches")+'</span></label></li><li class="select-list__item"><label class="select-list__item-inner"><input id="size-unit-cm" class="select-list__radio _size-unit" type="radio" name="size_unit" value="cm" ',"cm"===e.model.size_unit&&(t+=' checked="checked"'),t+=' /><span class="select-list__title">'+this.tr("Cm")+'</span></label></li></ul></div><div class="filter-size__item"><span class="filter-size__slider-title">'+this.tr("Width (not less than)")+'</span><div id="slider-min_width" class="filter-size__slider ui-slider-block"></div>',e.model.min_width&&e.autoSubmit&&(t+='<i data-key="min_width" class="filter-size__btn-reset button-reset  _button-reset"></i>'),t+='</div><div class="filter-size__item"><span class="filter-size__slider-title">'+this.tr("Height (not less than)")+'</span><div id="slider-min_height" class="filter-size__slider ui-slider-block"></div>',e.model.min_height&&e.autoSubmit&&(t+='<i data-key="min_height" class="filter-size__btn-reset button-reset _button-reset"></i>'),t+="</div>",e.autoSubmit||(t+='<button class="filter-people__filter-apply button button-xl button-silver _apply">'+this.tr("Apply")+"</button>"),t}},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a='<ul class="search-hints _search-hints">',o=e.items;if(o)for(var r,l=-1,n=o.length-1;l<n;)a+='<li class="search-seller-hint _hint',(r=o[l+=1]).selected&&(a+=" hint_active"),a+='" data-value="'+s(r.phrase)+'"><span class="search-seller-hint__avatar"><img class="avatar avatar-l" src="'+r.avatar+'" /></span><span class="search-seller-hint__title"><span class="search-seller-hint__title-select">'+s(r.phraseMatched)+"</span>"+s(r.phraseSuggestion)+'</span><span class="search-seller-hint__text">'+s(r.sellerInfo)+'</span><span class="search-seller-hint__text">'+this.tr("Online files")+": "+s(r.onlinePhotos)+"</span></li>";return a+="</ul>"}},function(e,t){e.exports=function(e){var t,i,s="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return(""+e).replace(i,function(e){return t[e]||e})}),a="";e.labels.title&&(a+='<span class="ui-slider-label">'+s(e.labels.title)+"</span>"),a+='<div class="ui-slider-slider"><div class="ui-slider-inside ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all"><span class="ui-slider-handle ui-state-default ui-corner-all" tabindex="0" style="left: '+s(e.percent)+'%;">',e.labels.control&&(a+='<span class="ui-slider-label ui-slider-label_small">'+s(e.labels.control)+"</span>"),a+='</span><div class="ui-slider-range ui-widget-header ui-corner-all ui-slider-range-min filter-full__slider-range _slider-range" style="width: '+s(e.percent)+'%;"></div></div><input type="hidden" name="'+s(e.name)+'" value="'+s(e.value)+'" /></div><div class="ui-slider-scale" data-value="'+s(e.position)+'">';var o=e.range;if(o)for(var r=-1,l=o.length-1;r<l;)o[r+=1],a+='<span class="ui-slider-scale__item"></span>';if(a+="</div>",e.labels.footer){a+='<div class="ui-slider-scale-labels">';var n=e.labels.footer;if(n)for(var c=-1,h=n.length-1;c<h;)a+='<span class="ui-slider-scale-labels__item ui-slider-scale-labels__item_first">'+s(n[c+=1])+"</span>";a+="</div>"}return a}},function(e,t,i){"use strict";var s=i(0),a=i(16),o=i(478),r=i(691),l=i(690),n=i(689),c=i(688),h=i(687),d=i(655),u=i(480),p=i(633),f=i(479),g=i(128),m=i(11),b=i(484),_=i(880),v=i(879),w=i(878),y=i(751),k=i(750),x=i(686),C=i(685);e.exports=r.extend({name:"SearchFilterFull",el:!1,template:_,events:{"click ._toggle-filter":"onToggleFilterClick","click ._toggle-block":"onToggleBlockClick","click ._arrow":"onArrowClick","click ._button-reset":"onFilterResetSingleClick","click ._reset-all":"onResetAllClick","change ._orientation input:radio":"onRegularFieldChange","change input[name=editorial_only]":"onRegularCheckboxChange","change input[name=editorial_exclude]":"onRegularCheckboxChange","change input[name=resolution]":"onTypifyFieldChange","mouseenter ._contributor-tooltip":"showContributorToolTip","mouseleave ._contributor-tooltip":"hideContributorToolTip","mouseenter ._keywords-tooltip":"showKeywordsToolTip","mouseleave ._keywords-tooltip":"hideKeywordsToolTip","mouseenter .search-filters-full__filter":"onFilterMouseenter","mouseleave .search-filters-full__filter":"onFilterMouseleave"},initialize:function(){this.model=this.app.store.get("SearchQuery"),this.listenToTheModel()},prepareRender:function(){this.setViews({"#slider-accuracy":new p({name:"accuracy",model:this.model,labels:{footer:[this.tr(g.Relevance),this.tr(g.Quality)]},onStopCallback:this.onStopCallback.bind(this)}),"._categories":new h({model:this.model,template:v,onCategoryChangeCallback:this.onTypifyFieldChange.bind(this)}),"._contributor":new n({template:w,name:"seller",type:"seller",placeholder:this.tr(g.EnterName),model:this.model,onChangeCallback:this.onSubFilterChange.bind(this),onResetCallback:this.onSubFilterResetSingle.bind(this)}),"._exclude-keywords":new n({template:w,name:"exclude_keywords",placeholder:this.tr(g.EnterKeywords),model:this.model,enabled:!1,onChangeCallback:this.onSubFilterChange.bind(this),onResetCallback:this.onSubFilterResetSingle.bind(this)}),"._people":new l({model:this.model,template:y,onChangeCallback:this.onSubFilterChange.bind(this),onResetCallback:this.onSubFilterResetSingle.bind(this)}),"._image-size":new c({model:this.model,onChangeCallback:this.onSubFilterChange.bind(this),onResetCallback:this.onSubFilterResetSingle.bind(this)}),"._colors":new d({template:k,model:this.model,mode:"full",onChangeCallback:this.onSubFilterChange.bind(this),onResetCallback:this.onSubFilterResetSingle.bind(this)})})},serialize:function(){return{displayEditorial:this.model.getRestrictions().get("editorial"),nonDefaults:s.clone(this.model.getNonDefaults()),openedBlock:this.opened,opened:this.defineOpenedSubFilter(),attrs:this.model.serialize(),hoveredFilterName:this.hoveredFilter,needToShowPhotoFilters:!this.model.get("video")||this.model.get("video")&&this.model.get("photo")||this.model.get("video")&&this.model.get("vector"),orientations:m.orientations,resolutions:m.resolutions}},onFilterMouseenter:function(e){a.$(e.currentTarget).addClass("hover"),this.hoveredFilter=e.currentTarget.getAttribute("data-name")},onFilterMouseleave:function(e){a.$(e.currentTarget).removeClass("hover"),delete this.hoveredFilter},defineChangedNonDefaults:function(e){return s.pick(this.model.changed,s.keys(this.model.getNonDefaults(e)))},defineSubFilterVisibility:function(){return{people:s.size(this.model.getNonDefaults(this.model.mutable.people))>0,sizes:s.size(this.model.getNonDefaults(["size_unit","min_width","min_height"]))>0,resolution:this.model.get("resolution")!==this.model.defaults.resolution,color:this.model.get("color")!==this.model.defaults.color}},defineOpenedSubFilter:function(){var e={};return s.each(this.blocked,function(t,i,a){e[i]=t;var o=this.model.mutable[i]||[];"resolution"!==i&&"color"!==i||o.push(i),"sizes"===i&&o.push("size_unit","min_width","min_height"),s.size(this.defineChangedNonDefaults(o))>0&&(a[i]=!0,e[i]=!0)},this),e},resetBlockedSubFilter:function(e){var t=this.defineSubFilterVisibility(),i=!1;-1!==s.values(this.blocked).indexOf(!0)&&(i=!0),s.each(t,function(t,i){this.blocked[i]=s.isUndefined(e)?t:e},this),i&&this.render()},onToggleFilterClick:function(e){e.stopPropagation(),this.onToggleFilterClickCallback("full")},onToggleBlockClick:function(e){e.stopPropagation();var t=a.$(e.currentTarget).siblings("._arrow"),i=t.siblings("._block");this.toggleBlock(t,i)},onArrowClick:function(e){e.stopPropagation();var t=a.$(e.currentTarget),i=t.siblings("._block");this.toggleBlock(t,i)},toggleBlock:function(e,t){t.toggleClass("hidden"),this.blocked[t.attr("data-field")]=!t.hasClass("hidden"),e.removeClass("arrow-bottom arrow-top").addClass(t.hasClass("hidden")?"arrow-bottom":"arrow-top")},onFilterResetSingleClick:function(e){e.stopPropagation(),this.onSubFilterResetSingle(e.currentTarget.getAttribute("data-key"))},onResetAllClick:function(e){e.stopPropagation(),e.preventDefault(),this.resetBlockedSubFilter(!1),this.model.clearSearchFiltration()},clientAfterRender:function(){var e=this;this.setNotExistView("contributorToolTip",u,{params:f.SearchFilter,content:new o({el:!1,template:x})}),this.setNotExistView("keywordsToolTip",u,{params:f.SearchFilter,content:new o({el:!1,template:C})}),setTimeout(function(){return e.$(".search-filters-full__filter.hover").removeClass("hover")},50),b(this.$el,a.$)},showContributorToolTip:function(e){this.getView("contributorToolTip").show(e)},hideContributorToolTip:function(e){this.getView("contributorToolTip").hide(e)},showKeywordsToolTip:function(e){this.getView("keywordsToolTip").show(e)},hideKeywordsToolTip:function(e){this.getView("keywordsToolTip").hide(e)},onStopCallback:function(e,t){this.onSubFilterChange("accuracy",t.value)},open:function(){this.opened=!0,this.$el.removeClass("search-filters-full_closed close-animation hidden").addClass("open-animation")},close:function(e){this.opened=!1,this.$el.removeClass("open-animation").addClass("close-animation"),s.delay(s.bind(function(){this.$el.addClass("hidden"),e.apply(this)},this),300)},onToggleFilterClickCallback:s.noop})},function(e,t,i){"use strict";var s=i(16),a=i(478),o=i(886),r=i(877);e.exports=a.extend({name:"SearchFiltersManager",el:!1,blocked:{full:{people:!1,sizes:!1,resolution:!1,color:!1},compact:{accuracy:!1,category:!1,seller:!1,exclude_keywords:!1,orientation:!1,editorial:!1,people:!1,size:!1,resolution:!1,color:!1}},prepareRender:function(){this.setFilter(this.app.store.get("SearchSettings").get("filterFull")?"full":"compact")},setFilter:function(e,t){this.getView()&&this.removeView().first().value().undelegateEvents(),this.setViews({"":new("full"===e?o:r)({opened:!t,app:this.app,blocked:this.blocked[e],onToggleFilterClickCallback:this.onToggleFilterClickCallback.bind(this)})})},onToggleFilterClickCallback:function(e){this["full"===e?"closeFullFilter":"openFullFilter"]()},openFullFilter:function(){var e=this;this.onSearchSettingsChange({filterFull:!0}),this.getView().close(function(){return e.openFullFilterCallback()})},openFullFilterCallback:function(){var e=this;this.app.observer.fire("SearchFilter:Toggle"),this.setFilter("full","closed"),this.getView().render().promise().done(function(){e.getView().open()}),this.getComponent("RightContainer").reduce(function(){return e.onToggleFormsCallback()})},closeFullFilter:function(){var e=this;this.onSearchSettingsChange({filterFull:!1}),this.getComponent("RightContainer").increase(),this.getView().close(function(){return e.closeFullFilterCallback()})},closeFullFilterCallback:function(){var e=this;this.app.observer.fire("SearchFilter:Toggle"),this.setFilter("compact","closed"),this.getView().render().promise().done(function(){e.getView().open(function(){return e.onToggleFormsCallback()})})},onToggleFormsCallback:function(){Backbone.$("._content").toggleClass("search-filters-compact-activated",!this.app.store.get("SearchSettings").get("filterFull")),Backbone.$(window).trigger("resize")},onSearchSettingsChange:s.noop,getComponent:s.noop})},function(e,t,i){"use strict";var s=i(478),a=i(752);e.exports=s.extend({name:"LeftContainer",el:!1,template:a,initialize:function(){var e=this;this.listenTo(this.app.store.get("SearchQuery"),"change",function(t){t.previous("relatedTo")&&!t.get("relatedTo")&&e.render()})},prepareRender:function(){this.app.store.get("SearchQuery").get("relatedTo")||"Folder"===this.app.router.routeName||this.setViews(this.lazyViews)}})}])]);